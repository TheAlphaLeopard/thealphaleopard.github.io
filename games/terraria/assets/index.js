(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const b of document.querySelectorAll('link[rel="modulepreload"]'))w(b);new MutationObserver(b=>{for(const p of b)if(p.type==="childList")for(const y of p.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&w(y)}).observe(document,{childList:!0,subtree:!0});function m(b){const p={};return b.integrity&&(p.integrity=b.integrity),b.referrerPolicy&&(p.referrerPolicy=b.referrerPolicy),b.crossOrigin==="use-credentials"?p.credentials="include":b.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function w(b){if(b.ep)return;b.ep=!0;const p=m(b);fetch(b.href,p)}})();(function(s){const[g,m,w,b,p,y,S]=Array.from(Array(7),Symbol),T="dlcomponent",D={};function te(){return`${Array(4).fill(0).map(()=>Math.floor(36*Math.random()).toString(36)).join("")}`}const re=R=>function(H,...se){let V="";for(let x of H)V+=x+(se.shift()||"");return ee("dl"+te(),V,R)},le=re(!1),P=re(!0);function ee(R,H,se){let V=D[H];if(V)return V;D[H]=R;const x=document.createElement("style");document.head.appendChild(x);let F="",Z="";for(H+=`
`;;){let[K,...G]=H.split(`
`);if(K.trim().endsWith("{")||(Z+=K+`
`,!(H=G.join(`
`))))break}x.textContent=H;let ie=!0;if(ie=!!window.CSSScopeRule,se&&ie){let K="";for(const G of x.sheet.cssRules)G.selectorText||G.media?G.selectorText?.startsWith(":")?(G.selectorText=`.${R}${G.selectorText}`,K+=G.cssText):F+=G.cssText:K+=G.cssText;x.textContent=`.${R} {${Z}} @scope (.${R}) to (:not(.${R}).${T} *) { ${F} } ${K}`}else{let K="";se&&!ie&&(K=function(Q){let oe=`:not(${Q}).${T}`,Ne=(De,be)=>`${De} *${be>50?"":`:not(${Ne(De+" "+(be%2==0?Q:oe),be+1)})`}`;return`:not(${Ne(oe,0)})`}(`.${R}`));const G=Q=>{Q.selectorText&&(Q.selectorText=Q.selectorText.split(",").map(oe=>(oe=oe.trim())[0]==="&"?`.${R}${oe.slice(1)}${K}`:oe[0]===":"?`.${R}${oe}${K}`:`.${R} ${oe}${K}`).join(", ")),F+=Q.cssText};for(const Q of x.sheet.cssRules)Q.media&&Q.media.mediaText?(F+=`@media(${Q.media.mediaText}){`,Array.from(Q.cssRules).map(G),F+="}"):G(Q);x.textContent=`.${R} {${Z}}${F}`}return R}let J=document;const O=Symbol();let ae=!1;Object.defineProperty(window,"use",{get:()=>(ae=!0,(R,H,...se)=>{if(R instanceof Array)return ge(R,H,...se);X(R)||U(R),ae=!1;let V={get value(){return function(x){let F=x[w],Z=F[b],ie=x[g],K=F[m];for(let G of Z)if(K=K[G],!I(K))break;for(let G of ie)K=G(K);return K}(V)}};if(U(R)){let x=[...R[g]];H&&x.push(H),V[w]=R[w],V[g]=x}else V[w]=R,V[g]=H?[H]:[];return V})}),Object.defineProperty(window,"useChange",{get:()=>(ae=!0,(R,H)=>{ae=!1,R=R instanceof Array?R:[R];for(let se of R)X(se)||U(se),E(use(se),H)})});const ge=(R,...H)=>{ae=!1;let se=q({});const V=[];for(const x in R)if(V.push(R[x]),H[x]){let F=H[x];if(X(F)&&(F=use(F)),U(F)){const Z=V.length;let ie;E(use(F),K=>{V[Z]=String(K);let G=V.join("");G!=ie&&(se.string=G),ie=G})}else V.push(String(F))}return se.string=V.join(""),use(se.string)};let Le=new Map;function q(R){I(R),R[p]=[],R[m]=R;let H=Symbol.toPrimitive;return new Proxy(R,{get(V,x,F){if(ae){let Z=Symbol(),ie=new Proxy({[m]:V,[w]:F,[b]:[x],[H]:()=>Z},{get:(K,G)=>[m,w,b,g,H].includes(G)?K[G]:(G=Le.get(G)||G,K[b].push(G),ie)});return Le.set(Z,ie),ie}return Reflect.get(V,x,F)},set(V,x,F){let Z=Reflect.set(V,x,F);for(let ie of V[p])ie(V,x,F);return V[S]&&V[S](V,x,V[x]),Z}})}let I=R=>R instanceof Object;function M(R){return I(R)&&p in R}function X(R){return I(R)&&b in R}function U(R){return I(R)&&g in R}function L(R){return R[g].length!=0}function E(R,H){U(R);let se,V=R[w],x=R[g],F=[];function Z(){let G=V[m];for(se of F)if(G=G[se],!I(G))break;for(let Q of x)G=Q(G);H(G)}let ie=(G,Q)=>function oe(Ne,De,be){if(De===F[Q]&&G===Ne&&(Z(),I(be))){let Ue=be[p];Ue&&!Ue.includes(oe)&&Ue.push(ie(be[m],Q+1))}};for(let G in V[b]){let Q=V[b][G];I(Q)&&Q[m]?E(Q,oe=>{F[G]=oe,Z()}):F[G]=Q}let K=ie(V[m],0);V[m][p].push(K),K(V[m],F[0],V[m][F[0]])}function z(R,H,se){let V,x,F,Z;E(R,ie=>{F=x?.[0],F&&(V=F.previousSibling||(Z=F.parentNode)),x&&x.forEach(K=>K.remove()),x=Te(se?ie?se.then:se.otherwise:ie,K=>{V?(Z?(V.prepend(K),Z=null):V.after(K),V=K):H(K)})})}let u=R=>H=>{let se=R[w],V=R[b],x=0;for(;x<V.length-1;x++)if(se=se[V[x]],!I(se))return;se[V[x]]=H};function we(R,H,...se){if(R==O)return se;if(typeof R=="function"){let F=q(Object.create(R.prototype));for(let Q in H){let oe=H[Q];if(Q.startsWith("bind:")){U(oe),L(oe);let Ne=u(oe[w]),De=Q.substring(5);if(De=="this")Ne(F);else{let be=!1;E(oe,Ue=>{be?be=!1:(be=!0,F[De]=Ue)}),E(use(F[De]),Ue=>{be?be=!1:(be=!0,Ne(Ue))})}delete H[Q]}else U(oe)&&(E(oe,Ne=>F[Q]=Ne),delete H[Q])}Object.assign(F,H),F.children=[];for(let Q of se)Te(Q,F.children.push.bind(F.children));let Z=R.apply(F);Z.$=F,F.root=Z;let ie=Z.classList,K=F.css,G=R.name.replace(/\$/g,"-");return K&&ie.add(ee(`${G}-${te()}`,K,!0)),F._leak||ie.add(T),Z.setAttribute("data-component",R.name),typeof F.mount=="function"&&F.mount(),Z}let V=H?.xmlns,x=V?J.createElementNS(V,R):J.createElement(R);for(let F of se)Te(F,x.append.bind(x));if(!H)return x;((F,Z)=>{F in H&&(Z(H[F]),delete H[F])})("class",F=>{if(typeof F=="string"||F instanceof Array||U(F),typeof F!="string")if(U(F)){let Z="";E(F,ie=>{for(let K of Z.split(" "))K&&x.classList.remove(K);if(typeof ie=="string"){for(let K of ie.split(" "))K&&x.classList.add(K);Z=ie}})}else for(let Z of F)if(U(Z)){let ie=null;E(Z,K=>{typeof ie=="string"&&x.classList.remove(ie),x.classList.add(K),ie=K})}else x.classList.add(Z);else x.setAttribute("class",F)});for(let F in H){let Z=H[F];if(F.startsWith("bind:")){U(Z),L(Z);let ie=F.substring(5),K=u(Z[w]);ie=="this"?K(x):ie=="value"?(E(Z,G=>x.value=G),x.addEventListener("change",()=>K(x.value))):ie=="checked"&&(E(Z,G=>x.checked=G),x.addEventListener("click",()=>K(x.checked))),delete H[F]}if(F.startsWith("class:")){let ie=F.substring(6);U(Z)?E(Z,K=>{K?x.classList.add(ie):x.classList.remove(ie)}):Z&&x.classList.add(ie),delete H[F]}if(F=="style"&&I(Z)&&!U(Z)){for(let ie in Z){let K=M(Z)?use(Z[ie]):Z[ie];U(K)?E(K,G=>x.style[ie]=G):x.style[ie]=K}delete H[F]}}for(let F in H){let Z=H[F];U(Z)?E(Z,ie=>{He(x,F,ie)}):He(x,F,Z)}return V&&(x.innerHTML=x.innerHTML),x}function Te(R,H){let se,V,x;if(U(R))z(R,H);else{if(!I(R)||!(y in R)){if(R instanceof Node)return H(R),[R];if(R instanceof Array){for(se of(V=[],R))V=V.concat(Te(se,H));return V[0]||(V=Te("",H)),V}return R==null&&(R=""),x=J.createTextNode(R),H(x),[x]}z(R[y],H,R)}}function He(R,H,se){if(!se&&R.hasAttribute(H)&&R.removeAttribute(H),se)if(H.startsWith("on:")){let V=H.substring(3);for(let x of V.split("$"))R.addEventListener(x,(...F)=>{self.$el=R,se(...F)})}else R.setAttribute(H,se)}s.$if=function(R,H,se){return se??=J.createTextNode(""),U(R)?{[y]:R,then:H,otherwise:se}:R?H:se},s.$state=q,s.$store=function(R,{ident:H,backing:se,autosave:V}){let x,F;typeof se=="string"?se==="localstorage"&&(x=()=>localStorage.getItem(H),F=(G,Q)=>{localStorage.setItem(G,Q)}):{read:x,write:F}=se;let Z=()=>{console.info("[dreamland.js]: saving "+H);let G={},Q=0,oe=De=>{let be={stateful:M(De),values:{}},Ue=Q++;G[Ue]=be;for(let Pe in De){let qe=De[Pe];if(!U(qe))switch(typeof qe){case"string":case"number":case"boolean":case"undefined":be.values[Pe]=JSON.stringify(qe);break;case"object":if(qe instanceof Array){be.values[Pe]=qe.map(Ce=>typeof Ce=="object"?oe(Ce):JSON.stringify(Ce));break}qe===null?be.values[Pe]="null":(qe.__proto__,be.values[Pe]=oe(qe))}}return Ue};oe(R);let Ne=JSON.stringify(G);F(H,Ne)},ie=(G,Q,oe)=>{M(oe)&&(oe[m][S]=ie),Z()},K=JSON.parse(x(H));if(K){let G={},Q=oe=>{if(G[oe])return G[oe];let Ne=K[oe],De={};for(let Ue in Ne.values){let Pe=Ne.values[Ue];De[Ue]=typeof Pe=="string"?JSON.parse(Pe):Pe instanceof Array?Pe.map(qe=>typeof qe=="string"?JSON.parse(qe):Q(qe)):Q(Pe)}Ne.stateful&&V=="auto"&&(De[S]=ie);let be=Ne.stateful?q(De):De;return G[oe]=be,be};R=Q(0)}switch(V){case"beforeunload":addEventListener("beforeunload",Z);break;case"manual":break;case"auto":R[S]=ie}return q(R)},s.Fragment=O,s.css=le,s.h=we,s.html=function(R,...H){R=[...R];let se="",V={};for(let F=0;F<R.length;F++){let Z=R[F],ie=H[F],K=H[F]instanceof Function&&/^ *\/>/.exec(R[F+1]);if(/< *$/.test(Z)&&K&&(R[F+1]=R[F+1].substr(K.index+K[0].length)),se+=Z,F<H.length){let G,Q=Object.values(V).findIndex(oe=>oe===ie);Q!==-1?G=Object.keys(V)[Q]:(G="h"+te(),V[G]=ie),se+=G,K&&(se+=`></${G}>`)}}let x=new DOMParser().parseFromString(se,"text/html");return x.body.children.length,function F(Z){let ie=Z.nodeName.toLowerCase();if(ie==="#text")return Z.textContent;ie in V&&(ie=V[ie]);let K=[...Z.childNodes].map(F);for(let Q=0;Q<K.length;Q++){let oe=K[Q];if(typeof oe=="string")for(const[Ne,De]of Object.entries(V)){if(!oe)break;if(!oe.includes(Ne))continue;let be;[be,oe]=oe.split(Ne),K=[...K.slice(0,Q),be,De,oe,...K.slice(Q+1)],Q+=2}}let G={};if(!Z.attributes)return Z;for(const Q of[...Z.attributes]){let oe=Q.nodeValue;oe in V&&(oe=V[oe]),G[Q.name]=oe}return we(ie,G,K)}(x.body.children[0])},s.isDLPtr=U,s.isStateful=M,s.scope=P})(window);function getDefaultExportFromCjs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function getAugmentedNamespace(s){if(s.__esModule)return s;var g=s.default;if(typeof g=="function"){var m=function w(){return this instanceof w?Reflect.construct(g,arguments,this.constructor):g.apply(this,arguments)};m.prototype=g.prototype}else m={};return Object.defineProperty(m,"__esModule",{value:!0}),Object.keys(s).forEach(function(w){var b=Object.getOwnPropertyDescriptor(s,w);Object.defineProperty(m,w,b.get?b:{enumerable:!0,get:function(){return s[w]}})}),m}var dist$1={exports:{}},dist=dist$1.exports,hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,function(s,g){(function(m,w){s.exports=w()})(dist,()=>(()=>{var m={d:(p,y)=>{for(var S in y)m.o(y,S)&&!m.o(p,S)&&Object.defineProperty(p,S,{enumerable:!0,get:y[S]})},o:(p,y)=>Object.prototype.hasOwnProperty.call(p,y),r:p=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})}},w={};m.r(w),m.d(w,{RingBuffer:()=>b});class b{static fromArray(y,S=0){const T=new b(S);return T.fromArray(y,S===0),T}constructor(y){if(this.buffer=[],this.pos=0,y<0)throw new RangeError("Invalid size.");this.size=y}getSize(){return this.size}getPos(){return this.pos}getBufferLength(){return this.buffer.length}add(...y){y.forEach(S=>{this.buffer[this.pos]=S,this.pos=(this.pos+1)%this.size})}get(y){if(y<0&&(y+=this.buffer.length),!(y<0||y>this.buffer.length))return this.buffer.length<this.size?this.buffer[y]:this.buffer[(this.pos+y)%this.size]}getFirst(){return this.get(0)}getLast(){return this.get(-1)}getFirstN(y){return y===0?[]:y<0?this.getLastN(-y):this.toArray().slice(0,y)}getLastN(y){return y===0?[]:y<0?this.getFirstN(-y):this.toArray().slice(-y)}remove(y,S=1){if(y<0&&(y+=this.buffer.length),y<0||y>this.buffer.length)return[];const T=this.toArray(),D=T.splice(y,S);return this.fromArray(T),D}removeFirst(){return this.remove(0)[0]}removeLast(){return this.remove(-1)[0]}toArray(){return this.buffer.slice(this.pos).concat(this.buffer.slice(0,this.pos))}fromArray(y,S=!1){if(!Array.isArray(y))throw new TypeError("Input value is not an array.");S&&this.resize(y.length),this.size!==0&&(this.buffer=y.slice(-this.size),this.pos=this.buffer.length%this.size)}clear(){this.buffer=[],this.pos=0}resize(y){if(y<0)throw new RangeError("The size does not allow negative values.");if(y===0)this.clear();else if(y!==this.size){const S=this.toArray();this.fromArray(S.slice(-y)),this.pos=this.buffer.length%y}this.size=y}isFull(){return this.buffer.length===this.size}isEmpty(){return this.buffer.length===0}}return w})())}(dist$1)),dist$1.exports}var distExports=requireDist();const libcurl=function(){var s=typeof s<"u"?s:{},g=Object.assign({},s),m="./this.program",w=(e,t)=>{throw t},b=typeof window=="object",p=typeof importScripts=="function",y=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",S=!b&&!y&&!p;if(s.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var T="";function D(e){return s.locateFile?s.locateFile(e,T):T+e}var te,re,le;function P(e){if(e instanceof an)return;let t=e;e&&typeof e=="object"&&e.stack&&(t=[e,e.stack]),J("exiting due to exception: "+t)}if(S){if(typeof process=="object"&&typeof require=="function"||typeof window=="object"||typeof importScripts=="function")throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");typeof read<"u"&&(te=function(t){return read(t)}),le=function(t){let r;return typeof readbuffer=="function"?new Uint8Array(readbuffer(t)):(r=read(t,"binary"),x(typeof r=="object"),r)},re=function(t,r,n){setTimeout(()=>r(le(t)),0)},typeof scriptArgs<"u"&&scriptArgs,typeof quit=="function"&&(w=(e,t)=>{P(t),quit(e)}),typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)}else if(b||p){if(p?T=self.location.href:typeof document<"u"&&document.currentScript&&(T=document.currentScript.src),T.indexOf("blob:")!==0?T=T.substr(0,T.replace(/[?#].*/,"").lastIndexOf("/")+1):T="",!(typeof window=="object"||typeof importScripts=="function"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");te=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},p&&(le=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),re=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{if(n.status==200||n.status==0&&n.response){t(n.response);return}r()},n.onerror=r,n.send(null)}}else throw new Error("environment detection error");var ee=s.print||console.log.bind(console),J=s.printErr||console.warn.bind(console);Object.assign(s,g),g=null,Bn(),s.arguments&&s.arguments,U("arguments","arguments_"),s.thisProgram&&(m=s.thisProgram),U("thisProgram","thisProgram"),s.quit&&(w=s.quit),U("quit","quit_"),x(typeof s.memoryInitializerPrefixURL>"u","Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),x(typeof s.pthreadMainPrefixURL>"u","Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),x(typeof s.cdInitializerPrefixURL>"u","Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),x(typeof s.filePackagePrefixURL>"u","Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),x(typeof s.read>"u","Module.read option was removed (modify read_ in JS)"),x(typeof s.readAsync>"u","Module.readAsync option was removed (modify readAsync in JS)"),x(typeof s.readBinary>"u","Module.readBinary option was removed (modify readBinary in JS)"),x(typeof s.setWindowTitle>"u","Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),x(typeof s.TOTAL_MEMORY>"u","Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),U("read","read_"),U("readAsync","readAsync"),U("readBinary","readBinary"),U("setWindowTitle","setWindowTitle"),x(!y,"node environment detected but not enabled at build time.  Add 'node' to `-s ENVIRONMENT` to enable."),x(!S,"shell environment detected but not enabled at build time.  Add 'shell' to `-s ENVIRONMENT` to enable.");function O(e){O.shown||(O.shown={}),O.shown[e]||(O.shown[e]=1,J(e))}function ae(e,t){if(typeof WebAssembly.Function=="function"){for(var r={i:"i32",j:"i64",f:"f32",d:"f64"},n={parameters:[],results:t[0]=="v"?[]:[r[t[0]]]},o=1;o<t.length;++o)n.parameters.push(r[t[o]]);return new WebAssembly.Function(n,e)}var a=[1,0,1,96],l=t.slice(0,1),d=t.slice(1),v={i:127,j:126,f:125,d:124};a.push(d.length);for(var o=0;o<d.length;++o)a.push(v[d[o]]);l=="v"?a.push(0):a=a.concat([1,v[l]]),a[1]=a.length-2;var A=new Uint8Array([0,97,115,109,1,0,0,0].concat(a,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),j=new WebAssembly.Module(A),ne=new WebAssembly.Instance(j,{e:{f:e}}),N=ne.exports.f;return N}var ge=[],Le;function q(){if(ge.length)return ge.pop();try{Ve.grow(1)}catch(e){throw e instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":e}return Ve.length-1}function I(e,t){for(var r=e;r<e+t;r++){var n=Xe(r);n&&Le.set(n,r)}}function M(e,t){if(x(typeof e<"u"),Le||(Le=new WeakMap,I(0,Ve.length)),Le.has(e))return Le.get(e);var r=q();try{Qt(r,e)}catch(o){if(!(o instanceof TypeError))throw o;x(typeof t<"u","Missing signature argument to addFunction: "+e);var n=ae(e,t);Qt(r,n)}return Le.set(e,r),r}function X(e){Le.delete(Xe(e)),ge.push(e)}function U(e,t){Object.getOwnPropertyDescriptor(s,e)||Object.defineProperty(s,e,{configurable:!0,get:function(){ze("Module."+e+" has been replaced with plain "+t+" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}})}function L(e){Object.getOwnPropertyDescriptor(s,e)&&ze("`Module."+e+"` was supplied but `"+e+"` not included in INCOMING_MODULE_JS_API")}function E(e,t){var r="'"+e+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)";return t&&(r+=". Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you"),r}function z(e,t){Object.getOwnPropertyDescriptor(s,e)||Object.defineProperty(s,e,{configurable:!0,get:function(){ze(E(e,t))}})}function u(e,t){Object.getOwnPropertyDescriptor(s,e)||(s[e]=()=>ze(E(e,t)))}var we=0,Te=e=>{we=e},He=()=>we,R;s.wasmBinary&&(R=s.wasmBinary),U("wasmBinary","wasmBinary"),s.noExitRuntime,U("noExitRuntime","noExitRuntime"),typeof WebAssembly!="object"&&ze("no native wasm support detected");var H,se=!1,V;function x(e,t){e||ze("Assertion failed"+(t?": "+t:""))}var F=0,Z=1;function ie(e,t){var r;return x(typeof t=="number","allocate no longer takes a type argument"),x(typeof e!="number","allocate no longer takes a number as arg0"),t==Z?r=hi(e.length):r=lr(e.length),!e.subarray&&!e.slice&&(e=new Uint8Array(e)),Ke.set(e,r),r}var K=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function G(e,t,r){for(var n=t+r,o=t;e[o]&&!(o>=n);)++o;if(o-t>16&&e.subarray&&K)return K.decode(e.subarray(t,o));for(var a="";t<o;){var l=e[t++];if(!(l&128)){a+=String.fromCharCode(l);continue}var d=e[t++]&63;if((l&224)==192){a+=String.fromCharCode((l&31)<<6|d);continue}var v=e[t++]&63;if((l&240)==224?l=(l&15)<<12|d<<6|v:((l&248)!=240&&O("Invalid UTF-8 leading byte 0x"+l.toString(16)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),l=(l&7)<<18|d<<12|v<<6|e[t++]&63),l<65536)a+=String.fromCharCode(l);else{var A=l-65536;a+=String.fromCharCode(55296|A>>10,56320|A&1023)}}return a}function Q(e,t){return e?G(Ke,e,t):""}function oe(e,t,r,n){if(!(n>0))return 0;for(var o=r,a=r+n-1,l=0;l<e.length;++l){var d=e.charCodeAt(l);if(d>=55296&&d<=57343){var v=e.charCodeAt(++l);d=65536+((d&1023)<<10)|v&1023}if(d<=127){if(r>=a)break;t[r++]=d}else if(d<=2047){if(r+1>=a)break;t[r++]=192|d>>6,t[r++]=128|d&63}else if(d<=65535){if(r+2>=a)break;t[r++]=224|d>>12,t[r++]=128|d>>6&63,t[r++]=128|d&63}else{if(r+3>=a)break;d>1114111&&O("Invalid Unicode code point 0x"+d.toString(16)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),t[r++]=240|d>>18,t[r++]=128|d>>12&63,t[r++]=128|d>>6&63,t[r++]=128|d&63}}return t[r]=0,r-o}function Ne(e,t,r){return x(!0,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),oe(e,Ke,t,r)}function De(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((n&1023)<<10)|e.charCodeAt(++r)&1023),n<=127?++t:n<=2047?t+=2:n<=65535?t+=3:t+=4}return t}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function be(e){var t=De(e)+1,r=lr(t);return r&&oe(e,Ce,r,t),r}function Ue(e,t){x(e.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),Ce.set(e,t)}function Pe(e,t,r){for(var n=0;n<e.length;++n)x(e.charCodeAt(n)===(e.charCodeAt(n)&255)),Ce[t++>>0]=e.charCodeAt(n);Ce[t>>0]=0}var qe,Ce,Ke,_,k,f,W;function ue(e){qe=e,s.HEAP8=Ce=new Int8Array(e),s.HEAP16=_=new Int16Array(e),s.HEAP32=f=new Int32Array(e),s.HEAPU8=Ke=new Uint8Array(e),s.HEAPU16=k=new Uint16Array(e),s.HEAPU32=W=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=new Float64Array(e)}var ke=5242880;s.TOTAL_STACK&&x(ke===s.TOTAL_STACK,"the stack size can no longer be determined at runtime");var Me=s.INITIAL_MEMORY||16777216;U("INITIAL_MEMORY","INITIAL_MEMORY"),x(Me>=ke,"INITIAL_MEMORY should be larger than TOTAL_STACK, was "+Me+"! (TOTAL_STACK="+ke+")"),x(typeof Int32Array<"u"&&typeof Float64Array<"u"&&Int32Array.prototype.subarray!=null&&Int32Array.prototype.set!=null,"JS engine does not provide full typed array support"),x(!s.wasmMemory,"Use of `wasmMemory` detected.  Use -s IMPORTED_MEMORY to define wasmMemory externally"),x(Me==16777216,"Detected runtime INITIAL_MEMORY setting.  Use -s IMPORTED_MEMORY to define wasmMemory dynamically");var Ve;function $t(){var e=Wr();x((e&3)==0),f[e+4>>2]=34821223,f[e+8>>2]=2310721022,f[0]=1668509029}function ht(){if(!se){var e=Wr(),t=W[e+4>>2],r=W[e+8>>2];(t!=34821223||r!=2310721022)&&ze("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+r.toString(16)+" 0x"+t.toString(16)),f[0]!==1668509029&&ze("Runtime error: The application has corrupted its heap memory area (address zero)!")}}(function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,t[0]!==115||t[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -s SUPPORT_BIG_ENDIAN=1 to bypass)"})();var ct=[],Lt=[],St=[],Ye=!1;function Ge(){if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)kt(s.preRun.shift());Dt(ct)}function Vt(){ht(),x(!Ye),Ye=!0,!s.noFSInit&&!i.init.initialized&&i.init(),i.ignorePermissions=!1,Ie.root=i.mount(Ie,{},null),de.root=i.mount(de,{},null),Dt(Lt)}function gr(){if(ht(),s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;)Gt(s.postRun.shift());Dt(St)}function kt(e){ct.unshift(e)}function yr(e){Lt.unshift(e)}function Gt(e){St.unshift(e)}x(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),x(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),x(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),x(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var at=0,nt=null,pt=null,ut={};function Yt(e){for(var t=e;;){if(!ut[e])return e;e=t+Math.random()}}function Rt(e){at++,s.monitorRunDependencies&&s.monitorRunDependencies(at),e?(x(!ut[e]),ut[e]=1,nt===null&&typeof setInterval<"u"&&(nt=setInterval(function(){if(se){clearInterval(nt),nt=null;return}var t=!1;for(var r in ut)t||(t=!0,J("still waiting on run dependencies:")),J("dependency: "+r);t&&J("(end of list)")},1e4))):J("warning: run dependency added without ID")}function xt(e){if(at--,s.monitorRunDependencies&&s.monitorRunDependencies(at),e?(x(ut[e]),delete ut[e]):J("warning: run dependency removed without ID"),at==0&&(nt!==null&&(clearInterval(nt),nt=null),pt)){var t=pt;pt=null,t()}}s.preloadedImages={},s.preloadedAudios={};function ze(e){s.onAbort&&s.onAbort(e),e="Aborted("+e+")",J(e),se=!0,V=1;var t=new WebAssembly.RuntimeError(e);throw t}var vr="data:application/octet-stream;base64,";function _t(e){return e.startsWith(vr)}function Kt(e){return e.startsWith("file://")}function fe(e,t){return function(){var r=e,n=t;return n=s.asm,x(Ye,"native function `"+r+"` called before runtime initialization"),x(!0,"native function `"+r+"` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),n[e]||x(n[e],"exported native function `"+r+"` not found"),n[e].apply(null,arguments)}}var Be;Be="emscripten_compiled.wasm",_t(Be)||(Be=D(Be));function Xt(e){try{if(e==Be&&R)return new Uint8Array(R);if(le)return le(e);throw"both async and sync fetching of the wasm failed"}catch(t){ze(t)}}function wr(){return!R&&(b||p)&&typeof fetch=="function"?fetch(Be,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Be+"'";return e.arrayBuffer()}).catch(function(){return Xt(Be)}):Promise.resolve().then(function(){return Xt(Be)})}function Jt(){var e={env:Jr,wasi_snapshot_preview1:Jr};function t(d,v){var A=d.exports;s.asm=A,H=s.asm.memory,x(H,"memory not found in wasm exports"),ue(H.buffer),Ve=s.asm.__indirect_function_table,x(Ve,"table not found in wasm exports"),yr(s.asm.__wasm_call_ctors),xt("wasm-instantiate")}Rt("wasm-instantiate");var r=s;function n(d){x(s===r,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),r=null,t(d.instance)}function o(d){return wr().then(function(v){return WebAssembly.instantiate(v,e)}).then(function(v){return v}).then(d,function(v){J("failed to asynchronously prepare wasm: "+v),Kt(Be)&&J("warning: Loading from a file URI ("+Be+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing"),ze(v)})}function a(){return!R&&typeof WebAssembly.instantiateStreaming=="function"&&!_t(Be)&&typeof fetch=="function"?fetch(Be,{credentials:"same-origin"}).then(function(d){var v=WebAssembly.instantiateStreaming(d,e);return v.then(n,function(A){return J("wasm streaming compile failed: "+A),J("falling back to ArrayBuffer instantiation"),o(n)})}):o(n)}if(s.instantiateWasm)try{var l=s.instantiateWasm(e,t);return l}catch(d){return J("Module.instantiateWasm callback failed with error: "+d),!1}return a(),{}}var Re,$e;function Dt(e){for(;e.length>0;){var t=e.shift();if(typeof t=="function"){t(s);continue}var r=t.func;typeof r=="number"?t.arg===void 0?Xe(r)():Xe(r)(t.arg):r(t.arg===void 0?null:t.arg)}}function Tt(e){return O("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),e}function Zt(e){var t=/\b_Z[\w\d_]+/g;return e.replace(t,function(r){var n=Tt(r);return r===n?r:n+" ["+r+"]"})}function Xe(e){return Ve.get(e)}function br(e){if(e instanceof an||e=="unwind")return V;w(1,e)}function Qt(e,t){Ve.set(e,t)}function Er(e,t,r,n){ze("Assertion failed: "+Q(e)+", at: "+[t?Q(t):"unknown filename",r,n?Q(n):"unknown function"])}function Sr(e,t){Xe(e)(t)}var Ae={splitPath:function(e){var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:function(e,t){for(var r=0,n=e.length-1;n>=0;n--){var o=e[n];o==="."?e.splice(n,1):o===".."?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},normalize:function(e){var t=e.charAt(0)==="/",r=e.substr(-1)==="/";return e=Ae.normalizeArray(e.split("/").filter(function(n){return!!n}),!t).join("/"),!e&&!t&&(e="."),e&&r&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=Ae.splitPath(e),r=t[0],n=t[1];return!r&&!n?".":(n&&(n=n.substr(0,n.length-1)),r+n)},basename:function(e){if(e==="/")return"/";e=Ae.normalize(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},extname:function(e){return Ae.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return Ae.normalize(e.join("/"))},join2:function(e,t){return Ae.normalize(e+"/"+t)}};function kr(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}else return function(){ze("no cryptographic support found for randomDevice. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: function(array) { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")}}var rt={resolve:function(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:i.cwd();if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,t=n.charAt(0)==="/"}return e=Ae.normalizeArray(e.split("/").filter(function(o){return!!o}),!t).join("/"),(t?"/":"")+e||"."},relative:function(e,t){e=rt.resolve(e).substr(1),t=rt.resolve(t).substr(1);function r(A){for(var j=0;j<A.length&&A[j]==="";j++);for(var ne=A.length-1;ne>=0&&A[ne]==="";ne--);return j>ne?[]:A.slice(j,ne-j+1)}for(var n=r(e.split("/")),o=r(t.split("/")),a=Math.min(n.length,o.length),l=a,d=0;d<a;d++)if(n[d]!==o[d]){l=d;break}for(var v=[],d=l;d<n.length;d++)v.push("..");return v=v.concat(o.slice(l)),v.join("/")}},lt={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){lt.ttys[e]={input:[],output:[],ops:t},i.registerDevice(e,lt.stream_ops)},stream_ops:{open:function(e){var t=lt.ttys[e.node.rdev];if(!t)throw new i.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,r,n,o){if(!e.tty||!e.tty.ops.get_char)throw new i.ErrnoError(60);for(var a=0,l=0;l<n;l++){var d;try{d=e.tty.ops.get_char(e.tty)}catch{throw new i.ErrnoError(29)}if(d===void 0&&a===0)throw new i.ErrnoError(6);if(d==null)break;a++,t[r+l]=d}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,r,n,o){if(!e.tty||!e.tty.ops.put_char)throw new i.ErrnoError(60);try{for(var a=0;a<n;a++)e.tty.ops.put_char(e.tty,t[r+a])}catch{throw new i.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if(typeof window<"u"&&typeof window.prompt=="function"?(t=window.prompt("Input: "),t!==null&&(t+=`
`)):typeof readline=="function"&&(t=readline(),t!==null&&(t+=`
`)),!t)return null;e.input=qt(t,!0)}return e.input.shift()},put_char:function(e,t){t===null||t===10?(ee(G(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(ee(G(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){t===null||t===10?(J(G(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(J(G(e.output,0)),e.output=[])}}};function er(e,t){Ke.fill(0,e,e+t)}function xr(e){ze("internal error: mmapAlloc called but `emscripten_builtin_memalign` native symbol not exported")}var me={ops_table:null,mount:function(e){return me.createNode(null,"/",16895,0)},createNode:function(e,t,r,n){if(i.isBlkdev(r)||i.isFIFO(r))throw new i.ErrnoError(63);me.ops_table||(me.ops_table={dir:{node:{getattr:me.node_ops.getattr,setattr:me.node_ops.setattr,lookup:me.node_ops.lookup,mknod:me.node_ops.mknod,rename:me.node_ops.rename,unlink:me.node_ops.unlink,rmdir:me.node_ops.rmdir,readdir:me.node_ops.readdir,symlink:me.node_ops.symlink},stream:{llseek:me.stream_ops.llseek}},file:{node:{getattr:me.node_ops.getattr,setattr:me.node_ops.setattr},stream:{llseek:me.stream_ops.llseek,read:me.stream_ops.read,write:me.stream_ops.write,allocate:me.stream_ops.allocate,mmap:me.stream_ops.mmap,msync:me.stream_ops.msync}},link:{node:{getattr:me.node_ops.getattr,setattr:me.node_ops.setattr,readlink:me.node_ops.readlink},stream:{}},chrdev:{node:{getattr:me.node_ops.getattr,setattr:me.node_ops.setattr},stream:i.chrdev_stream_ops}});var o=i.createNode(e,t,r,n);return i.isDir(o.mode)?(o.node_ops=me.ops_table.dir.node,o.stream_ops=me.ops_table.dir.stream,o.contents={}):i.isFile(o.mode)?(o.node_ops=me.ops_table.file.node,o.stream_ops=me.ops_table.file.stream,o.usedBytes=0,o.contents=null):i.isLink(o.mode)?(o.node_ops=me.ops_table.link.node,o.stream_ops=me.ops_table.link.stream):i.isChrdev(o.mode)&&(o.node_ops=me.ops_table.chrdev.node,o.stream_ops=me.ops_table.chrdev.stream),o.timestamp=Date.now(),e&&(e.contents[t]=o,e.timestamp=o.timestamp),o},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var r=e.contents?e.contents.length:0;if(!(r>=t)){var n=1024*1024;t=Math.max(t,r*(r<n?2:1.125)>>>0),r!=0&&(t=Math.max(t,256));var o=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(o.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t)if(t==0)e.contents=null,e.usedBytes=0;else{var r=e.contents;e.contents=new Uint8Array(t),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=i.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,i.isDir(e.mode)?t.size=4096:i.isFile(e.mode)?t.size=e.usedBytes:i.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&me.resizeFileStorage(e,t.size)},lookup:function(e,t){throw i.genericErrors[44]},mknod:function(e,t,r,n){return me.createNode(e,t,r,n)},rename:function(e,t,r){if(i.isDir(e.mode)){var n;try{n=i.lookupNode(t,r)}catch{}if(n)for(var o in n.contents)throw new i.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=r,t.contents[r]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var r=i.lookupNode(e,t);for(var n in r.contents)throw new i.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var r in e.contents)e.contents.hasOwnProperty(r)&&t.push(r);return t},symlink:function(e,t,r){var n=me.createNode(e,t,41471,0);return n.link=r,n},readlink:function(e){if(!i.isLink(e.mode))throw new i.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,r,n,o){var a=e.node.contents;if(o>=e.node.usedBytes)return 0;var l=Math.min(e.node.usedBytes-o,n);if(x(l>=0),l>8&&a.subarray)t.set(a.subarray(o,o+l),r);else for(var d=0;d<l;d++)t[r+d]=a[o+d];return l},write:function(e,t,r,n,o,a){if(x(!(t instanceof ArrayBuffer)),t.buffer===Ce.buffer&&(a=!1),!n)return 0;var l=e.node;if(l.timestamp=Date.now(),t.subarray&&(!l.contents||l.contents.subarray)){if(a)return x(o===0,"canOwn must imply no weird position inside the file"),l.contents=t.subarray(r,r+n),l.usedBytes=n,n;if(l.usedBytes===0&&o===0)return l.contents=t.slice(r,r+n),l.usedBytes=n,n;if(o+n<=l.usedBytes)return l.contents.set(t.subarray(r,r+n),o),n}if(me.expandFileStorage(l,o+n),l.contents.subarray&&t.subarray)l.contents.set(t.subarray(r,r+n),o);else for(var d=0;d<n;d++)l.contents[o+d]=t[r+d];return l.usedBytes=Math.max(l.usedBytes,o+n),n},llseek:function(e,t,r){var n=t;if(r===1?n+=e.position:r===2&&i.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new i.ErrnoError(28);return n},allocate:function(e,t,r){me.expandFileStorage(e.node,t+r),e.node.usedBytes=Math.max(e.node.usedBytes,t+r)},mmap:function(e,t,r,n,o,a){if(t!==0)throw new i.ErrnoError(28);if(!i.isFile(e.node.mode))throw new i.ErrnoError(43);var l,d,v=e.node.contents;if(!(a&2)&&v.buffer===qe)d=!1,l=v.byteOffset;else{if((n>0||n+r<v.length)&&(v.subarray?v=v.subarray(n,n+r):v=Array.prototype.slice.call(v,n,n+r)),d=!0,l=xr(),!l)throw new i.ErrnoError(48);Ce.set(v,l)}return{ptr:l,allocated:d}},msync:function(e,t,r,n,o){if(!i.isFile(e.node.mode))throw new i.ErrnoError(43);return o&2||me.stream_ops.write(e,t,0,n,r,!1),0}}};function Tr(e,t,r,n){var o=Yt("al "+e);re(e,function(a){x(a,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(a)),o&&xt(o)},function(a){if(r)r();else throw'Loading data file "'+e+'" failed.'}),o&&Rt(o)}var Ar={0:"Success",1:"Arg list too long",2:"Permission denied",3:"Address already in use",4:"Address not available",5:"Address family not supported by protocol family",6:"No more processes",7:"Socket already connected",8:"Bad file number",9:"Trying to read unreadable message",10:"Mount device busy",11:"Operation canceled",12:"No children",13:"Connection aborted",14:"Connection refused",15:"Connection reset by peer",16:"File locking deadlock error",17:"Destination address required",18:"Math arg out of domain of func",19:"Quota exceeded",20:"File exists",21:"Bad address",22:"File too large",23:"Host is unreachable",24:"Identifier removed",25:"Illegal byte sequence",26:"Connection already in progress",27:"Interrupted system call",28:"Invalid argument",29:"I/O error",30:"Socket is already connected",31:"Is a directory",32:"Too many symbolic links",33:"Too many open files",34:"Too many links",35:"Message too long",36:"Multihop attempted",37:"File or path name too long",38:"Network interface is not configured",39:"Connection reset by network",40:"Network is unreachable",41:"Too many open files in system",42:"No buffer space available",43:"No such device",44:"No such file or directory",45:"Exec format error",46:"No record locks available",47:"The link has been severed",48:"Not enough core",49:"No message of desired type",50:"Protocol not available",51:"No space left on device",52:"Function not implemented",53:"Socket is not connected",54:"Not a directory",55:"Directory not empty",56:"State not recoverable",57:"Socket operation on non-socket",59:"Not a typewriter",60:"No such device or address",61:"Value too large for defined data type",62:"Previous owner died",63:"Not super-user",64:"Broken pipe",65:"Protocol error",66:"Unknown protocol",67:"Protocol wrong type for socket",68:"Math result not representable",69:"Read only file system",70:"Illegal seek",71:"No such process",72:"Stale file handle",73:"Connection timed out",74:"Text file busy",75:"Cross-device link",100:"Device not a stream",101:"Bad font file fmt",102:"Invalid slot",103:"Invalid request code",104:"No anode",105:"Block device required",106:"Channel number out of range",107:"Level 3 halted",108:"Level 3 reset",109:"Link number out of range",110:"Protocol driver not attached",111:"No CSI structure available",112:"Level 2 halted",113:"Invalid exchange",114:"Invalid request descriptor",115:"Exchange full",116:"No data (for no delay io)",117:"Timer expired",118:"Out of streams resources",119:"Machine is not on the network",120:"Package not installed",121:"The object is remote",122:"Advertise error",123:"Srmount error",124:"Communication error on send",125:"Cross mount point (not really error)",126:"Given log. name not unique",127:"f.d. invalid for this operation",128:"Remote address changed",129:"Can   access a needed shared lib",130:"Accessing a corrupted shared lib",131:".lib section in a.out corrupted",132:"Attempting to link in too many libs",133:"Attempting to exec a shared library",135:"Streams pipe error",136:"Too many users",137:"Socket type not supported",138:"Not supported",139:"Protocol family not supported",140:"Can't send after socket shutdown",141:"Too many references",142:"Host is down",148:"No medium (in tape drive)",156:"Level 2 not synchronized"},mt={},i={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,t={})=>{if(e=rt.resolve(i.cwd(),e),!e)return{path:"",node:null};var r={follow_mount:!0,recurse_count:0};for(var n in r)t[n]===void 0&&(t[n]=r[n]);if(t.recurse_count>8)throw new i.ErrnoError(32);for(var o=Ae.normalizeArray(e.split("/").filter(N=>!!N),!1),a=i.root,l="/",d=0;d<o.length;d++){var v=d===o.length-1;if(v&&t.parent)break;if(a=i.lookupNode(a,o[d]),l=Ae.join2(l,o[d]),i.isMountpoint(a)&&(!v||v&&t.follow_mount)&&(a=a.mounted.root),!v||t.follow)for(var A=0;i.isLink(a.mode);){var j=i.readlink(l);l=rt.resolve(Ae.dirname(l),j);var ne=i.lookupPath(l,{recurse_count:t.recurse_count});if(a=ne.node,A++>40)throw new i.ErrnoError(32)}}return{path:l,node:a}},getPath:e=>{for(var t;;){if(i.isRoot(e)){var r=e.mount.mountpoint;return t?r[r.length-1]!=="/"?r+"/"+t:r+t:r}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:(e,t)=>{for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%i.nameTable.length},hashAddNode:e=>{var t=i.hashName(e.parent.id,e.name);e.name_next=i.nameTable[t],i.nameTable[t]=e},hashRemoveNode:e=>{var t=i.hashName(e.parent.id,e.name);if(i.nameTable[t]===e)i.nameTable[t]=e.name_next;else for(var r=i.nameTable[t];r;){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}},lookupNode:(e,t)=>{var r=i.mayLookup(e);if(r)throw new i.ErrnoError(r,e);for(var n=i.hashName(e.id,t),o=i.nameTable[n];o;o=o.name_next){var a=o.name;if(o.parent.id===e.id&&a===t)return o}return i.lookup(e,t)},createNode:(e,t,r,n)=>{x(typeof e=="object");var o=new i.FSNode(e,t,r,n);return i.hashAddNode(o),o},destroyNode:e=>{i.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>(e&61440)===32768,isDir:e=>(e&61440)===16384,isLink:e=>(e&61440)===40960,isChrdev:e=>(e&61440)===8192,isBlkdev:e=>(e&61440)===24576,isFIFO:e=>(e&61440)===4096,isSocket:e=>(e&49152)===49152,flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:e=>{var t=i.flagModes[e];if(typeof t>"u")throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:e=>{var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nodePermissions:(e,t)=>i.ignorePermissions?0:t.includes("r")&&!(e.mode&292)||t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73)?2:0,mayLookup:e=>{var t=i.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate:(e,t)=>{try{var r=i.lookupNode(e,t);return 20}catch{}return i.nodePermissions(e,"wx")},mayDelete:(e,t,r)=>{var n;try{n=i.lookupNode(e,t)}catch(a){return a.errno}var o=i.nodePermissions(e,"wx");if(o)return o;if(r){if(!i.isDir(n.mode))return 54;if(i.isRoot(n)||i.getPath(n)===i.cwd())return 10}else if(i.isDir(n.mode))return 31;return 0},mayOpen:(e,t)=>e?i.isLink(e.mode)?32:i.isDir(e.mode)&&(i.flagsToPermissionString(t)!=="r"||t&512)?31:i.nodePermissions(e,i.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd:(e=0,t=i.MAX_OPEN_FDS)=>{for(var r=e;r<=t;r++)if(!i.streams[r])return r;throw new i.ErrnoError(33)},getStream:e=>i.streams[e],createStream:(e,t,r)=>{i.FSStream||(i.FSStream=function(){},i.FSStream.prototype={object:{get:function(){return this.node},set:function(o){this.node=o}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}}),e=Object.assign(new i.FSStream,e);var n=i.nextfd(t,r);return e.fd=n,i.streams[n]=e,e},closeStream:e=>{i.streams[e]=null},chrdev_stream_ops:{open:e=>{var t=i.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new i.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice:(e,t)=>{i.devices[e]={stream_ops:t}},getDevice:e=>i.devices[e],getMounts:e=>{for(var t=[],r=[e];r.length;){var n=r.pop();t.push(n),r.push.apply(r,n.mounts)}return t},syncfs:(e,t)=>{typeof e=="function"&&(t=e,e=!1),i.syncFSRequests++,i.syncFSRequests>1&&J("warning: "+i.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var r=i.getMounts(i.root.mount),n=0;function o(l){return x(i.syncFSRequests>0),i.syncFSRequests--,t(l)}function a(l){if(l)return a.errored?void 0:(a.errored=!0,o(l));++n>=r.length&&o(null)}r.forEach(l=>{if(!l.type.syncfs)return a(null);l.type.syncfs(l,e,a)})},mount:(e,t,r)=>{if(typeof e=="string")throw e;var n=r==="/",o=!r,a;if(n&&i.root)throw new i.ErrnoError(10);if(!n&&!o){var l=i.lookupPath(r,{follow_mount:!1});if(r=l.path,a=l.node,i.isMountpoint(a))throw new i.ErrnoError(10);if(!i.isDir(a.mode))throw new i.ErrnoError(54)}var d={type:e,opts:t,mountpoint:r,mounts:[]},v=e.mount(d);return v.mount=d,d.root=v,n?i.root=v:a&&(a.mounted=d,a.mount&&a.mount.mounts.push(d)),v},unmount:e=>{var t=i.lookupPath(e,{follow_mount:!1});if(!i.isMountpoint(t.node))throw new i.ErrnoError(28);var r=t.node,n=r.mounted,o=i.getMounts(n);Object.keys(i.nameTable).forEach(l=>{for(var d=i.nameTable[l];d;){var v=d.name_next;o.includes(d.mount)&&i.destroyNode(d),d=v}}),r.mounted=null;var a=r.mount.mounts.indexOf(n);x(a!==-1),r.mount.mounts.splice(a,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod:(e,t,r)=>{var n=i.lookupPath(e,{parent:!0}),o=n.node,a=Ae.basename(e);if(!a||a==="."||a==="..")throw new i.ErrnoError(28);var l=i.mayCreate(o,a);if(l)throw new i.ErrnoError(l);if(!o.node_ops.mknod)throw new i.ErrnoError(63);return o.node_ops.mknod(o,a,t,r)},create:(e,t)=>(t=t!==void 0?t:438,t&=4095,t|=32768,i.mknod(e,t,0)),mkdir:(e,t)=>(t=t!==void 0?t:511,t&=1023,t|=16384,i.mknod(e,t,0)),mkdirTree:(e,t)=>{for(var r=e.split("/"),n="",o=0;o<r.length;++o)if(r[o]){n+="/"+r[o];try{i.mkdir(n,t)}catch(a){if(a.errno!=20)throw a}}},mkdev:(e,t,r)=>(typeof r>"u"&&(r=t,t=438),t|=8192,i.mknod(e,t,r)),symlink:(e,t)=>{if(!rt.resolve(e))throw new i.ErrnoError(44);var r=i.lookupPath(t,{parent:!0}),n=r.node;if(!n)throw new i.ErrnoError(44);var o=Ae.basename(t),a=i.mayCreate(n,o);if(a)throw new i.ErrnoError(a);if(!n.node_ops.symlink)throw new i.ErrnoError(63);return n.node_ops.symlink(n,o,e)},rename:(e,t)=>{var r=Ae.dirname(e),n=Ae.dirname(t),o=Ae.basename(e),a=Ae.basename(t),l,d,v;if(l=i.lookupPath(e,{parent:!0}),d=l.node,l=i.lookupPath(t,{parent:!0}),v=l.node,!d||!v)throw new i.ErrnoError(44);if(d.mount!==v.mount)throw new i.ErrnoError(75);var A=i.lookupNode(d,o),j=rt.relative(e,n);if(j.charAt(0)!==".")throw new i.ErrnoError(28);if(j=rt.relative(t,r),j.charAt(0)!==".")throw new i.ErrnoError(55);var ne;try{ne=i.lookupNode(v,a)}catch{}if(A!==ne){var N=i.isDir(A.mode),Y=i.mayDelete(d,o,N);if(Y)throw new i.ErrnoError(Y);if(Y=ne?i.mayDelete(v,a,N):i.mayCreate(v,a),Y)throw new i.ErrnoError(Y);if(!d.node_ops.rename)throw new i.ErrnoError(63);if(i.isMountpoint(A)||ne&&i.isMountpoint(ne))throw new i.ErrnoError(10);if(v!==d&&(Y=i.nodePermissions(d,"w"),Y))throw new i.ErrnoError(Y);i.hashRemoveNode(A);try{d.node_ops.rename(A,v,a)}catch(ve){throw ve}finally{i.hashAddNode(A)}}},rmdir:e=>{var t=i.lookupPath(e,{parent:!0}),r=t.node,n=Ae.basename(e),o=i.lookupNode(r,n),a=i.mayDelete(r,n,!0);if(a)throw new i.ErrnoError(a);if(!r.node_ops.rmdir)throw new i.ErrnoError(63);if(i.isMountpoint(o))throw new i.ErrnoError(10);r.node_ops.rmdir(r,n),i.destroyNode(o)},readdir:e=>{var t=i.lookupPath(e,{follow:!0}),r=t.node;if(!r.node_ops.readdir)throw new i.ErrnoError(54);return r.node_ops.readdir(r)},unlink:e=>{var t=i.lookupPath(e,{parent:!0}),r=t.node;if(!r)throw new i.ErrnoError(44);var n=Ae.basename(e),o=i.lookupNode(r,n),a=i.mayDelete(r,n,!1);if(a)throw new i.ErrnoError(a);if(!r.node_ops.unlink)throw new i.ErrnoError(63);if(i.isMountpoint(o))throw new i.ErrnoError(10);r.node_ops.unlink(r,n),i.destroyNode(o)},readlink:e=>{var t=i.lookupPath(e),r=t.node;if(!r)throw new i.ErrnoError(44);if(!r.node_ops.readlink)throw new i.ErrnoError(28);return rt.resolve(i.getPath(r.parent),r.node_ops.readlink(r))},stat:(e,t)=>{var r=i.lookupPath(e,{follow:!t}),n=r.node;if(!n)throw new i.ErrnoError(44);if(!n.node_ops.getattr)throw new i.ErrnoError(63);return n.node_ops.getattr(n)},lstat:e=>i.stat(e,!0),chmod:(e,t,r)=>{var n;if(typeof e=="string"){var o=i.lookupPath(e,{follow:!r});n=o.node}else n=e;if(!n.node_ops.setattr)throw new i.ErrnoError(63);n.node_ops.setattr(n,{mode:t&4095|n.mode&-4096,timestamp:Date.now()})},lchmod:(e,t)=>{i.chmod(e,t,!0)},fchmod:(e,t)=>{var r=i.getStream(e);if(!r)throw new i.ErrnoError(8);i.chmod(r.node,t)},chown:(e,t,r,n)=>{var o;if(typeof e=="string"){var a=i.lookupPath(e,{follow:!n});o=a.node}else o=e;if(!o.node_ops.setattr)throw new i.ErrnoError(63);o.node_ops.setattr(o,{timestamp:Date.now()})},lchown:(e,t,r)=>{i.chown(e,t,r,!0)},fchown:(e,t,r)=>{var n=i.getStream(e);if(!n)throw new i.ErrnoError(8);i.chown(n.node,t,r)},truncate:(e,t)=>{if(t<0)throw new i.ErrnoError(28);var r;if(typeof e=="string"){var n=i.lookupPath(e,{follow:!0});r=n.node}else r=e;if(!r.node_ops.setattr)throw new i.ErrnoError(63);if(i.isDir(r.mode))throw new i.ErrnoError(31);if(!i.isFile(r.mode))throw new i.ErrnoError(28);var o=i.nodePermissions(r,"w");if(o)throw new i.ErrnoError(o);r.node_ops.setattr(r,{size:t,timestamp:Date.now()})},ftruncate:(e,t)=>{var r=i.getStream(e);if(!r)throw new i.ErrnoError(8);if(!(r.flags&2097155))throw new i.ErrnoError(28);i.truncate(r.node,t)},utime:(e,t,r)=>{var n=i.lookupPath(e,{follow:!0}),o=n.node;o.node_ops.setattr(o,{timestamp:Math.max(t,r)})},open:(e,t,r,n,o)=>{if(e==="")throw new i.ErrnoError(44);t=typeof t=="string"?i.modeStringToFlags(t):t,r=typeof r>"u"?438:r,t&64?r=r&4095|32768:r=0;var a;if(typeof e=="object")a=e;else{e=Ae.normalize(e);try{var l=i.lookupPath(e,{follow:!(t&131072)});a=l.node}catch{}}var d=!1;if(t&64)if(a){if(t&128)throw new i.ErrnoError(20)}else a=i.mknod(e,r,0),d=!0;if(!a)throw new i.ErrnoError(44);if(i.isChrdev(a.mode)&&(t&=-513),t&65536&&!i.isDir(a.mode))throw new i.ErrnoError(54);if(!d){var v=i.mayOpen(a,t);if(v)throw new i.ErrnoError(v)}t&512&&i.truncate(a,0),t&=-131713;var A=i.createStream({node:a,path:i.getPath(a),flags:t,seekable:!0,position:0,stream_ops:a.stream_ops,ungotten:[],error:!1},n,o);return A.stream_ops.open&&A.stream_ops.open(A),s.logReadFiles&&!(t&1)&&(i.readFiles||(i.readFiles={}),e in i.readFiles||(i.readFiles[e]=1)),A},close:e=>{if(i.isClosed(e))throw new i.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{i.closeStream(e.fd)}e.fd=null},isClosed:e=>e.fd===null,llseek:(e,t,r)=>{if(i.isClosed(e))throw new i.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new i.ErrnoError(70);if(r!=0&&r!=1&&r!=2)throw new i.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read:(e,t,r,n,o)=>{if(n<0||o<0)throw new i.ErrnoError(28);if(i.isClosed(e))throw new i.ErrnoError(8);if((e.flags&2097155)===1)throw new i.ErrnoError(8);if(i.isDir(e.node.mode))throw new i.ErrnoError(31);if(!e.stream_ops.read)throw new i.ErrnoError(28);var a=typeof o<"u";if(!a)o=e.position;else if(!e.seekable)throw new i.ErrnoError(70);var l=e.stream_ops.read(e,t,r,n,o);return a||(e.position+=l),l},write:(e,t,r,n,o,a)=>{if(n<0||o<0)throw new i.ErrnoError(28);if(i.isClosed(e))throw new i.ErrnoError(8);if(!(e.flags&2097155))throw new i.ErrnoError(8);if(i.isDir(e.node.mode))throw new i.ErrnoError(31);if(!e.stream_ops.write)throw new i.ErrnoError(28);e.seekable&&e.flags&1024&&i.llseek(e,0,2);var l=typeof o<"u";if(!l)o=e.position;else if(!e.seekable)throw new i.ErrnoError(70);var d=e.stream_ops.write(e,t,r,n,o,a);return l||(e.position+=d),d},allocate:(e,t,r)=>{if(i.isClosed(e))throw new i.ErrnoError(8);if(t<0||r<=0)throw new i.ErrnoError(28);if(!(e.flags&2097155))throw new i.ErrnoError(8);if(!i.isFile(e.node.mode)&&!i.isDir(e.node.mode))throw new i.ErrnoError(43);if(!e.stream_ops.allocate)throw new i.ErrnoError(138);e.stream_ops.allocate(e,t,r)},mmap:(e,t,r,n,o,a)=>{if(o&2&&!(a&2)&&(e.flags&2097155)!==2)throw new i.ErrnoError(2);if((e.flags&2097155)===1)throw new i.ErrnoError(2);if(!e.stream_ops.mmap)throw new i.ErrnoError(43);return e.stream_ops.mmap(e,t,r,n,o,a)},msync:(e,t,r,n,o)=>!e||!e.stream_ops.msync?0:e.stream_ops.msync(e,t,r,n,o),munmap:e=>0,ioctl:(e,t,r)=>{if(!e.stream_ops.ioctl)throw new i.ErrnoError(59);return e.stream_ops.ioctl(e,t,r)},readFile:(e,t={})=>{if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error('Invalid encoding type "'+t.encoding+'"');var r,n=i.open(e,t.flags),o=i.stat(e),a=o.size,l=new Uint8Array(a);return i.read(n,l,0,a,0),t.encoding==="utf8"?r=G(l,0):t.encoding==="binary"&&(r=l),i.close(n),r},writeFile:(e,t,r={})=>{r.flags=r.flags||577;var n=i.open(e,r.flags,r.mode);if(typeof t=="string"){var o=new Uint8Array(De(t)+1),a=oe(t,o,0,o.length);i.write(n,o,0,a,void 0,r.canOwn)}else if(ArrayBuffer.isView(t))i.write(n,t,0,t.byteLength,void 0,r.canOwn);else throw new Error("Unsupported data type");i.close(n)},cwd:()=>i.currentPath,chdir:e=>{var t=i.lookupPath(e,{follow:!0});if(t.node===null)throw new i.ErrnoError(44);if(!i.isDir(t.node.mode))throw new i.ErrnoError(54);var r=i.nodePermissions(t.node,"x");if(r)throw new i.ErrnoError(r);i.currentPath=t.path},createDefaultDirectories:()=>{i.mkdir("/tmp"),i.mkdir("/home"),i.mkdir("/home/web_user")},createDefaultDevices:()=>{i.mkdir("/dev"),i.registerDevice(i.makedev(1,3),{read:()=>0,write:(t,r,n,o,a)=>o}),i.mkdev("/dev/null",i.makedev(1,3)),lt.register(i.makedev(5,0),lt.default_tty_ops),lt.register(i.makedev(6,0),lt.default_tty1_ops),i.mkdev("/dev/tty",i.makedev(5,0)),i.mkdev("/dev/tty1",i.makedev(6,0));var e=kr();i.createDevice("/dev","random",e),i.createDevice("/dev","urandom",e),i.mkdir("/dev/shm"),i.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{i.mkdir("/proc");var e=i.mkdir("/proc/self");i.mkdir("/proc/self/fd"),i.mount({mount:()=>{var t=i.createNode(e,"fd",16895,73);return t.node_ops={lookup:(r,n)=>{var o=+n,a=i.getStream(o);if(!a)throw new i.ErrnoError(8);var l={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>a.path}};return l.parent=l,l}},t}},{},"/proc/self/fd")},createStandardStreams:()=>{s.stdin?i.createDevice("/dev","stdin",s.stdin):i.symlink("/dev/tty","/dev/stdin"),s.stdout?i.createDevice("/dev","stdout",null,s.stdout):i.symlink("/dev/tty","/dev/stdout"),s.stderr?i.createDevice("/dev","stderr",null,s.stderr):i.symlink("/dev/tty1","/dev/stderr");var e=i.open("/dev/stdin",0),t=i.open("/dev/stdout",1),r=i.open("/dev/stderr",1);x(e.fd===0,"invalid handle for stdin ("+e.fd+")"),x(t.fd===1,"invalid handle for stdout ("+t.fd+")"),x(r.fd===2,"invalid handle for stderr ("+r.fd+")")},ensureErrnoError:()=>{i.ErrnoError||(i.ErrnoError=function(t,r){this.node=r,this.setErrno=function(n){this.errno=n;for(var o in mt)if(mt[o]===n){this.code=o;break}},this.setErrno(t),this.message=Ar[t],this.stack&&(Object.defineProperty(this,"stack",{value:new Error().stack,writable:!0}),this.stack=Zt(this.stack))},i.ErrnoError.prototype=new Error,i.ErrnoError.prototype.constructor=i.ErrnoError,[44].forEach(e=>{i.genericErrors[e]=new i.ErrnoError(e),i.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:()=>{i.ensureErrnoError(),i.nameTable=new Array(4096),i.mount(me,{},"/"),i.createDefaultDirectories(),i.createDefaultDevices(),i.createSpecialDirectories(),i.filesystems={MEMFS:me}},init:(e,t,r)=>{x(!i.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),i.init.initialized=!0,i.ensureErrnoError(),s.stdin=e||s.stdin,s.stdout=t||s.stdout,s.stderr=r||s.stderr,i.createStandardStreams()},quit:()=>{i.init.initialized=!1,fi();for(var e=0;e<i.streams.length;e++){var t=i.streams[e];t&&i.close(t)}},getMode:(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},findObject:(e,t)=>{var r=i.analyzePath(e,t);return r.exists?r.object:null},analyzePath:(e,t)=>{try{var r=i.lookupPath(e,{follow:!t});e=r.path}catch{}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=i.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=Ae.basename(e),r=i.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot=r.path==="/"}catch(o){n.error=o.errno}return n},createPath:(e,t,r,n)=>{e=typeof e=="string"?e:i.getPath(e);for(var o=t.split("/").reverse();o.length;){var a=o.pop();if(a){var l=Ae.join2(e,a);try{i.mkdir(l)}catch{}e=l}}return l},createFile:(e,t,r,n,o)=>{var a=Ae.join2(typeof e=="string"?e:i.getPath(e),t),l=i.getMode(n,o);return i.create(a,l)},createDataFile:(e,t,r,n,o,a)=>{var l=t;e&&(e=typeof e=="string"?e:i.getPath(e),l=t?Ae.join2(e,t):e);var d=i.getMode(n,o),v=i.create(l,d);if(r){if(typeof r=="string"){for(var A=new Array(r.length),j=0,ne=r.length;j<ne;++j)A[j]=r.charCodeAt(j);r=A}i.chmod(v,d|146);var N=i.open(v,577);i.write(N,r,0,r.length,0,a),i.close(N),i.chmod(v,d)}return v},createDevice:(e,t,r,n)=>{var o=Ae.join2(typeof e=="string"?e:i.getPath(e),t),a=i.getMode(!!r,!!n);i.createDevice.major||(i.createDevice.major=64);var l=i.makedev(i.createDevice.major++,0);return i.registerDevice(l,{open:d=>{d.seekable=!1},close:d=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(d,v,A,j,ne)=>{for(var N=0,Y=0;Y<j;Y++){var ve;try{ve=r()}catch{throw new i.ErrnoError(29)}if(ve===void 0&&N===0)throw new i.ErrnoError(6);if(ve==null)break;N++,v[A+Y]=ve}return N&&(d.node.timestamp=Date.now()),N},write:(d,v,A,j,ne)=>{for(var N=0;N<j;N++)try{n(v[A+N])}catch{throw new i.ErrnoError(29)}return j&&(d.node.timestamp=Date.now()),N}}),i.mkdev(o,a,l)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(te)try{e.contents=qt(te(e.url),!0),e.usedBytes=e.contents.length}catch{throw new i.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(e,t,r,n,o)=>{function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(N){if(!(N>this.length-1||N<0)){var Y=N%this.chunkSize,ve=N/this.chunkSize|0;return this.getter(ve)[Y]}},a.prototype.setDataGetter=function(N){this.getter=N},a.prototype.cacheLength=function(){var N=new XMLHttpRequest;if(N.open("HEAD",r,!1),N.send(null),!(N.status>=200&&N.status<300||N.status===304))throw new Error("Couldn't load "+r+". Status: "+N.status);var Y=Number(N.getResponseHeader("Content-length")),ve,Oe=(ve=N.getResponseHeader("Accept-Ranges"))&&ve==="bytes",je=(ve=N.getResponseHeader("Content-Encoding"))&&ve==="gzip",We=1024*1024;Oe||(We=Y);var C=(_e,he)=>{if(_e>he)throw new Error("invalid range ("+_e+", "+he+") or no bytes requested!");if(he>Y-1)throw new Error("only "+Y+" bytes available! programmer error!");var Ee=new XMLHttpRequest;if(Ee.open("GET",r,!1),Y!==We&&Ee.setRequestHeader("Range","bytes="+_e+"-"+he),Ee.responseType="arraybuffer",Ee.overrideMimeType&&Ee.overrideMimeType("text/plain; charset=x-user-defined"),Ee.send(null),!(Ee.status>=200&&Ee.status<300||Ee.status===304))throw new Error("Couldn't load "+r+". Status: "+Ee.status);return Ee.response!==void 0?new Uint8Array(Ee.response||[]):qt(Ee.responseText||"",!0)},ce=this;ce.setDataGetter(_e=>{var he=_e*We,Ee=(_e+1)*We-1;if(Ee=Math.min(Ee,Y-1),typeof ce.chunks[_e]>"u"&&(ce.chunks[_e]=C(he,Ee)),typeof ce.chunks[_e]>"u")throw new Error("doXHR failed!");return ce.chunks[_e]}),(je||!Y)&&(We=Y=1,Y=this.getter(0).length,We=Y,ee("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=Y,this._chunkSize=We,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!p)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var l=new a;Object.defineProperties(l,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var d={isDevice:!1,contents:l}}else var d={isDevice:!1,url:r};var v=i.createFile(e,t,d,n,o);d.contents?v.contents=d.contents:d.url&&(v.contents=null,v.url=d.url),Object.defineProperties(v,{usedBytes:{get:function(){return this.contents.length}}});var A={},j=Object.keys(v.stream_ops);return j.forEach(ne=>{var N=v.stream_ops[ne];A[ne]=function(){return i.forceLoadFile(v),N.apply(null,arguments)}}),A.read=(ne,N,Y,ve,Oe)=>{i.forceLoadFile(v);var je=ne.node.contents;if(Oe>=je.length)return 0;var We=Math.min(je.length-Oe,ve);if(x(We>=0),je.slice)for(var C=0;C<We;C++)N[Y+C]=je[Oe+C];else for(var C=0;C<We;C++)N[Y+C]=je.get(Oe+C);return We},v.stream_ops=A,v},createPreloadedFile:(e,t,r,n,o,a,l,d,v,A)=>{var j=t?rt.resolve(Ae.join2(e,t)):e,ne=Yt("cp "+j);function N(Y){function ve(Oe){A&&A(),d||i.createDataFile(e,t,Oe,n,o,v),a&&a(),xt(ne)}Browser.handledByPreloadPlugin(Y,j,ve,()=>{l&&l(),xt(ne)})||ve(Y)}Rt(ne),typeof r=="string"?Tr(r,Y=>N(Y),l):N(r)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(e,t,r)=>{t=t||(()=>{}),r=r||(()=>{});var n=i.indexedDB();try{var o=n.open(i.DB_NAME(),i.DB_VERSION)}catch(a){return r(a)}o.onupgradeneeded=()=>{ee("creating db");var a=o.result;a.createObjectStore(i.DB_STORE_NAME)},o.onsuccess=()=>{var a=o.result,l=a.transaction([i.DB_STORE_NAME],"readwrite"),d=l.objectStore(i.DB_STORE_NAME),v=0,A=0,j=e.length;function ne(){A==0?t():r()}e.forEach(N=>{var Y=d.put(i.analyzePath(N).object.contents,N);Y.onsuccess=()=>{v++,v+A==j&&ne()},Y.onerror=()=>{A++,v+A==j&&ne()}}),l.onerror=r},o.onerror=r},loadFilesFromDB:(e,t,r)=>{t=t||(()=>{}),r=r||(()=>{});var n=i.indexedDB();try{var o=n.open(i.DB_NAME(),i.DB_VERSION)}catch(a){return r(a)}o.onupgradeneeded=r,o.onsuccess=()=>{var a=o.result;try{var l=a.transaction([i.DB_STORE_NAME],"readonly")}catch(N){r(N);return}var d=l.objectStore(i.DB_STORE_NAME),v=0,A=0,j=e.length;function ne(){A==0?t():r()}e.forEach(N=>{var Y=d.get(N);Y.onsuccess=()=>{i.analyzePath(N).exists&&i.unlink(N),i.createDataFile(Ae.dirname(N),Ae.basename(N),Y.result,!0,!0,!0),v++,v+A==j&&ne()},Y.onerror=()=>{A++,v+A==j&&ne()}}),l.onerror=r},o.onerror=r},absolutePath:()=>{ze("FS.absolutePath has been removed; use PATH_FS.resolve instead")},createFolder:()=>{ze("FS.createFolder has been removed; use FS.mkdir instead")},createLink:()=>{ze("FS.createLink has been removed; use FS.symlink instead")},joinPath:()=>{ze("FS.joinPath has been removed; use PATH.join instead")},mmapAlloc:()=>{ze("FS.mmapAlloc has been replaced by the top level function mmapAlloc")},standardizePath:()=>{ze("FS.standardizePath has been removed; use PATH.normalize instead")}},ye={DEFAULT_POLLMASK:5,calculateAt:function(e,t,r){if(t[0]==="/")return t;var n;if(e===-100)n=i.cwd();else{var o=i.getStream(e);if(!o)throw new i.ErrnoError(8);n=o.path}if(t.length==0){if(!r)throw new i.ErrnoError(44);return n}return Ae.join2(n,t)},doStat:function(e,t,r){try{var n=e(t)}catch(o){if(o&&o.node&&Ae.normalize(t)!==Ae.normalize(i.getPath(o.node)))return-54;throw o}return f[r>>2]=n.dev,f[r+4>>2]=0,f[r+8>>2]=n.ino,f[r+12>>2]=n.mode,f[r+16>>2]=n.nlink,f[r+20>>2]=n.uid,f[r+24>>2]=n.gid,f[r+28>>2]=n.rdev,f[r+32>>2]=0,$e=[n.size>>>0,(Re=n.size,+Math.abs(Re)>=1?Re>0?(Math.min(+Math.floor(Re/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Re-+(~~Re>>>0))/4294967296)>>>0:0)],f[r+40>>2]=$e[0],f[r+44>>2]=$e[1],f[r+48>>2]=4096,f[r+52>>2]=n.blocks,f[r+56>>2]=n.atime.getTime()/1e3|0,f[r+60>>2]=0,f[r+64>>2]=n.mtime.getTime()/1e3|0,f[r+68>>2]=0,f[r+72>>2]=n.ctime.getTime()/1e3|0,f[r+76>>2]=0,$e=[n.ino>>>0,(Re=n.ino,+Math.abs(Re)>=1?Re>0?(Math.min(+Math.floor(Re/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Re-+(~~Re>>>0))/4294967296)>>>0:0)],f[r+80>>2]=$e[0],f[r+84>>2]=$e[1],0},doReadv:function(e,t,r,n){for(var o=0,a=0;a<r;a++){var l=f[t+a*8>>2],d=f[t+(a*8+4)>>2],v=i.read(e,Ce,l,d,n);if(v<0)return-1;if(o+=v,v<d)break}return o},doWritev:function(e,t,r,n){for(var o=0,a=0;a<r;a++){var l=f[t+a*8>>2],d=f[t+(a*8+4)>>2],v=i.write(e,Ce,l,d,n);if(v<0)return-1;o+=v}return o},varargs:void 0,get:function(){x(ye.varargs!=null),ye.varargs+=4;var e=f[ye.varargs-4>>2];return e},getStr:function(e){var t=Q(e);return t},getStreamFromFD:function(e){var t=i.getStream(e);if(!t)throw new i.ErrnoError(8);return t}};function Nt(e,t,r,n,o){try{for(var a=0,l=t?f[t>>2]:0,d=t?f[t+4>>2]:0,v=r?f[r>>2]:0,A=r?f[r+4>>2]:0,j=n?f[n>>2]:0,ne=n?f[n+4>>2]:0,N=0,Y=0,ve=0,Oe=0,je=0,We=0,C=(t?f[t>>2]:0)|(r?f[r>>2]:0)|(n?f[n>>2]:0),ce=(t?f[t+4>>2]:0)|(r?f[r+4>>2]:0)|(n?f[n+4>>2]:0),_e=function(Ht,Wi,ji,pn){return Ht<32?Wi&pn:ji&pn},he=0;he<e;he++){var Ee=1<<he%32;if(_e(he,C,ce,Ee)){var Ze=i.getStream(he);if(!Ze)throw new i.ErrnoError(8);var tt=ye.DEFAULT_POLLMASK;Ze.stream_ops.poll&&(tt=Ze.stream_ops.poll(Ze)),tt&1&&_e(he,l,d,Ee)&&(he<32?N=N|Ee:Y=Y|Ee,a++),tt&4&&_e(he,v,A,Ee)&&(he<32?ve=ve|Ee:Oe=Oe|Ee,a++),tt&2&&_e(he,j,ne,Ee)&&(he<32?je=je|Ee:We=We|Ee,a++)}}return t&&(f[t>>2]=N,f[t+4>>2]=Y),r&&(f[r>>2]=ve,f[r+4>>2]=Oe),n&&(f[n>>2]=je,f[n+4>>2]=We),a}catch(Ht){if(typeof i>"u"||!(Ht instanceof i.ErrnoError))throw Ht;return-Ht.errno}}var Ie={mount:function(e){return s.websocket=s.websocket&&typeof s.websocket=="object"?s.websocket:{},s.websocket._callbacks={},s.websocket.on=function(t,r){return typeof r=="function"&&(this._callbacks[t]=r),this},s.websocket.emit=function(t,r){typeof this._callbacks[t]=="function"&&this._callbacks[t].call(this,r)},i.createNode(null,"/",16895,0)},createSocket:function(e,t,r){t&=-526337;var n=t==1;r&&x(n==(r==6));var o={family:e,type:t,protocol:r,server:null,error:null,peers:{},pending:[],recv_queue:[],sock_ops:Ie.websocket_sock_ops},a=Ie.nextname(),l=i.createNode(Ie.root,a,49152,0);l.sock=o;var d=i.createStream({path:a,node:l,flags:2,seekable:!1,stream_ops:Ie.stream_ops});return o.stream=d,o},getSocket:function(e){var t=i.getStream(e);return!t||!i.isSocket(t.node.mode)?null:t.node.sock},stream_ops:{poll:function(e){var t=e.node.sock;return t.sock_ops.poll(t)},ioctl:function(e,t,r){var n=e.node.sock;return n.sock_ops.ioctl(n,t,r)},read:function(e,t,r,n,o){var a=e.node.sock,l=a.sock_ops.recvmsg(a,n);return l?(t.set(l.buffer,r),l.buffer.length):0},write:function(e,t,r,n,o){var a=e.node.sock;return a.sock_ops.sendmsg(a,t,r,n)},close:function(e){var t=e.node.sock;t.sock_ops.close(t)}},nextname:function(){return Ie.nextname.current||(Ie.nextname.current=0),"socket["+Ie.nextname.current+++"]"},websocket_sock_ops:{createPeer:function(e,t,r){var n;if(typeof t=="object"&&(n=t,t=null,r=null),n)if(n._socket)t=n._socket.remoteAddress,r=n._socket.remotePort;else{var o=/ws[s]?:\/\/([^:]+):(\d+)/.exec(n.url);if(!o)throw new Error("WebSocket URL must be in the format ws(s)://address:port");t=o[1],r=parseInt(o[2],10)}else try{var a=s.websocket&&typeof s.websocket=="object",l="ws:#".replace("#","//");if(a&&typeof s.websocket.url=="string"&&(l=s.websocket.url),l==="ws://"||l==="wss://"){var A=t.split("/");l=l+A[0]+":"+r+"/"+A.slice(1).join("/")}var d="binary";a&&typeof s.websocket.subprotocol=="string"&&(d=s.websocket.subprotocol);var v=void 0,A=t.split("/");l.endsWith("/")||(l+="/"),l+=A[0]+":"+r,d!=="null"&&(d=d.replace(/^ +| +$/g,"").split(/ *, */),v=y?{protocol:d.toString()}:d),a&&s.websocket.subprotocol===null&&(d="null",v=void 0);var j;j=WebSocket;try{if(et.transport==="wisp")n=new un(l);else if(et.transport==="wsproxy")n=new WebSocket(l);else{if(typeof et.transport=="string")throw new TypeError("invalid transport type");n=new et.transport(l)}}catch(N){throw Vr("Error while creating a TCP connection: "+N),N}n.binaryType="arraybuffer"}catch{throw new i.ErrnoError(23)}var ne={addr:t,port:r,socket:n,dgram_send_queue:[]};return Ie.websocket_sock_ops.addPeer(e,ne),Ie.websocket_sock_ops.handlePeerEvents(e,ne),e.type===2&&typeof e.sport<"u"&&ne.dgram_send_queue.push(new Uint8Array([255,255,255,255,112,111,114,116,(e.sport&65280)>>8,e.sport&255])),ne},getPeer:function(e,t,r){return e.peers[t+":"+r]},addPeer:function(e,t){e.peers[t.addr+":"+t.port]=t},removePeer:function(e,t){delete e.peers[t.addr+":"+t.port]},handlePeerEvents:function(e,t){var r=!0,n=function(){s.websocket.emit("open",e.stream.fd);try{for(var a=t.dgram_send_queue.shift();a;)t.socket.send(a),a=t.dgram_send_queue.shift()}catch{t.socket.close()}};function o(a){if(typeof a=="string"){var l=new TextEncoder;a=l.encode(a)}else{if(x(a.byteLength!==void 0),a.byteLength==0)return;a=new Uint8Array(a)}var d=r;if(r=!1,d&&a.length===10&&a[0]===255&&a[1]===255&&a[2]===255&&a[3]===255&&a[4]===112&&a[5]===111&&a[6]===114&&a[7]===116){var v=a[8]<<8|a[9];Ie.websocket_sock_ops.removePeer(e,t),t.port=v,Ie.websocket_sock_ops.addPeer(e,t);return}e.recv_queue.push({addr:t.addr,port:t.port,data:a}),s.websocket.emit("message",e.stream.fd)}y?(t.socket.on("open",n),t.socket.on("message",function(a,l){l.binary&&o(new Uint8Array(a).buffer)}),t.socket.on("close",function(){s.websocket.emit("close",e.stream.fd)}),t.socket.on("error",function(a){e.error=14,s.websocket.emit("error",[e.stream.fd,e.error,"ECONNREFUSED: Connection refused"])})):(t.socket.onopen=n,t.socket.onclose=function(){s.websocket.emit("close",e.stream.fd)},t.socket.onmessage=function(l){o(l.data)},t.socket.onerror=function(a){e.error=14,s.websocket.emit("error",[e.stream.fd,e.error,"ECONNREFUSED: Connection refused"])})},poll:function(e){if(e.type===1&&e.server)return e.pending.length?65:0;var t=0,r=e.type===1?Ie.websocket_sock_ops.getPeer(e,e.daddr,e.dport):null;return(e.recv_queue.length||!r||r&&r.socket.readyState===r.socket.CLOSING||r&&r.socket.readyState===r.socket.CLOSED)&&(t|=65),(!r||r&&r.socket.readyState===r.socket.OPEN)&&(t|=4),(r&&r.socket.readyState===r.socket.CLOSING||r&&r.socket.readyState===r.socket.CLOSED)&&(t|=16),t},ioctl:function(e,t,r){switch(t){case 21531:var n=0;return e.recv_queue.length&&(n=e.recv_queue[0].data.length),f[r>>2]=n,0;default:return 28}},close:function(e){if(e.server){try{e.server.close()}catch{}e.server=null}for(var t=Object.keys(e.peers),r=0;r<t.length;r++){var n=e.peers[t[r]];try{n.socket.close()}catch{}Ie.websocket_sock_ops.removePeer(e,n)}return 0},bind:function(e,t,r){if(typeof e.saddr<"u"||typeof e.sport<"u")throw new i.ErrnoError(28);if(e.saddr=t,e.sport=r,e.type===2){e.server&&(e.server.close(),e.server=null);try{e.sock_ops.listen(e,0)}catch(n){if(!(n instanceof i.ErrnoError)||n.errno!==138)throw n}}},connect:function(e,t,r){if(e.server)throw new i.ErrnoError(138);if(typeof e.daddr<"u"&&typeof e.dport<"u"){var n=Ie.websocket_sock_ops.getPeer(e,e.daddr,e.dport);if(n)throw n.socket.readyState===n.socket.CONNECTING?new i.ErrnoError(7):new i.ErrnoError(30)}var o=Ie.websocket_sock_ops.createPeer(e,t,r);throw e.daddr=o.addr,e.dport=o.port,new i.ErrnoError(26)},listen:function(e,t){if(!y)throw new i.ErrnoError(138)},accept:function(e){if(!e.server)throw new i.ErrnoError(28);var t=e.pending.shift();return t.stream.flags=e.stream.flags,t},getname:function(e,t){var r,n;if(t){if(e.daddr===void 0||e.dport===void 0)throw new i.ErrnoError(53);r=e.daddr,n=e.dport}else r=e.saddr||0,n=e.sport||0;return{addr:r,port:n}},sendmsg:function(e,t,r,n,o,a){if(e.type===2){if((o===void 0||a===void 0)&&(o=e.daddr,a=e.dport),o===void 0||a===void 0)throw new i.ErrnoError(17)}else o=e.daddr,a=e.dport;var l=Ie.websocket_sock_ops.getPeer(e,o,a);if(e.type===1){if(!l||l.socket.readyState===l.socket.CLOSING||l.socket.readyState===l.socket.CLOSED)throw new i.ErrnoError(53);if(l.socket.readyState===l.socket.CONNECTING)throw new i.ErrnoError(6)}ArrayBuffer.isView(t)&&(r+=t.byteOffset,t=t.buffer);var d;if(d=t.slice(r,r+n),e.type===2&&(!l||l.socket.readyState!==l.socket.OPEN))return(!l||l.socket.readyState===l.socket.CLOSING||l.socket.readyState===l.socket.CLOSED)&&(l=Ie.websocket_sock_ops.createPeer(e,o,a)),l.dgram_send_queue.push(d),n;try{return l.socket.send(d),n}catch{throw new i.ErrnoError(28)}},recvmsg:function(e,t){if(e.type===1&&e.server)throw new i.ErrnoError(53);var r=e.recv_queue.shift();if(!r)if(e.type===1){var n=Ie.websocket_sock_ops.getPeer(e,e.daddr,e.dport);if(n){if(n.socket.readyState===n.socket.CLOSING||n.socket.readyState===n.socket.CLOSED)return null;throw new i.ErrnoError(6)}else throw new i.ErrnoError(53)}else throw new i.ErrnoError(6);var o=r.data.byteLength||r.data.length,a=r.data.byteOffset||0,l=r.data.buffer||r.data,d=Math.min(t,o),v={buffer:new Uint8Array(l,a,d),addr:r.addr,port:r.port};if(e.type===1&&d<o){var A=o-d;r.data=new Uint8Array(l,a+d,A),e.recv_queue.unshift(r)}return v}}};function ft(e){var t=Ie.getSocket(e);if(!t)throw new i.ErrnoError(8);return t}function tr(e){return f[ui()>>2]=e,e}function Ot(e){return(e&255)+"."+(e>>8&255)+"."+(e>>16&255)+"."+(e>>24&255)}function It(e){var t="",r=0,n=0,o=0,a=0,l=0,d=0,v=[e[0]&65535,e[0]>>16,e[1]&65535,e[1]>>16,e[2]&65535,e[2]>>16,e[3]&65535,e[3]>>16],A=!0,j="";for(d=0;d<5;d++)if(v[d]!==0){A=!1;break}if(A){if(j=Ot(v[6]|v[7]<<16),v[5]===-1)return t="::ffff:",t+=j,t;if(v[5]===0)return t="::",j==="0.0.0.0"&&(j=""),j==="0.0.0.1"&&(j="1"),t+=j,t}for(r=0;r<8;r++)v[r]===0&&(r-o>1&&(l=0),o=r,l++),l>n&&(n=l,a=r-n+1);for(r=0;r<8;r++){if(n>1&&v[r]===0&&r>=a&&r<a+n){r===a&&(t+=":",a===0&&(t+=":"));continue}t+=Number(sn(v[r]&65535)).toString(16),t+=r<7?":":""}return t}function Lr(e,t){var r=_[e>>1],n=sn(k[e+2>>1]),o;switch(r){case 2:if(t!==16)return{errno:28};o=f[e+4>>2],o=Ot(o);break;case 10:if(t!==28)return{errno:28};o=[f[e+8>>2],f[e+12>>2],f[e+16>>2],f[e+20>>2]],o=It(o);break;default:return{errno:5}}return{family:r,addr:o,port:n}}function gt(e){for(var t=e.split("."),r=0;r<4;r++){var n=Number(t[r]);if(isNaN(n))return null;t[r]=n}return(t[0]|t[1]<<8|t[2]<<16|t[3]<<24)>>>0}function it(e){return parseInt(e)}function Ft(e){var t,r,n,o,a=/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,l=[];if(!a.test(e))return null;if(e==="::")return[0,0,0,0,0,0,0,0];for(e.startsWith("::")?e=e.replace("::","Z:"):e=e.replace("::",":Z:"),e.indexOf(".")>0?(e=e.replace(new RegExp("[.]","g"),":"),t=e.split(":"),t[t.length-4]=it(t[t.length-4])+it(t[t.length-3])*256,t[t.length-3]=it(t[t.length-2])+it(t[t.length-1])*256,t=t.slice(0,t.length-2)):t=e.split(":"),n=0,o=0,r=0;r<t.length;r++)if(typeof t[r]=="string")if(t[r]==="Z"){for(o=0;o<8-t.length+1;o++)l[r+o]=0;n=o-1}else l[r+n]=Br(parseInt(t[r],16));else l[r+n]=t[r];return[l[1]<<16|l[0],l[3]<<16|l[2],l[5]<<16|l[4],l[7]<<16|l[6]]}var Je={address_map:{id:1,addrs:{},names:{}},lookup_name:function(e){var t=gt(e);if(t!==null||(t=Ft(e),t!==null))return e;var r;if(Je.address_map.addrs[e])r=Je.address_map.addrs[e];else{var n=Je.address_map.id++;x(n<65535,"exceeded max address mappings of 65535"),r="172.29."+(n&255)+"."+(n&65280),Je.address_map.names[r]=e,Je.address_map.addrs[e]=r}return r},lookup_addr:function(e){return Je.address_map.names[e]?Je.address_map.names[e]:null}};function Ct(e,t,r){if(r&&e===0)return null;var n=Lr(e,t);if(n.errno)throw new i.ErrnoError(n.errno);return n.addr=Je.lookup_addr(n.addr)||n.addr,n}function Rr(e,t,r){try{var n=ft(e),o=Ct(t,r);return n.sock_ops.bind(n,o.addr,o.port),0}catch(a){if(typeof i>"u"||!(a instanceof i.ErrnoError))throw a;return-a.errno}}function Dr(e,t,r){try{var n=ft(e),o=Ct(t,r);return n.sock_ops.connect(n,o.addr,o.port),0}catch(a){if(typeof i>"u"||!(a instanceof i.ErrnoError))throw a;return-a.errno}}function Nr(e,t,r){ye.varargs=r;try{var n=ye.getStreamFromFD(e);switch(t){case 0:{var o=ye.get();if(o<0)return-28;var a;return a=i.open(n.path,n.flags,0,o),a.fd}case 1:case 2:return 0;case 3:return n.flags;case 4:{var o=ye.get();return n.flags|=o,0}case 5:{var o=ye.get(),l=0;return _[o+l>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return tr(28),-1;default:return-28}}catch(d){if(typeof i>"u"||!(d instanceof i.ErrnoError))throw d;return-d.errno}}function rr(e,t){try{var r=ye.getStreamFromFD(e);return ye.doStat(i.stat,r.path,t)}catch(n){if(typeof i>"u"||!(n instanceof i.ErrnoError))throw n;return-n.errno}}function nr(e,t,r,n){try{t=ye.getStr(t);var o=n&256,a=n&4096;return n=n&-4353,x(!n,n),t=ye.calculateAt(e,t,a),ye.doStat(o?i.lstat:i.stat,t,r)}catch(l){if(typeof i>"u"||!(l instanceof i.ErrnoError))throw l;return-l.errno}}function Or(e,t,r){try{var n=ye.getStreamFromFD(e);n.getdents||(n.getdents=i.readdir(n.path));for(var o=280,a=0,l=i.llseek(n,0,1),d=Math.floor(l/o);d<n.getdents.length&&a+o<=r;){var v,A,j=n.getdents[d];if(j===".")v=n.node.id,A=4;else if(j===".."){var ne=i.lookupPath(n.path,{parent:!0});v=ne.node.id,A=4}else{var N=i.lookupNode(n.node,j);v=N.id,A=i.isChrdev(N.mode)?2:i.isDir(N.mode)?4:i.isLink(N.mode)?10:8}x(v),$e=[v>>>0,(Re=v,+Math.abs(Re)>=1?Re>0?(Math.min(+Math.floor(Re/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Re-+(~~Re>>>0))/4294967296)>>>0:0)],f[t+a>>2]=$e[0],f[t+a+4>>2]=$e[1],$e=[(d+1)*o>>>0,(Re=(d+1)*o,+Math.abs(Re)>=1?Re>0?(Math.min(+Math.floor(Re/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Re-+(~~Re>>>0))/4294967296)>>>0:0)],f[t+a+8>>2]=$e[0],f[t+a+12>>2]=$e[1],_[t+a+16>>1]=280,Ce[t+a+18>>0]=A,Ne(j,t+a+19,256),a+=o,d+=1}return i.llseek(n,d*o,0),a}catch(Y){if(typeof i>"u"||!(Y instanceof i.ErrnoError))throw Y;return-Y.errno}}function Pt(e,t,r,n,o){switch(t){case 2:r=gt(r),er(e,16),o&&(f[o>>2]=16),_[e>>1]=t,f[e+4>>2]=r,_[e+2>>1]=Br(n);break;case 10:r=Ft(r),er(e,28),o&&(f[o>>2]=28),f[e>>2]=t,f[e+8>>2]=r[0],f[e+12>>2]=r[1],f[e+16>>2]=r[2],f[e+20>>2]=r[3],_[e+2>>1]=Br(n);break;default:return 5}return 0}function $(e,t,r){try{var n=ft(e),o=Pt(t,n.family,Je.lookup_name(n.saddr||"0.0.0.0"),n.sport,r);return x(!o),0}catch(a){if(typeof i>"u"||!(a instanceof i.ErrnoError))throw a;return-a.errno}}function c(e,t,r,n,o){try{var a=ft(e);return t===1&&r===4?(f[n>>2]=a.error,f[o>>2]=4,a.error=null,0):-50}catch(l){if(typeof i>"u"||!(l instanceof i.ErrnoError))throw l;return-l.errno}}function B(e,t,r){ye.varargs=r;try{var n=ye.getStreamFromFD(e);switch(t){case 21509:case 21505:return n.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return n.tty?0:-59;case 21519:{if(!n.tty)return-59;var o=ye.get();return f[o>>2]=0,0}case 21520:return n.tty?-28:-59;case 21531:{var o=ye.get();return i.ioctl(n,t,o)}case 21523:return n.tty?0:-59;case 21524:return n.tty?0:-59;default:ze("bad ioctl syscall "+t)}}catch(a){if(typeof i>"u"||!(a instanceof i.ErrnoError))throw a;return-a.errno}}function pe(e,t){try{return e=ye.getStr(e),ye.doStat(i.lstat,e,t)}catch(r){if(typeof i>"u"||!(r instanceof i.ErrnoError))throw r;return-r.errno}}function Se(e,t,r){ye.varargs=r;try{var n=ye.getStr(e),o=r?ye.get():0,a=i.open(n,t,o);return a.fd}catch(l){if(typeof i>"u"||!(l instanceof i.ErrnoError))throw l;return-l.errno}}var de={BUCKET_BUFFER_SIZE:8192,mount:function(e){return i.createNode(null,"/",16895,0)},createPipe:function(){var e={buckets:[],refcnt:2};e.buckets.push({buffer:new Uint8Array(de.BUCKET_BUFFER_SIZE),offset:0,roffset:0});var t=de.nextname(),r=de.nextname(),n=i.createNode(de.root,t,4096,0),o=i.createNode(de.root,r,4096,0);n.pipe=e,o.pipe=e;var a=i.createStream({path:t,node:n,flags:0,seekable:!1,stream_ops:de.stream_ops});n.stream=a;var l=i.createStream({path:r,node:o,flags:1,seekable:!1,stream_ops:de.stream_ops});return o.stream=l,{readable_fd:a.fd,writable_fd:l.fd}},stream_ops:{poll:function(e){var t=e.node.pipe;if((e.flags&2097155)===1)return 260;if(t.buckets.length>0)for(var r=0;r<t.buckets.length;r++){var n=t.buckets[r];if(n.offset-n.roffset>0)return 65}return 0},ioctl:function(e,t,r){return 28},fsync:function(e){return 28},read:function(e,t,r,n,o){for(var a=e.node.pipe,l=0,d=0;d<a.buckets.length;d++){var v=a.buckets[d];l+=v.offset-v.roffset}x(t instanceof ArrayBuffer||ArrayBuffer.isView(t));var A=t.subarray(r,r+n);if(n<=0)return 0;if(l==0)throw new i.ErrnoError(6);for(var j=Math.min(l,n),ne=j,N=0,d=0;d<a.buckets.length;d++){var Y=a.buckets[d],ve=Y.offset-Y.roffset;if(j<=ve){var Oe=Y.buffer.subarray(Y.roffset,Y.offset);j<ve?(Oe=Oe.subarray(0,j),Y.roffset+=j):N++,A.set(Oe);break}else{var Oe=Y.buffer.subarray(Y.roffset,Y.offset);A.set(Oe),A=A.subarray(Oe.byteLength),j-=Oe.byteLength,N++}}return N&&N==a.buckets.length&&(N--,a.buckets[N].offset=0,a.buckets[N].roffset=0),a.buckets.splice(0,N),ne},write:function(e,t,r,n,o){var a=e.node.pipe;x(t instanceof ArrayBuffer||ArrayBuffer.isView(t));var l=t.subarray(r,r+n),d=l.byteLength;if(d<=0)return 0;var v=null;a.buckets.length==0?(v={buffer:new Uint8Array(de.BUCKET_BUFFER_SIZE),offset:0,roffset:0},a.buckets.push(v)):v=a.buckets[a.buckets.length-1],x(v.offset<=de.BUCKET_BUFFER_SIZE);var A=de.BUCKET_BUFFER_SIZE-v.offset;if(A>=d)return v.buffer.set(l,v.offset),v.offset+=d,d;A>0&&(v.buffer.set(l.subarray(0,A),v.offset),v.offset+=A,l=l.subarray(A,l.byteLength));for(var j=l.byteLength/de.BUCKET_BUFFER_SIZE|0,ne=l.byteLength%de.BUCKET_BUFFER_SIZE,N=0;N<j;N++){var Y={buffer:new Uint8Array(de.BUCKET_BUFFER_SIZE),offset:de.BUCKET_BUFFER_SIZE,roffset:0};a.buckets.push(Y),Y.buffer.set(l.subarray(0,de.BUCKET_BUFFER_SIZE)),l=l.subarray(de.BUCKET_BUFFER_SIZE,l.byteLength)}if(ne>0){var Y={buffer:new Uint8Array(de.BUCKET_BUFFER_SIZE),offset:l.byteLength,roffset:0};a.buckets.push(Y),Y.buffer.set(l)}return d},close:function(e){var t=e.node.pipe;t.refcnt--,t.refcnt===0&&(t.buckets=null)}},nextname:function(){return de.nextname.current||(de.nextname.current=0),"pipe["+de.nextname.current+++"]"}};function Fe(e){try{if(e==0)throw new i.ErrnoError(21);var t=de.createPipe();return f[e>>2]=t.readable_fd,f[e+4>>2]=t.writable_fd,0}catch(r){if(typeof i>"u"||!(r instanceof i.ErrnoError))throw r;return-r.errno}}function dt(e,t,r){try{for(var n=0,o=0;o<t;o++){var a=e+8*o,l=f[a>>2],d=_[a+4>>1],v=32,A=i.getStream(l);A&&(v=ye.DEFAULT_POLLMASK,A.stream_ops.poll&&(v=A.stream_ops.poll(A))),v&=d|8|16,v&&n++,_[a+6>>1]=v}return n}catch(j){if(typeof i>"u"||!(j instanceof i.ErrnoError))throw j;return-j.errno}}function yt(e,t,r,n,o,a){try{var l=ft(e),d=l.sock_ops.recvmsg(l,r);if(!d)return 0;if(o){var v=Pt(o,l.family,Je.lookup_name(d.addr),d.port,a);x(!v)}return Ke.set(d.buffer,t),d.buffer.byteLength}catch(A){if(typeof i>"u"||!(A instanceof i.ErrnoError))throw A;return-A.errno}}function xe(e,t){try{return e=ye.getStr(e),t=ye.getStr(t),i.rename(e,t),0}catch(r){if(typeof i>"u"||!(r instanceof i.ErrnoError))throw r;return-r.errno}}function Qe(e){try{return e=ye.getStr(e),i.rmdir(e),0}catch(t){if(typeof i>"u"||!(t instanceof i.ErrnoError))throw t;return-t.errno}}function st(e,t,r,n,o,a){try{var l=ft(e),d=Ct(o,a,!0);return d?l.sock_ops.sendmsg(l,Ce,t,r,d.addr,d.port):i.write(l.stream,Ce,t,r)}catch(v){if(typeof i>"u"||!(v instanceof i.ErrnoError))throw v;return-v.errno}}function Mt(e,t,r){try{var n=Ie.createSocket(e,t,r);return n.stream.fd}catch(o){if(typeof i>"u"||!(o instanceof i.ErrnoError))throw o;return-o.errno}}function Ir(e,t){try{return e=ye.getStr(e),ye.doStat(i.stat,e,t)}catch(r){if(typeof i>"u"||!(r instanceof i.ErrnoError))throw r;return-r.errno}}function _n(e){try{return e=ye.getStr(e),i.unlink(e),0}catch(t){if(typeof i>"u"||!(t instanceof i.ErrnoError))throw t;return-t.errno}}function mn(){throw 1/0}function gn(e,t){var r=new Date(f[e>>2]*1e3);f[t>>2]=r.getUTCSeconds(),f[t+4>>2]=r.getUTCMinutes(),f[t+8>>2]=r.getUTCHours(),f[t+12>>2]=r.getUTCDate(),f[t+16>>2]=r.getUTCMonth(),f[t+20>>2]=r.getUTCFullYear()-1900,f[t+24>>2]=r.getUTCDay();var n=Date.UTC(r.getUTCFullYear(),0,1,0,0,0,0),o=(r.getTime()-n)/(1e3*60*60*24)|0;f[t+28>>2]=o}function yn(e,t,r){var n=new Date().getFullYear(),o=new Date(n,0,1),a=new Date(n,6,1),l=o.getTimezoneOffset(),d=a.getTimezoneOffset(),v=Math.max(l,d);f[e>>2]=v*60,f[t>>2]=+(l!=d);function A(ve){var Oe=ve.toTimeString().match(/\(([A-Za-z ]+)\)$/);return Oe?Oe[1]:"GMT"}var j=A(o),ne=A(a),N=be(j),Y=be(ne);d<l?(f[r>>2]=N,f[r+4>>2]=Y):(f[r>>2]=Y,f[r+4>>2]=N)}function Fr(e,t,r){Fr.called||(Fr.called=!0,yn(e,t,r))}function vn(e,t){if(se){J("user callback triggered after runtime exited or application aborted.  Ignoring.");return}try{e()}catch(r){br(r)}}function wn(e){setTimeout(function(){vn(function(){di(14)})},e*1e3)}var Kr;Kr=()=>performance.now();var bn=!0;function En(e,t){var r;if(e===0)r=Date.now();else if((e===1||e===4)&&bn)r=Kr();else return tr(28),-1;return f[t>>2]=r/1e3|0,f[t+4>>2]=r%1e3*1e3*1e3|0,0}function Sn(e){x(typeof e=="number"),console.error(Q(e))}function kn(){return 2147483648}function xn(e){try{return H.grow(e-qe.byteLength+65535>>>16),ue(H.buffer),1}catch(t){J("emscripten_realloc_buffer: Attempted to grow heap from "+qe.byteLength+" bytes to "+e+" bytes, but got error: "+t)}}function Tn(e){var t=Ke.length;e=e>>>0,x(e>t);var r=kn();if(e>r)return J("Cannot enlarge memory, asked to go up to "+e+" bytes, but the limit is "+r+" bytes!"),!1;let n=(v,A)=>v+(A-v%A)%A;for(var o=1;o<=4;o*=2){var a=t*(1+.2/o);a=Math.min(a,e+100663296);var l=Math.min(r,n(Math.max(e,a),65536)),d=xn(l);if(d)return!0}return J("Failed to grow the heap from "+t+" bytes to "+l+" bytes, not enough memory!"),!1}var Cr={};function An(){return m||"./this.program"}function Ut(){if(!Ut.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:An()};for(var r in Cr)Cr[r]===void 0?delete t[r]:t[r]=Cr[r];var n=[];for(var r in t)n.push(r+"="+t[r]);Ut.strings=n}return Ut.strings}function Ln(e,t){var r=0;return Ut().forEach(function(n,o){var a=t+r;f[e+o*4>>2]=a,Pe(n,a),r+=n.length+1}),0}function Rn(e,t){var r=Ut();f[e>>2]=r.length;var n=0;return r.forEach(function(o){n+=o.length+1}),f[t>>2]=n,0}function Dn(e){try{var t=ye.getStreamFromFD(e);return i.close(t),0}catch(r){if(typeof i>"u"||!(r instanceof i.ErrnoError))throw r;return r.errno}}function Nn(e,t,r,n){try{var o=ye.getStreamFromFD(e),a=ye.doReadv(o,t,r);return f[n>>2]=a,0}catch(l){if(typeof i>"u"||!(l instanceof i.ErrnoError))throw l;return l.errno}}function On(e,t,r,n,o){try{var a=ye.getStreamFromFD(e),l=4294967296,d=r*l+(t>>>0),v=9007199254740992;return d<=-v||d>=v?-61:(i.llseek(a,d,n),$e=[a.position>>>0,(Re=a.position,+Math.abs(Re)>=1?Re>0?(Math.min(+Math.floor(Re/4294967296),4294967295)|0)>>>0:~~+Math.ceil((Re-+(~~Re>>>0))/4294967296)>>>0:0)],f[o>>2]=$e[0],f[o+4>>2]=$e[1],a.getdents&&d===0&&n===0&&(a.getdents=null),0)}catch(A){if(typeof i>"u"||!(A instanceof i.ErrnoError))throw A;return A.errno}}function In(e,t,r,n){try{var o=ye.getStreamFromFD(e),a=ye.doWritev(o,t,r);return f[n>>2]=a,0}catch(l){if(typeof i>"u"||!(l instanceof i.ErrnoError))throw l;return l.errno}}function Fn(){return He()}function Cn(e,t,r,n){var o=0,a=0,l=0,d=0,v=0,A=0,j;function ne(N,Y,ve,Oe,je,We){var C,ce,_e,he;return ce=N===10?28:16,je=N===10?It(je):Ot(je),C=lr(ce),he=Pt(C,N,je,We),x(!he),_e=lr(32),f[_e+4>>2]=N,f[_e+8>>2]=Y,f[_e+12>>2]=ve,f[_e+24>>2]=Oe,f[_e+20>>2]=C,N===10?f[_e+16>>2]=28:f[_e+16>>2]=16,f[_e+28>>2]=0,_e}if(r&&(l=f[r>>2],d=f[r+4>>2],v=f[r+8>>2],A=f[r+12>>2]),v&&!A&&(A=v===2?17:6),!v&&A&&(v=A===17?2:1),A===0&&(A=6),v===0&&(v=1),!e&&!t)return-2;if(l&-1088||r!==0&&f[r>>2]&2&&!e)return-1;if(l&32)return-2;if(v!==0&&v!==1&&v!==2)return-7;if(d!==0&&d!==2&&d!==10)return-6;if(t&&(t=Q(t),a=parseInt(t,10),isNaN(a)))return l&1024?-2:-8;if(!e)return d===0&&(d=2),l&1||(d===2?o=zr(2130706433):o=[0,0,0,1]),j=ne(d,v,A,null,o,a),f[n>>2]=j,0;if(e=Q(e),o=gt(e),o!==null)if(d===0||d===2)d=2;else if(d===10&&l&8)o=[0,0,zr(65535),o],d=10;else return-2;else if(o=Ft(e),o!==null)if(d===0||d===10)d=10;else return-2;return o!=null?(j=ne(d,v,A,e,o,a),f[n>>2]=j,0):l&4?-2:(e=Je.lookup_name(e),o=gt(e),d===0?d=2:d===10&&(o=[0,0,zr(65535),o]),j=ne(d,v,A,null,o,a),f[n>>2]=j,0)}function Pn(e){var t=Date.now();return f[e>>2]=t/1e3|0,f[e+4>>2]=t%1e3*1e3|0,0}function Mn(e){Te(e)}function ir(e){return e%4===0&&(e%100!==0||e%400===0)}function Pr(e,t){for(var r=0,n=0;n<=t;r+=e[n++]);return r}var sr=[31,29,31,30,31,30,31,31,30,31,30,31],or=[31,28,31,30,31,30,31,31,30,31,30,31];function ar(e,t){for(var r=new Date(e.getTime());t>0;){var n=ir(r.getFullYear()),o=r.getMonth(),a=(n?sr:or)[o];if(t>a-r.getDate())t-=a-r.getDate()+1,r.setDate(1),o<11?r.setMonth(o+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1));else return r.setDate(r.getDate()+t),r}return r}function Un(e,t,r,n){var o=f[n+40>>2],a={tm_sec:f[n>>2],tm_min:f[n+4>>2],tm_hour:f[n+8>>2],tm_mday:f[n+12>>2],tm_mon:f[n+16>>2],tm_year:f[n+20>>2],tm_wday:f[n+24>>2],tm_yday:f[n+28>>2],tm_isdst:f[n+32>>2],tm_gmtoff:f[n+36>>2],tm_zone:o?Q(o):""},l=Q(r),d={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var v in d)l=l.replace(new RegExp(v,"g"),d[v]);var A=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],j=["January","February","March","April","May","June","July","August","September","October","November","December"];function ne(C,ce,_e){for(var he=typeof C=="number"?C.toString():C||"";he.length<ce;)he=_e[0]+he;return he}function N(C,ce){return ne(C,ce,"0")}function Y(C,ce){function _e(Ee){return Ee<0?-1:Ee>0?1:0}var he;return(he=_e(C.getFullYear()-ce.getFullYear()))===0&&(he=_e(C.getMonth()-ce.getMonth()))===0&&(he=_e(C.getDate()-ce.getDate())),he}function ve(C){switch(C.getDay()){case 0:return new Date(C.getFullYear()-1,11,29);case 1:return C;case 2:return new Date(C.getFullYear(),0,3);case 3:return new Date(C.getFullYear(),0,2);case 4:return new Date(C.getFullYear(),0,1);case 5:return new Date(C.getFullYear()-1,11,31);case 6:return new Date(C.getFullYear()-1,11,30)}}function Oe(C){var ce=ar(new Date(C.tm_year+1900,0,1),C.tm_yday),_e=new Date(ce.getFullYear(),0,4),he=new Date(ce.getFullYear()+1,0,4),Ee=ve(_e),Ze=ve(he);return Y(Ee,ce)<=0?Y(Ze,ce)<=0?ce.getFullYear()+1:ce.getFullYear():ce.getFullYear()-1}var je={"%a":function(C){return A[C.tm_wday].substring(0,3)},"%A":function(C){return A[C.tm_wday]},"%b":function(C){return j[C.tm_mon].substring(0,3)},"%B":function(C){return j[C.tm_mon]},"%C":function(C){var ce=C.tm_year+1900;return N(ce/100|0,2)},"%d":function(C){return N(C.tm_mday,2)},"%e":function(C){return ne(C.tm_mday,2," ")},"%g":function(C){return Oe(C).toString().substring(2)},"%G":function(C){return Oe(C)},"%H":function(C){return N(C.tm_hour,2)},"%I":function(C){var ce=C.tm_hour;return ce==0?ce=12:ce>12&&(ce-=12),N(ce,2)},"%j":function(C){return N(C.tm_mday+Pr(ir(C.tm_year+1900)?sr:or,C.tm_mon-1),3)},"%m":function(C){return N(C.tm_mon+1,2)},"%M":function(C){return N(C.tm_min,2)},"%n":function(){return`
`},"%p":function(C){return C.tm_hour>=0&&C.tm_hour<12?"AM":"PM"},"%S":function(C){return N(C.tm_sec,2)},"%t":function(){return"	"},"%u":function(C){return C.tm_wday||7},"%U":function(C){var ce=new Date(C.tm_year+1900,0,1),_e=ce.getDay()===0?ce:ar(ce,7-ce.getDay()),he=new Date(C.tm_year+1900,C.tm_mon,C.tm_mday);if(Y(_e,he)<0){var Ee=Pr(ir(he.getFullYear())?sr:or,he.getMonth()-1)-31,Ze=31-_e.getDate(),tt=Ze+Ee+he.getDate();return N(Math.ceil(tt/7),2)}return Y(_e,ce)===0?"01":"00"},"%V":function(C){var ce=new Date(C.tm_year+1900,0,4),_e=new Date(C.tm_year+1901,0,4),he=ve(ce),Ee=ve(_e),Ze=ar(new Date(C.tm_year+1900,0,1),C.tm_yday);if(Y(Ze,he)<0)return"53";if(Y(Ee,Ze)<=0)return"01";var tt;return he.getFullYear()<C.tm_year+1900?tt=C.tm_yday+32-he.getDate():tt=C.tm_yday+1-he.getDate(),N(Math.ceil(tt/7),2)},"%w":function(C){return C.tm_wday},"%W":function(C){var ce=new Date(C.tm_year,0,1),_e=ce.getDay()===1?ce:ar(ce,ce.getDay()===0?1:7-ce.getDay()+1),he=new Date(C.tm_year+1900,C.tm_mon,C.tm_mday);if(Y(_e,he)<0){var Ee=Pr(ir(he.getFullYear())?sr:or,he.getMonth()-1)-31,Ze=31-_e.getDate(),tt=Ze+Ee+he.getDate();return N(Math.ceil(tt/7),2)}return Y(_e,ce)===0?"01":"00"},"%y":function(C){return(C.tm_year+1900).toString().substring(2)},"%Y":function(C){return C.tm_year+1900},"%z":function(C){var ce=C.tm_gmtoff,_e=ce>=0;return ce=Math.abs(ce)/60,ce=ce/60*100+ce%60,(_e?"+":"-")+("0000"+ce).slice(-4)},"%Z":function(C){return C.tm_zone},"%%":function(){return"%"}};l=l.replace(/%%/g,"\0\0");for(var v in je)l.includes(v)&&(l=l.replace(new RegExp(v,"g"),je[v](a)));l=l.replace(/\0\0/g,"%");var We=qt(l,!1);return We.length>t?0:(Ue(We,e),We.length-1)}function qn(e){var t=Date.now()/1e3|0;return e&&(f[e>>2]=t),t}var Xr=function(e,t,r,n){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=i.nextInode++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=n},Mr=365,Ur=146;Object.defineProperties(Xr.prototype,{read:{get:function(){return(this.mode&Mr)===Mr},set:function(e){e?this.mode|=Mr:this.mode&=-366}},write:{get:function(){return(this.mode&Ur)===Ur},set:function(e){e?this.mode|=Ur:this.mode&=-147}},isFolder:{get:function(){return i.isDir(this.mode)}},isDevice:{get:function(){return i.isChrdev(this.mode)}}}),i.FSNode=Xr,i.staticInit(),mt={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135};function qt(e,t,r){var n=De(e)+1,o=new Array(n),a=oe(e,o,0,o.length);return t&&(o.length=a),o}function Bn(){L("fetchSettings")}var Jr={__assert_fail:Er,__call_sighandler:Sr,__syscall__newselect:Nt,__syscall_bind:Rr,__syscall_connect:Dr,__syscall_fcntl64:Nr,__syscall_fstat64:rr,__syscall_fstatat64:nr,__syscall_getdents64:Or,__syscall_getsockname:$,__syscall_getsockopt:c,__syscall_ioctl:B,__syscall_lstat64:pe,__syscall_open:Se,__syscall_pipe:Fe,__syscall_poll:dt,__syscall_recvfrom:yt,__syscall_rename:xe,__syscall_rmdir:Qe,__syscall_sendto:st,__syscall_socket:Mt,__syscall_stat64:Ir,__syscall_unlink:_n,_emscripten_throw_longjmp:mn,_gmtime_js:gn,_tzset_js:Fr,alarm:wn,clock_gettime:En,emscripten_console_error:Sn,emscripten_resize_heap:Tn,environ_get:Ln,environ_sizes_get:Rn,fd_close:Dn,fd_read:Nn,fd_seek:On,fd_write:In,getTempRet0:Fn,getaddrinfo:Cn,gettimeofday:Pn,invoke_ii:vi,invoke_iiii:yi,invoke_iiiiii:_i,invoke_jii:bi,invoke_v:gi,invoke_vi:wi,invoke_viii:mi,setTempRet0:Mn,strftime:Un,time:qn};if(Be&&_t(Be))var zn=Jt();else var zn=null;s.___wasm_call_ctors=fe("__wasm_call_ctors");var Wn=s._get_cacert=fe("get_cacert"),lr=s._malloc=fe("malloc"),jn=s._init_curl=fe("init_curl"),Zr=s._http_set_options=fe("http_set_options"),ot=s._free=fe("free"),Hn=s._http_set_cookie_jar=fe("http_set_cookie_jar"),$n=s._http_get_info=fe("http_get_info"),Vn=s._create_request=fe("create_request"),Gn=s._request_cleanup=fe("request_cleanup"),qr=s._request_set_proxy=fe("request_set_proxy"),Yn=s._session_create=fe("session_create"),Qr=s._session_perform=fe("session_perform"),Kn=s._session_set_options=fe("session_set_options"),Xn=s._session_add_request=fe("session_add_request"),Jn=s._session_get_active=fe("session_get_active"),Zn=s._session_remove_request=fe("session_remove_request"),Qn=s._session_cleanup=fe("session_cleanup"),ei=s._recv_from_socket=fe("recv_from_socket"),ti=s._send_to_socket=fe("send_to_socket"),ri=s._tls_socket_set_options=fe("tls_socket_set_options"),ni=s._get_version=fe("get_version"),ii=s._get_error_str=fe("get_error_str"),si=s._recv_from_websocket=fe("recv_from_websocket"),oi=s._send_to_websocket=fe("send_to_websocket");s._close_websocket=fe("close_websocket");var ai=s._websocket_set_options=fe("websocket_set_options"),en=s._get_result_size=fe("get_result_size"),tn=s._get_result_buffer=fe("get_result_buffer"),rn=s._get_result_code=fe("get_result_code"),nn=s._get_result_closed=fe("get_result_closed"),li=s._get_result_bytes_left=fe("get_result_bytes_left"),ci=s._get_result_is_text=fe("get_result_is_text"),ui=s.___errno_location=fe("__errno_location"),sn=s._ntohs=fe("ntohs"),Br=s._htons=fe("htons");s._saveSetjmp=fe("saveSetjmp");var zr=s._htonl=fe("htonl"),fi=s.___stdio_exit=fe("__stdio_exit"),di=s._raise=fe("raise"),vt=s._setThrew=fe("setThrew"),on=s._emscripten_stack_init=function(){return(on=s._emscripten_stack_init=s.asm.emscripten_stack_init).apply(null,arguments)};s._emscripten_stack_get_free=function(){return(s._emscripten_stack_get_free=s.asm.emscripten_stack_get_free).apply(null,arguments)},s._emscripten_stack_get_base=function(){return(s._emscripten_stack_get_base=s.asm.emscripten_stack_get_base).apply(null,arguments)};var Wr=s._emscripten_stack_get_end=function(){return(Wr=s._emscripten_stack_get_end=s.asm.emscripten_stack_get_end).apply(null,arguments)},wt=s.stackSave=fe("stackSave"),bt=s.stackRestore=fe("stackRestore"),hi=s.stackAlloc=fe("stackAlloc"),pi=s.dynCall_jii=fe("dynCall_jii");s.dynCall_iiji=fe("dynCall_iiji"),s.dynCall_iiij=fe("dynCall_iiij"),s.dynCall_iiiiijjii=fe("dynCall_iiiiijjii"),s.dynCall_jiji=fe("dynCall_jiji");function _i(e,t,r,n,o,a){var l=wt();try{return Xe(e)(t,r,n,o,a)}catch(d){if(bt(l),d!==d+0)throw d;vt(1,0)}}function mi(e,t,r,n){var o=wt();try{Xe(e)(t,r,n)}catch(a){if(bt(o),a!==a+0)throw a;vt(1,0)}}function gi(e){var t=wt();try{Xe(e)()}catch(r){if(bt(t),r!==r+0)throw r;vt(1,0)}}function yi(e,t,r,n){var o=wt();try{return Xe(e)(t,r,n)}catch(a){if(bt(o),a!==a+0)throw a;vt(1,0)}}function vi(e,t){var r=wt();try{return Xe(e)(t)}catch(n){if(bt(r),n!==n+0)throw n;vt(1,0)}}function wi(e,t){var r=wt();try{Xe(e)(t)}catch(n){if(bt(r),n!==n+0)throw n;vt(1,0)}}function bi(e,t,r){var n=wt();try{return pi(e,t,r)}catch(o){if(bt(n),o!==o+0)throw o;vt(1,0)}}u("intArrayFromString",!1),u("intArrayToString",!1),u("ccall",!1),u("cwrap",!1),u("setValue",!1),u("getValue",!1),s.allocate=ie,u("UTF8ArrayToString",!1),u("UTF8ToString",!1),u("stringToUTF8Array",!1),u("stringToUTF8",!1),u("lengthBytesUTF8",!1),u("stackTrace",!1),u("addOnPreRun",!1),u("addOnInit",!1),u("addOnPreMain",!1),u("addOnExit",!1),u("addOnPostRun",!1),u("writeStringToMemory",!1),u("writeArrayToMemory",!1),u("writeAsciiToMemory",!1),u("addRunDependency",!0),u("removeRunDependency",!0),u("FS_createFolder",!1),u("FS_createPath",!0),u("FS_createDataFile",!0),u("FS_createPreloadedFile",!0),u("FS_createLazyFile",!0),u("FS_createLink",!1),u("FS_createDevice",!0),u("FS_unlink",!0),u("getLEB",!1),u("getFunctionTables",!1),u("alignFunctionTables",!1),u("registerFunctions",!1),s.addFunction=M,s.removeFunction=X,u("getFuncWrapper",!1),u("prettyPrint",!1),u("dynCall",!1),u("getCompilerSetting",!1),u("print",!1),u("printErr",!1),u("getTempRet0",!1),u("setTempRet0",!1),u("callMain",!1),u("abort",!1),u("keepRuntimeAlive",!1),u("zeroMemory",!1),u("stringToNewUTF8",!1),u("emscripten_realloc_buffer",!1),u("ENV",!1),u("withStackSave",!1),u("ERRNO_CODES",!1),u("ERRNO_MESSAGES",!1),u("setErrNo",!1),u("inetPton4",!1),u("inetNtop4",!1),u("inetPton6",!1),u("inetNtop6",!1),u("readSockaddr",!1),u("writeSockaddr",!1),u("DNS",!1),u("getHostByName",!1),u("Protocols",!1),u("Sockets",!1),u("getRandomDevice",!1),u("traverseStack",!1),u("convertFrameToPC",!1),u("UNWIND_CACHE",!1),u("saveInUnwindCache",!1),u("convertPCtoSourceLocation",!1),u("readAsmConstArgsArray",!1),u("readAsmConstArgs",!1),u("mainThreadEM_ASM",!1),u("jstoi_q",!1),u("jstoi_s",!1),u("getExecutableName",!1),u("listenOnce",!1),u("autoResumeAudioContext",!1),u("dynCallLegacy",!1),u("getDynCaller",!1),u("dynCall",!1),u("callRuntimeCallbacks",!1),u("setWasmTableEntry",!1),u("getWasmTableEntry",!1),u("handleException",!1),u("runtimeKeepalivePush",!1),u("runtimeKeepalivePop",!1),u("callUserCallback",!1),u("maybeExit",!1),u("safeSetTimeout",!1),u("asmjsMangle",!1),u("asyncLoad",!1),u("alignMemory",!1),u("mmapAlloc",!1),u("reallyNegative",!1),u("unSign",!1),u("reSign",!1),u("formatString",!1),u("PATH",!1),u("PATH_FS",!1),u("SYSCALLS",!1),u("getSocketFromFD",!1),u("getSocketAddress",!1),u("JSEvents",!1),u("registerKeyEventCallback",!1),u("specialHTMLTargets",!1),u("maybeCStringToJsString",!1),u("findEventTarget",!1),u("findCanvasEventTarget",!1),u("getBoundingClientRect",!1),u("fillMouseEventData",!1),u("registerMouseEventCallback",!1),u("registerWheelEventCallback",!1),u("registerUiEventCallback",!1),u("registerFocusEventCallback",!1),u("fillDeviceOrientationEventData",!1),u("registerDeviceOrientationEventCallback",!1),u("fillDeviceMotionEventData",!1),u("registerDeviceMotionEventCallback",!1),u("screenOrientation",!1),u("fillOrientationChangeEventData",!1),u("registerOrientationChangeEventCallback",!1),u("fillFullscreenChangeEventData",!1),u("registerFullscreenChangeEventCallback",!1),u("registerRestoreOldStyle",!1),u("hideEverythingExceptGivenElement",!1),u("restoreHiddenElements",!1),u("setLetterbox",!1),u("currentFullscreenStrategy",!1),u("restoreOldWindowedStyle",!1),u("softFullscreenResizeWebGLRenderTarget",!1),u("doRequestFullscreen",!1),u("fillPointerlockChangeEventData",!1),u("registerPointerlockChangeEventCallback",!1),u("registerPointerlockErrorEventCallback",!1),u("requestPointerLock",!1),u("fillVisibilityChangeEventData",!1),u("registerVisibilityChangeEventCallback",!1),u("registerTouchEventCallback",!1),u("fillGamepadEventData",!1),u("registerGamepadEventCallback",!1),u("registerBeforeUnloadEventCallback",!1),u("fillBatteryEventData",!1),u("battery",!1),u("registerBatteryEventCallback",!1),u("setCanvasElementSize",!1),u("getCanvasElementSize",!1),u("demangle",!1),u("demangleAll",!1),u("jsStackTrace",!1),u("stackTrace",!1),u("getEnvStrings",!1),u("checkWasiClock",!1),u("writeI53ToI64",!1),u("writeI53ToI64Clamped",!1),u("writeI53ToI64Signaling",!1),u("writeI53ToU64Clamped",!1),u("writeI53ToU64Signaling",!1),u("readI53FromI64",!1),u("readI53FromU64",!1),u("convertI32PairToI53",!1),u("convertU32PairToI53",!1),u("setImmediateWrapped",!1),u("clearImmediateWrapped",!1),u("polyfillSetImmediate",!1),u("uncaughtExceptionCount",!1),u("exceptionLast",!1),u("exceptionCaught",!1),u("ExceptionInfo",!1),u("CatchInfo",!1),u("exception_addRef",!1),u("exception_decRef",!1),u("Browser",!1),u("funcWrappers",!1),u("getFuncWrapper",!1),u("setMainLoop",!1),u("wget",!1),u("FS",!1),u("MEMFS",!1),u("TTY",!1),u("PIPEFS",!1),u("SOCKFS",!1),u("_setNetworkCallback",!1),u("tempFixedLengthArray",!1),u("miniTempWebGLFloatBuffers",!1),u("heapObjectForWebGLType",!1),u("heapAccessShiftForWebGLHeap",!1),u("GL",!1),u("emscriptenWebGLGet",!1),u("computeUnpackAlignedImageSize",!1),u("emscriptenWebGLGetTexPixelData",!1),u("emscriptenWebGLGetUniform",!1),u("webglGetUniformLocation",!1),u("webglPrepareUniformLocationsBeforeFirstUse",!1),u("webglGetLeftBracePos",!1),u("emscriptenWebGLGetVertexAttrib",!1),u("writeGLArray",!1),u("AL",!1),u("SDL_unicode",!1),u("SDL_ttfContext",!1),u("SDL_audio",!1),u("SDL",!1),u("SDL_gfx",!1),u("GLUT",!1),u("EGL",!1),u("GLFW_Window",!1),u("GLFW",!1),u("GLEW",!1),u("IDBStore",!1),u("runAndAbortIfError",!1),u("WS",!1),u("warnOnce",!1),u("stackSave",!1),u("stackRestore",!1),u("stackAlloc",!1),u("AsciiToString",!1),u("stringToAscii",!1),u("UTF16ToString",!1),u("stringToUTF16",!1),u("lengthBytesUTF16",!1),u("UTF32ToString",!1),u("stringToUTF32",!1),u("lengthBytesUTF32",!1),u("allocateUTF8",!1),u("allocateUTF8OnStack",!1),s.writeStackCookie=$t,s.checkStackCookie=ht,s.ALLOC_NORMAL=F,z("ALLOC_STACK",!1);var cr;function an(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}pt=function e(){cr||ur(),cr||(pt=e)};function Ei(){on(),$t()}function ur(e){if(at>0||(Ei(),Ge(),at>0))return;function t(){cr||(cr=!0,s.calledRun=!0,!se&&(Vt(),s.onRuntimeInitialized&&s.onRuntimeInitialized(),x(!s._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),gr()))}s.setStatus?(s.setStatus("Running..."),setTimeout(function(){setTimeout(function(){s.setStatus("")},1),t()},1)):t(),ht()}if(s.run=ur,s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();Be&&_t(Be)&&ur();const fr={DATA:2,CONTINUE:3,CLOSE:4},Si=[void 0,"CONNECT","DATA","CONTINUE","CLOSE"];function jr(e){if(e.length==4)return new Uint32Array(e.buffer)[0];if(e.length==2)return new Uint16Array(e.buffer)[0];if(e.length==1)return e[0];throw"invalid array length"}function Bt(e,t){let r=new ArrayBuffer(t),n=new DataView(r);if(t==1)n.setUint8(0,e,!0);else if(t==2)n.setUint16(0,e,!0);else if(t==4)n.setUint32(0,e,!0);else throw"invalid array length";return new Uint8Array(r)}function ln(){let e=0;for(let n of arguments)e+=n.length;let t=new Uint8Array(e),r=0;for(let n of arguments)t.set(n,r),r+=n.length;return t}function Hr(e,t,r){let n=Bt(t,4),o=Bt(e,1);return ln(o,n,r)}class ki extends EventTarget{constructor(t,r,n,o,a,l,d){super(),this.hostname=t,this.port=r,this.ws=n,this.buffer_size=o,this.stream_id=a,this.connection=l,this.stream_type=d,this.send_buffer=[],this.open=!0}send(t){if(this.buffer_size>0||!this.open||this.stream_type===2){let r=Hr(2,this.stream_id,t);this.ws.send(r),this.buffer_size--}else this.send_buffer.push(t)}continue_received(t){for(this.buffer_size=t;this.buffer_size>0&&this.send_buffer.length>0;)this.send(this.send_buffer.shift())}close(t=1){if(!this.open)return;let r=Bt(t,1),n=Hr(4,this.stream_id,r);this.ws.send(n),this.open=!1,delete this.connection.active_streams[this.stream_id]}}class cn extends EventTarget{constructor(t){if(super(),this.wisp_url=t,this.max_buffer_size=null,this.active_streams={},this.connected=!1,this.connecting=!1,this.next_stream_id=1,!this.wisp_url.endsWith("/"))throw"wisp endpoints must end with a trailing forward slash";this.connect_ws()}connect_ws(){this.ws=new WebSocket(this.wisp_url),this.ws.binaryType="arraybuffer",this.connecting=!0,this.ws.addEventListener("error",t=>{this.on_ws_close();let r=new Event("error");this.dispatchEvent(r)}),this.ws.addEventListener("close",()=>{this.on_ws_close();let t=new CloseEvent("close");this.dispatchEvent(t)}),this.ws.addEventListener("message",t=>{if(this.on_ws_msg(t),this.connecting){this.connected=!0,this.connecting=!1;let r=new Event("open");this.dispatchEvent(r)}})}close_stream(t,r){let n=new CloseEvent("close",{code:r});t.open=!1,t.dispatchEvent(n),delete this.active_streams[t.stream_id]}on_ws_close(){this.connected=!1,this.connecting=!1;for(let t of Object.keys(this.active_streams))this.close_stream(this.active_streams[t],3)}create_stream(t,r,n="tcp"){let o=n==="udp"?2:1,a=this.next_stream_id;this.next_stream_id++;let l=new ki(t,r,this.ws,this.max_buffer_size,a,this,o);l.open=this.connected;let d=Bt(o,1),v=Bt(r,2),A=new TextEncoder().encode(t),j=ln(d,v,A),ne=Hr(1,a,j);return this.active_streams[a]=l,this.ws.send(ne),l}on_ws_msg(t){let r=new Uint8Array(t.data);if(r.length<5){$r("wisp client warning: received a packet which is too short");return}let n=r[0],o=jr(r.slice(1,5)),a=r.slice(5),l=this.active_streams[o];if(typeof l>"u"&&o!==0){$r(`wisp client warning: received a ${Si[n]} packet for a stream which doesn't exist`);return}if(n===fr.DATA){let d=new MessageEvent("message",{data:a});l.dispatchEvent(d)}else n===fr.CONTINUE&&o==0?this.max_buffer_size=jr(a):n===fr.CONTINUE?l.continue_received(jr(a)):n===fr.CLOSE?this.close_stream(l,a[0]):$r(`wisp client warning: receive an invalid packet of type ${n}`)}}const zt={};class un extends EventTarget{constructor(t,r){super(),this.url=t,this.protocols=r,this.binaryType="blob",this.stream=null,this.event_listeners={},this.connection=null,this.onopen=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onclose=()=>{},this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3;let n=this.url.split("/"),o=n.pop().split(":");this.host=o[0],this.port=parseInt(o[1]),this.real_url=n.join("/")+"/",this.init_connection()}on_conn_close(){delete zt[this.real_url]}init_connection(){this.connection=zt[this.real_url],this.connection?this.connection.connected?(this.connection=zt[this.real_url],this.init_stream()):this.connection.addEventListener("open",()=>{this.init_stream()}):(this.connection=new cn(this.real_url),this.connection.addEventListener("open",()=>{this.init_stream()}),this.connection.addEventListener("close",()=>{this.on_conn_close()}),this.connection.addEventListener("error",()=>{this.on_conn_close()}),zt[this.real_url]=this.connection)}init_stream(){this.stream=this.connection.create_stream(this.host,this.port),this.stream.addEventListener("message",r=>{let n;if(this.binaryType=="blob")n=new Blob(r.data);else if(this.binaryType=="arraybuffer")n=r.data.buffer;else throw"invalid binaryType string";let o=new MessageEvent("message",{data:n});this.onmessage(o),this.dispatchEvent(o)}),this.stream.addEventListener("close",r=>{let n=new CloseEvent("close",{code:r.code});this.onclose(n),this.dispatchEvent(n)});let t=new Event("open");this.onopen(t),this.dispatchEvent(t)}send(t){let r;if(typeof t=="string")r=new TextEncoder().encode(t);else if(t instanceof Blob){t.arrayBuffer().then(n=>{r=new Uint8Array(n),this.send(r)});return}else if(t instanceof ArrayBuffer)ArrayBuffer.isView(t)&&t instanceof DataView?r=new Uint8Array(t.buffer):r=new Uint8Array(t);else if(ArrayBuffer.isView(t))r=Uint8Array.from(t);else throw"invalid data type";if(!this.stream)throw"websocket is not ready";this.stream.send(r)}close(){this.stream.close(2)}get bufferedAmount(){let t=0;for(let r of this.stream.send_buffer)t+=r.length;return t}get extensions(){return""}get protocol(){return"binary"}get readyState(){return this.connection&&!this.connection.connected&&!this.connection.connecting?this.CLOSED:!this.connection||!this.connection.connected?this.CONNECTING:this.stream.open?this.OPEN:this.CLOSED}}function dr(e,t){e==="log"?console.log(t):e==="warn"?console.warn(t):e==="error"&&console.error(t)}function $r(e){dr("warn",e)}function Vr(e){dr("error",e)}class xi{constructor(t){for(let r in t)this[r]=t[r];return new Proxy(this,this)}get(t,r){let n=Object.keys(this);for(let o of n)if(o.toLowerCase()===r.toLowerCase())return this[o]}set(t,r,n){let o=Object.keys(this);for(let a of o)a.toLowerCase()===r.toLowerCase()&&(this[a]=n);return this[r]=n,!0}}function Ti(e){return ie(qt(e),F)}function hr(e){return ie(e,F)}function pr(e){let t=ii(e);return Q(t)}function Ai(e){let t=e.reduce((o,a)=>o+a.length,0),r=new Uint8Array(t),n=0;for(let o of e)r.set(o,n),n+=o.length;return r}function Li(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return new TextEncoder().encode(e);if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer);throw new TypeError("invalid data type to be sent")}function Wt(e,t=[]){let r=[];for(let o=0;o<t.length;o++){let a=null;typeof t[o]=="string"&&(a=Ti(t[o])),t[o]instanceof Uint8Array&&(a=hr(t[o])),a&&(t[o]=a,r.push(a))}let n=e(...t);for(let o of r)ot(o);return n}function _r(e,t=[]){let r=Wt(e,t),n=Q(r);return ot(r),n}function Gr(e){if(typeof e=="string"||e instanceof String){let t=new URL(e).protocol;if(!["socks5h:","socks4a:","http:"].includes(t))throw new TypeError("Only socks5h, socks4a, and http proxies are supported.")}}const Ri={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Switch Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Content",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"},Di=`libcurl.js is licensed under the GNU LGPL v3. You can find the license text and source code at the project's git repository: https://github.com/ading2210/libcurl.js

Several C libraries are used, and their licenses are listed below:
- libcurl: curl License (https://curl.se/docs/copyright.html)
- mbedtls: Apache License 2.0 (https://github.com/Mbed-TLS/mbedtls/blob/development/LICENSE)
- cjson: MIT License (https://github.com/DaveGamble/cJSON/blob/master/LICENSE)
- zlib: zlib License (https://www.zlib.net/zlib_license.html)
- brotli: MIT License (https://github.com/google/brotli/blob/master/LICENSE)
- nghttp2: MIT License (https://github.com/nghttp2/nghttp2/blob/master/COPYING)
`;class Yr{constructor(t={}){Ci(!0),this.options=t,this.session_ptr=Yn(),this.active_requests=0,this.event_loop=null,this.requests_list=[],this.to_remove=[],this.end_callback_ptr=s.addFunction((r,n)=>{this.end_callback(r,n)},"vii"),this.headers_callback_ptr=s.addFunction((r,n,o)=>{this.headers_callback(r,n,o)},"viii"),this.data_callback_ptr=s.addFunction((r,n,o)=>{this.data_callback(r,n,o)},"viii"),this.request_callbacks={},this.last_request_id=0}assert_ready(){if(!this.session_ptr)throw new Error("session has been removed")}set_connections(t,r,n=0){this.assert_ready(),Kn(this.session_ptr,t,r,n)}end_callback(t,r){this.active_requests--,this.request_callbacks[t].end(r),delete this.request_callbacks[t]}data_callback(t,r,n){let o=s.HEAPU8.subarray(r,r+n),a=new Uint8Array(o);this.request_callbacks[t].data(a)}headers_callback(t,r,n){let o=s.HEAPU8.subarray(r,r+n),a=new Uint8Array(o);this.request_callbacks[t].headers(a)}create_request(t,r,n,o){this.assert_ready();let a=this.last_request_id++;return this.request_callbacks[a]={end:n,data:r,headers:o},Wt(Vn,[t,a,this.data_callback_ptr,this.end_callback_ptr,this.headers_callback_ptr])}remove_request_now(t){this.session_ptr&&Zn(this.session_ptr,t),Gn(t);let r=this.requests_list.indexOf(t);r!==-1&&this.requests_list.splice(r,1)}remove_request(t){this.assert_ready(),setTimeout(()=>{this.remove_request_now(t)},1)}start_request(t){this.assert_ready(),Xn(this.session_ptr,t),Qr(this.session_ptr),this.active_requests++,this.requests_list.push(t),!this.event_loop&&(this.event_loop=setInterval(()=>{this.event_loop_func()},0))}event_loop_func(){Jn(this.session_ptr)||this.active_requests?Qr(this.session_ptr):(clearInterval(this.event_loop),this.event_loop=null)}close_now(){for(let t of this.requests_list)this.remove_request_now(t);Qn(this.session_ptr),this.session_ptr=null,s.removeFunction(this.end_callback_ptr),s.removeFunction(this.headers_callback_ptr),s.removeFunction(this.data_callback_ptr)}close(){this.assert_ready(),setTimeout(()=>{this.close_now()},1)}stream_response(t,r,n,o){let a,l=!1,d=!1,v=new ReadableStream({start(ne){a=ne}});o instanceof AbortSignal&&o.addEventListener("abort",()=>{l||(l=!0,d&&a.error("The operation was aborted."),j(-1))});let A=ne=>{d||(d=!0,r(v));try{a.enqueue(ne)}catch(N){if(l)return;if(l=!0,N instanceof TypeError)n(-1);else throw N}},j=ne=>{!d&&ne===0&&(d=!0,r(v));try{a.close()}catch{}n(ne)};return this.create_request(t,A,j,()=>{})}}class fn extends Yr{constructor(t={}){super(),this.options=t,this.base_url=void 0,this.set_connections(50,40,6),this.import_cookies()}import_cookies(){this.options.enable_cookies&&(this.cookie_filename=`/cookies_${Math.random()}.txt`,this.options.cookie_jar&&i.writeFile(this.cookie_filename,this.options.cookie_jar))}export_cookies(){if(!this.cookie_filename)return"";try{return i.readFile(this.cookie_filename,{encoding:"utf8"})}catch(t){if(t.errno===44)return"";throw t}}close(){if(this.cookie_filename)try{i.unlink(this.cookie_filename)}catch{}super.close()}request_async(t,r,n){return new Promise((o,a)=>{let l=null,d=null,v=N=>{let Y=_r($n,[l]),ve=this.constructor.create_response(N,JSON.parse(Y));if(r.redirect==="error"&&ve.status>=300&&ve.status<400){A(-2);return}o(ve)},A=N=>{d!=null&&(ot(d),d=null),l!=null&&(N>0?(Vr(`Request "${t}" failed with error code ${N}: ${pr(N)}`),a(new TypeError(`Request failed with error code ${N}: ${pr(N)}`))):N===-1?a(new DOMException("The operation was aborted.")):N===-2&&a(new TypeError("Request failed because redirects were disallowed.")),this.remove_request(l),l=null)};d=n?hr(n):null;let j=n?n.length:0,ne=JSON.stringify(r);l=this.stream_response(t,v,A,r.signal),Wt(Zr,[l,ne,d,j]),this.cookie_filename&&r.credentials!=="omit"&&Wt(Hn,[l,this.cookie_filename]),r.proxy&&_r(qr,[l,r.proxy]),this.start_request(l)})}async fetch(t,r={}){let n=t,o=Object.fromEntries(Object.entries(r));if(t instanceof Request){n=t.url,o.headers=o.headers||Object.fromEntries(t.headers),o.method=o.method||t.method;let l=await t.arrayBuffer();l.byteLength!==0&&(o.body=l)}else typeof n=="string"||n instanceof String?n=new URL(n,this.base_url).href:n instanceof URL?n=n.href:n=""+n;this.options&&this.options.proxy&&(o.proxy=this.options.proxy),Gr(o.proxy);let a=await this.constructor.create_options(o);return await this.request_async(n,o,a)}static create_response(t,r){r.ok=r.status>=200&&r.status<300,r.statusText=Ri[r.status]||"",(r.status===204||r.status===205)&&(t=null);let n=new Response(t,r);for(let a in r)a!="headers"&&Object.defineProperty(n,a,{writable:!1,value:r[a]});Object.defineProperty(n,"headers",{writable:!1,value:new Headers}),Object.defineProperty(n,"raw_headers",{writable:!1,value:r.headers});for(let[a,l]of r.headers)n.headers.append(a,l);let o=Object.getPrototypeOf(n);return n.blob=async()=>{let a=await o.blob.call(n),l=a.type.split(";")[0].trim();return Object.defineProperty(a,"type",{value:l}),a},n}static async create_options(t){let r=null;t.body instanceof ReadableStream&&(t.duplex="half");let n=new Request("http://127.0.0.1/",t),o=await n.arrayBuffer();o.byteLength>0&&(r=new Uint8Array(o));let a=t.headers||{};return a instanceof Headers&&(a=Object.fromEntries(a)),t.headers=new xi(a),t.referrer&&(t.headers.Referer=t.referrer),t.headers["User-Agent"]||(t.headers["User-Agent"]=navigator.userAgent),r&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]=n.headers.get("Content-Type")||""),r}}class dn extends Yr{constructor(t,r=[],n={}){if(!t.startsWith("wss://")&&!t.startsWith("ws://"))throw new SyntaxError("invalid url");super(),this.url=t,this.protocols=r,this.options=n,this.onopen=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onclose=()=>{},this.connected=!1,this.recv_loop=null,this.http_handle=null,this.recv_buffer=[];try{Gr(this.options.proxy),this.set_connections(1,0),this.connect()}catch(o){throw this.cleanup(!0),o}}connect(){let t=()=>{},r=()=>{},n=a=>{a===0?(this.connected=!0,this.recv_loop=setInterval(()=>{let l=this.recv();l!==null&&this.onmessage(l)},0),this.onopen()):this.cleanup(a)},o={headers:this.options.headers||{}};this.protocols&&(typeof this.protocols=="string"&&(this.protocols=[this.protocols]),o.headers["Sec-Websocket-Protocol"]=this.protocols.join(", ")),this.options.verbose&&(o._libcurl_verbose=1),this.http_handle=this.create_request(this.url,t,n,r),Wt(Zr,[this.http_handle,JSON.stringify(o),null,0]),ai(this.http_handle),this.options.proxy&&_r(qr,[this.http_handle,this.options.proxy]),this.start_request(this.http_handle)}recv(){let t=65536,r=si(this.http_handle,t),n=tn(r),o=rn(r),a=nn(r),l=null;if(o===0&&!a){let d=en(r),v=s.HEAPU8.subarray(n,n+d),A=new Uint8Array(v);if(this.recv_buffer.push(A),d!==t&&!li(r)){let j=Ai(this.recv_buffer),ne=ci(r);this.recv_buffer=[],ne?l=new TextDecoder().decode(j):l=j}}else o===0&&a?this.cleanup():o!==81&&this.cleanup(o);return ot(n),ot(r),l}cleanup(t=0){this.connected&&(this.recv_loop&&clearInterval(this.recv_loop),super.close(),this.connected=!1,t?(Vr(`Websocket "${this.url}" encountered error code ${t}: ${pr(t)}`),this.onerror(t)):this.onclose())}send(t){let r=typeof t=="string";if(!this.connected)return;r&&(t=new TextEncoder().encode(t));let n=hr(t),o=t.length;oi(this.http_handle,n,o,r),ot(n)}close(){this.cleanup()}}class Ni extends EventTarget{constructor(t,r=[],n={}){super(),this.url=t,this.protocols=r,this.options=n,this.binaryType="blob",this.onopen=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onclose=()=>{},this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.status=this.CONNECTING,this.socket=null,this.connect()}connect(){this.socket=new dn(this.url,this.protocols,this.options),this.socket.onopen=()=>{this.status=this.OPEN;let t=new Event("open");this.onopen(t),this.dispatchEvent(t)},this.socket.onclose=()=>{this.status=this.CLOSED;let t=new CloseEvent("close");this.dispatchEvent(t),this.onclose(t)},this.socket.onerror=t=>{this.status=this.CLOSED;let r=new Event("error");this.dispatchEvent(r),this.onerror(r)},this.socket.onmessage=t=>{let r;if(typeof t=="string")r=t;else if(this.binaryType=="blob")r=new Blob(t);else if(this.binaryType=="arraybuffer")r=t.buffer;else throw new TypeError("invalid binaryType string");let n=new MessageEvent("message",{data:r});this.onmessage(n),this.dispatchEvent(n)}}send(t){if(this.status===this.CONNECTING)throw new DOMException("websocket not ready yet");this.status!==this.CLOSED&&(t instanceof Blob?(async()=>{let r=await t.arrayBuffer();this.socket.send(new Uint8Array(r))})():typeof t=="string"?this.socket.send(t):this.socket.send(Li(t)))}close(){this.status=this.CLOSING,this.socket.close()}get readyState(){return this.status}get bufferedAmount(){return 0}get protocol(){return this.protocols[0]||""}get extensions(){return""}}class Oi extends Yr{constructor(t,r,n={}){super(),this.hostname=t,this.port=r,this.url=`https://${t}:${r}`,this.options=n,this.onopen=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onclose=()=>{},this.connected=!1,this.recv_loop=null;try{Gr(this.options.proxy),this.set_connections(1,0),this.connect()}catch(o){throw this.cleanup(!0),o}}connect(){let t=()=>{},r=()=>{},n=o=>{o===0?(this.connected=!0,this.recv_loop=setInterval(()=>{let a=this.recv();a!=null&&this.onmessage(a)},0),this.onopen()):this.cleanup(o)};this.http_handle=this.create_request(this.url,t,n,r),ri(this.http_handle,+this.options.verbose),this.options.proxy&&_r(qr,[this.http_handle,this.options.proxy]),this.start_request(this.http_handle)}recv(){let r=ei(this.http_handle,65536),n=tn(r),o=rn(r),a=nn(r);if(o===0&&!a){let l=en(r),d=s.HEAPU8.subarray(n,n+l),v=new Uint8Array(d);this.onmessage(v)}else o===0&&a?this.cleanup():o!=81&&this.cleanup(o);ot(n),ot(r)}send(t){if(!this.connected)return;let r=hr(t),n=t.length;ti(this.http_handle,r,n),ot(r)}cleanup(t=!1){if(this.http_handle)this.remove_request(this.http_handle),this.http_handle=null,super.close();else return;clearInterval(this.recv_loop),this.connected=!1,t?this.onerror(t):this.onclose()}close(){this.cleanup()}}var mr=null,Et=!1,At=null,et=null,jt=null;const Ii="0.7.0",Fi="1.1.1";function Ci(e){if(!Et)throw new Error("wasm not loaded yet, please call libcurl.load_wasm first");if(!mr&&e)throw new Error("websocket proxy url not set, please call libcurl.set_websocket")}function Pi(e){mr=e,typeof s.websocket>"u"&&(s.websocket={}),typeof Ie.websocketArgs<"u"&&(Ie.websocketArgs.url=e),s.websocket.url=e,!jt&&Et&&hn()}function Mi(){if(!Et)return null;if(At)return At;let e=ni(),t=Q(e);return ot(e),At=JSON.parse(t),At.lib=Ii,At.wisp=Fi,At}function Ui(){return Q(Wn())}function hn(){jt=new fn,et.fetch=jt.fetch.bind(jt)}function qi(){Et=!0,jn(),!jt&&mr&&hn();let e=new Event("libcurl_load");et.events.dispatchEvent(e),et.onload(),b&&document.dispatchEvent(e)}function Bi(e){let t=new CustomEvent("libcurl_abort",{detail:e});et.events.dispatchEvent(t),b&&document.dispatchEvent(t)}function zi(e){if(!Et)return(!Be||!_t(Be))&&(Be=e,Jt(),ur()),new Promise((t,r)=>{if(Et)return t();et.events.addEventListener("libcurl_load",()=>{t()},{once:!0}),et.events.addEventListener("libcurl_abort",n=>{r(n.detail)},{once:!0})})}return s.onRuntimeInitialized=qi,s.onAbort=Bi,et={set_websocket:Pi,load_wasm:zi,get_cacert:Ui,get_error_string:pr,wisp:{wisp_connections:zt,WispConnection:cn,WispWebSocket:un},transport:"wisp",WebSocket:Ni,CurlWebSocket:dn,TLSSocket:Oi,HTTPSession:fn,fetch(){throw new Error("not ready")},get copyright(){return Di},get version(){return Mi()},get ready(){return Et},get websocket_url(){return mr},get stdout(){return ee},set stdout(e){ee=e},get stderr(){return J},set stderr(e){J=e},get logger(){return dr},set logger(e){dr=e},onload(){},events:new EventTarget},et}(),TIMEBUF_SIZE=120,gameState=$state({qr:null,ready:!1,loginstate:0,playing:!1,logbuf:[],timebuf:new distExports.RingBuffer(TIMEBUF_SIZE)});function proxyConsole(s,g){const m=console[s].bind(console);console[s]=(...w)=>{let b;try{b=w.join(" ")}catch{b="<failed to render>"}m(...w),gameState.logbuf=[{color:g,log:`[${new Date().toISOString()}]: ${b}`}]}}proxyConsole("error","var(--error)");proxyConsole("warn","var(--warning)");proxyConsole("log","var(--fg)");proxyConsole("info","var(--info)");proxyConsole("debug","var(--fg6)");function hookfmod(){let s=[],g=AudioContext;AudioContext=function(){let m=new g;return s.push(m),m},window.addEventListener("focus",async()=>{for(let m of s)try{await m.resume()}catch{}}),window.addEventListener("blur",async()=>{for(let m of s)try{await m.suspend()}catch{}})}hookfmod();try{crossOriginIsolated||console.log("not crossoriginisolated: using service worker");const s=await navigator.serviceWorker.register("/sw.js",{scope:"/"});s.installing?console.log("Service worker installing"):s.waiting?console.log("Service worker installed"):s.active&&(crossOriginIsolated||(console.log("not crossoriginisolated, reloading"),setTimeout(()=>location.reload(),100)))}catch(s){console.error(`Registration failed with ${s}`)}const wasm=await eval('import("/_framework/dotnet.js")'),dotnet=wasm.dotnet;window.wasm=wasm;let exports;function encryptRSA(s,g,m){const w=(T,D,te)=>{let re=1n;for(T=T%te;D>0n;)D%2n===1n&&(re=re*T%te),D=D>>1n,T=T*T%te;return re},p=((T,D)=>{const te=T.length,re=Math.ceil(D.toString(16).length/2);if(te>re-11)throw new Error("Message too long for RSA encryption");const le=re-te-3,P=Array(le).fill(255);return BigInt("0x"+["00","02",...P.map(ee=>ee.toString(16).padStart(2,"0")),"00",...Array.from(T).map(ee=>ee.toString(16).padStart(2,"0"))].join(""))})(s,g);let S=w(p,m,g).toString(16);return S.length%2&&(S="0"+S),new Uint8Array(Array.from(S.match(/.{2}/g)||[]).map(T=>parseInt(T,16)))}const realFetch=window.fetch,wisp_url="wss://staging2.velzie.rip/";async function preInit(){console.debug("initializing dotnet");const s=await dotnet.withConfig({pthreadPoolInitialSize:16}).create();console.log("loading libcurl"),await libcurl.load_wasm("https://cdn.jsdelivr.net/npm/libcurl.js@0.6.20/libcurl.wasm"),libcurl.set_websocket(wisp_url),window.WebSocket=new Proxy(WebSocket,{construct(m,w,b){return w[0]===wisp_url?Reflect.construct(m,w,b):new libcurl.WebSocket(...w)}}),window.fetch=libcurl.fetch;const g=s.getConfig();exports=await s.getAssemblyExports(g.mainAssemblyName),window.exports=exports,s.setModuleImports("interop.js",{encryptrsa:(m,w,b)=>{let p=BigInt("0x"+m),y=BigInt("0x"+w),S=encryptRSA(b,p,y);return new Uint8Array(S)}}),s.setModuleImports("depot.js",{newqr:m=>{console.log("QR DATA"+m),gameState.qr=m}}),self.wasm={Module:dotnet.instance.Module,dotnet,runtime:s,config:g,exports},console.debug("PreInit..."),await s.runMain(),await exports.Program.PreInit(),console.debug("dotnet initialized"),gameState.ready=!0}async function initSteam(s,g,m){return await exports.Program.InitSteam(s,g,m)}async function downloadApp(){return await exports.Program.DownloadApp()}async function play(){gameState.playing=!0;const s=performance.now();console.debug("Init..."),await exports.Program.Init(screen.width,screen.height);const g=performance.now();console.debug(`Init : ${(g-s).toFixed(2)}ms`),console.debug("MainLoop...");const m=async()=>{const w=performance.now(),b=await exports.Program.MainLoop(),p=performance.now();if(gameState.timebuf.add(p-w),!b){console.debug("Cleanup..."),gameState.timebuf.clear(),await exports.Program.Cleanup(),gameState.ready=!1,gameState.playing=!1;return}requestAnimationFrame(m)};requestAnimationFrame(m)}useChange([gameState.playing],()=>{try{gameState.playing?navigator.keyboard.lock():navigator.keyboard.unlock()}catch(s){console.log("keyboard lock error:",s)}});document.addEventListener("keydown",s=>{gameState.playing&&["Space","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab"].includes(s.code)&&s.preventDefault()});const Icon=function(){return this._leak=!0,this.mount=()=>{this.root.innerHTML=this.icon.body,useChange([this.icon],()=>{this.root.innerHTML=this.icon.body})},h("svg",{width:"1em",height:"1em",viewBox:use`0 0 ${this.icon.width} ${this.icon.height}`,xmlns:"http://www.w3.org/2000/svg",class:`component-icon ${this.class}`})},Button=function(){return this._leak=!0,this.css=`
		button {
			display: flex;
			align-items: center;
			justify-content: center;

			width: 100%;
			height: 100%;

			padding: 0.5rem;

			transition: background 0.25s;
			font-family: var(--font-body);
			cursor: pointer;
			font-size: 13pt;
		}

		button.icon-full svg, button.icon-left svg {
			width: 1.5rem;
			height: 1.5rem;
		}
		button.icon-full {
		}
		button.icon-left {
			gap: 0.25rem;
		}

		button.type-primary {
			background: var(--bg);
			color: var(--fg);
		}
		button.type-normal {
			background: var(--bg);
			color: var(--fg);
		}
		button.type-listitem {
			background: transparent;
			color: var(--fg);
			border-radius: 0.5rem;
		}
		button.type-listaction {
			background: var(--bg);
			color: var(--fg);
		}

		button.type-primary:not(:disabled):hover {
			background: color-mix(in srgb, var(--bg) 95%, white);
		}
		button.type-primary:not(:disabled):active {
			background: color-mix(in srgb, var(--bg) 95%, white);
		}
		button.type-normal:not(:disabled):hover {
			background: var(--surface2);
		}
		button.type-normal:not(:disabled):active {
			background: var(--surface3);
		}
		button.type-listitem:not(:disabled):hover {
			background: var(--surface1);
		}
		button.type-listitem:not(:disabled):active {
			background: var(--surface2);
		}
		button.type-listaction:not(:disabled):hover {
			background: var(--surface3);
		}
		button.type-listaction:not(:disabled):active {
			background: var(--surface4);
		}

		button:disabled {
			background: var(--surface0);
			cursor: not-allowed;
		}
	`,h("div",null,h("button",{"on:click":this["on:click"],class:`tcontainer icon-${this.icon} type-${this.type} ${this.class}`,disabled:use(this.disabled),title:use(this.title)},use(this.children)))},Link=function(){return h("a",{href:this.href,class:"component-link",target:"_blank"},this.children)};var tarStream={},events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var s=typeof Reflect=="object"?Reflect:null,g=s&&typeof s.apply=="function"?s.apply:function(I,M,X){return Function.prototype.apply.call(I,M,X)},m;s&&typeof s.ownKeys=="function"?m=s.ownKeys:Object.getOwnPropertySymbols?m=function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:m=function(I){return Object.getOwnPropertyNames(I)};function w(q){console&&console.warn&&console.warn(q)}var b=Number.isNaN||function(I){return I!==I};function p(){p.init.call(this)}events.exports=p,events.exports.once=ae,p.EventEmitter=p,p.prototype._events=void 0,p.prototype._eventsCount=0,p.prototype._maxListeners=void 0;var y=10;function S(q){if(typeof q!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof q)}Object.defineProperty(p,"defaultMaxListeners",{enumerable:!0,get:function(){return y},set:function(q){if(typeof q!="number"||q<0||b(q))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+q+".");y=q}}),p.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},p.prototype.setMaxListeners=function(I){if(typeof I!="number"||I<0||b(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this};function T(q){return q._maxListeners===void 0?p.defaultMaxListeners:q._maxListeners}p.prototype.getMaxListeners=function(){return T(this)},p.prototype.emit=function(I){for(var M=[],X=1;X<arguments.length;X++)M.push(arguments[X]);var U=I==="error",L=this._events;if(L!==void 0)U=U&&L.error===void 0;else if(!U)return!1;if(U){var E;if(M.length>0&&(E=M[0]),E instanceof Error)throw E;var z=new Error("Unhandled error."+(E?" ("+E.message+")":""));throw z.context=E,z}var u=L[I];if(u===void 0)return!1;if(typeof u=="function")g(u,this,M);else for(var we=u.length,Te=ee(u,we),X=0;X<we;++X)g(Te[X],this,M);return!0};function D(q,I,M,X){var U,L,E;if(S(M),L=q._events,L===void 0?(L=q._events=Object.create(null),q._eventsCount=0):(L.newListener!==void 0&&(q.emit("newListener",I,M.listener?M.listener:M),L=q._events),E=L[I]),E===void 0)E=L[I]=M,++q._eventsCount;else if(typeof E=="function"?E=L[I]=X?[M,E]:[E,M]:X?E.unshift(M):E.push(M),U=T(q),U>0&&E.length>U&&!E.warned){E.warned=!0;var z=new Error("Possible EventEmitter memory leak detected. "+E.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");z.name="MaxListenersExceededWarning",z.emitter=q,z.type=I,z.count=E.length,w(z)}return q}p.prototype.addListener=function(I,M){return D(this,I,M,!1)},p.prototype.on=p.prototype.addListener,p.prototype.prependListener=function(I,M){return D(this,I,M,!0)};function te(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function re(q,I,M){var X={fired:!1,wrapFn:void 0,target:q,type:I,listener:M},U=te.bind(X);return U.listener=M,X.wrapFn=U,U}p.prototype.once=function(I,M){return S(M),this.on(I,re(this,I,M)),this},p.prototype.prependOnceListener=function(I,M){return S(M),this.prependListener(I,re(this,I,M)),this},p.prototype.removeListener=function(I,M){var X,U,L,E,z;if(S(M),U=this._events,U===void 0)return this;if(X=U[I],X===void 0)return this;if(X===M||X.listener===M)--this._eventsCount===0?this._events=Object.create(null):(delete U[I],U.removeListener&&this.emit("removeListener",I,X.listener||M));else if(typeof X!="function"){for(L=-1,E=X.length-1;E>=0;E--)if(X[E]===M||X[E].listener===M){z=X[E].listener,L=E;break}if(L<0)return this;L===0?X.shift():J(X,L),X.length===1&&(U[I]=X[0]),U.removeListener!==void 0&&this.emit("removeListener",I,z||M)}return this},p.prototype.off=p.prototype.removeListener,p.prototype.removeAllListeners=function(I){var M,X,U;if(X=this._events,X===void 0)return this;if(X.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):X[I]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete X[I]),this;if(arguments.length===0){var L=Object.keys(X),E;for(U=0;U<L.length;++U)E=L[U],E!=="removeListener"&&this.removeAllListeners(E);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(M=X[I],typeof M=="function")this.removeListener(I,M);else if(M!==void 0)for(U=M.length-1;U>=0;U--)this.removeListener(I,M[U]);return this};function le(q,I,M){var X=q._events;if(X===void 0)return[];var U=X[I];return U===void 0?[]:typeof U=="function"?M?[U.listener||U]:[U]:M?O(U):ee(U,U.length)}p.prototype.listeners=function(I){return le(this,I,!0)},p.prototype.rawListeners=function(I){return le(this,I,!1)},p.listenerCount=function(q,I){return typeof q.listenerCount=="function"?q.listenerCount(I):P.call(q,I)},p.prototype.listenerCount=P;function P(q){var I=this._events;if(I!==void 0){var M=I[q];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}p.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]};function ee(q,I){for(var M=new Array(I),X=0;X<I;++X)M[X]=q[X];return M}function J(q,I){for(;I+1<q.length;I++)q[I]=q[I+1];q.pop()}function O(q){for(var I=new Array(q.length),M=0;M<I.length;++M)I[M]=q[M].listener||q[M];return I}function ae(q,I){return new Promise(function(M,X){function U(E){q.removeListener(I,L),X(E)}function L(){typeof q.removeListener=="function"&&q.removeListener("error",U),M([].slice.call(arguments))}Le(q,I,L,{once:!0}),I!=="error"&&ge(q,U,{once:!0})})}function ge(q,I,M){typeof q.on=="function"&&Le(q,"error",I,M)}function Le(q,I,M,X){if(typeof q.on=="function")X.once?q.once(I,M):q.on(I,M);else if(typeof q.addEventListener=="function")q.addEventListener(I,function U(L){X.once&&q.removeEventListener(I,U),M(L)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof q)}return events.exports}var fixedSize,hasRequiredFixedSize;function requireFixedSize(){return hasRequiredFixedSize||(hasRequiredFixedSize=1,fixedSize=class{constructor(g){if(!(g>0)||g-1&g)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(g),this.mask=g-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(g){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=g,this.top=this.top+1&this.mask,!0)}shift(){const g=this.buffer[this.btm];if(g!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,g}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}),fixedSize}var fastFifo,hasRequiredFastFifo;function requireFastFifo(){if(hasRequiredFastFifo)return fastFifo;hasRequiredFastFifo=1;const s=requireFixedSize();return fastFifo=class{constructor(m){this.hwm=m||16,this.head=new s(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(m){if(this.length++,!this.head.push(m)){const w=this.head;this.head=w.next=new s(2*this.head.buffer.length),this.head.push(m)}}shift(){this.length!==0&&this.length--;const m=this.tail.shift();if(m===void 0&&this.tail.next){const w=this.tail.next;return this.tail.next=null,this.tail=w,this.tail.shift()}return m}peek(){const m=this.tail.peek();return m===void 0&&this.tail.next?this.tail.next.peek():m}isEmpty(){return this.length===0}},fastFifo}var browserDecoder,hasRequiredBrowserDecoder;function requireBrowserDecoder(){return hasRequiredBrowserDecoder||(hasRequiredBrowserDecoder=1,browserDecoder=class{constructor(g){this.decoder=new TextDecoder(g==="utf16le"?"utf16-le":g)}get remaining(){return-1}decode(g){return this.decoder.decode(g,{stream:!0})}flush(){return this.decoder.decode(new Uint8Array(0))}}),browserDecoder}var textDecoder,hasRequiredTextDecoder;function requireTextDecoder(){if(hasRequiredTextDecoder)return textDecoder;hasRequiredTextDecoder=1;const s=requireBrowserDecoder(),g=requireBrowserDecoder();textDecoder=class{constructor(b="utf8"){switch(this.encoding=m(b),this.encoding){case"utf8":this.decoder=new g;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new s(this.encoding)}}get remaining(){return this.decoder.remaining}push(b){return typeof b=="string"?b:this.decoder.decode(b)}write(b){return this.push(b)}end(b){let p="";return b&&(p=this.push(b)),p+=this.decoder.flush(),p}};function m(w){switch(w=w.toLowerCase(),w){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return w;default:throw new Error("Unknown encoding: "+w)}}return textDecoder}var streamx,hasRequiredStreamx;function requireStreamx(){if(hasRequiredStreamx)return streamx;hasRequiredStreamx=1;const{EventEmitter:s}=requireEvents(),g=new Error("Stream was destroyed"),m=new Error("Premature close"),w=requireFastFifo(),b=requireTextDecoder(),p=(1<<29)-1,y=1,S=2,T=4,D=8,te=p^y,re=p^S,le=16,P=32,ee=64,J=128,O=256,ae=512,ge=1024,Le=2048,q=4096,I=8192,M=16384,X=32768,U=65536,L=131072,E=O|ae,z=le|U,u=ee|le,we=q|J,Te=O|L,He=p^le,R=p^ee,H=p^(ee|U),se=p^U,V=p^O,x=p^(J|I),F=p^ge,Z=p^E,ie=p^X,K=p^P,G=p^L,Q=p^Te,oe=1<<18,Ne=2<<18,De=4<<18,be=8<<18,Ue=16<<18,Pe=32<<18,qe=64<<18,Ce=128<<18,Ke=256<<18,_=512<<18,k=1024<<18,f=p^(oe|Ke),W=p^De,ue=p^(oe|_),ke=p^Ue,Me=p^be,Ve=p^Ce,$t=p^Ne,ht=p^k,ct=le|oe,Lt=p^ct,St=M|Pe,Ye=T|D|S,Ge=Ye|y,Vt=Ye|St,gr=W&R,kt=Ce|X,yr=kt&Lt,Gt=Ge|yr,at=Ge|ge|M,nt=Ge|M|J,pt=Ge|ge|J,ut=Ge|q|J|I,Yt=Ge|le|ge|M|U|L,Rt=Ye|ge|M,xt=P|Ge|X|ee,ze=X|y,vr=Ge|_|Pe,_t=be|Ue,Kt=be|oe,fe=be|Ue|Ge|oe,Be=Ge|oe|be|k,Xt=De|oe,wr=oe|Ke,Jt=Ge|_|Kt|Pe,Re=Ue|Ye|_|Pe,$e=Ne|Ge|Ce|De,Dt=_|Pe|Ye,Tt=Symbol.asyncIterator||Symbol("asyncIterator");class Zt{constructor(c,{highWaterMark:B=16384,map:pe=null,mapWritable:Se,byteLength:de,byteLengthWritable:Fe}={}){this.stream=c,this.queue=new w,this.highWaterMark=B,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=Fe||de||rr,this.map=Se||pe,this.afterWrite=kr.bind(this),this.afterUpdateNextTick=er.bind(this)}get ended(){return(this.stream._duplexState&Pe)!==0}push(c){return this.stream._duplexState&Dt?!1:(this.map!==null&&(c=this.map(c)),this.buffered+=this.byteLength(c),this.queue.push(c),this.buffered<this.highWaterMark?(this.stream._duplexState|=be,!0):(this.stream._duplexState|=_t,!1))}shift(){const c=this.queue.shift();return this.buffered-=this.byteLength(c),this.buffered===0&&(this.stream._duplexState&=Me),c}end(c){typeof c=="function"?this.stream.once("finish",c):c!=null&&this.push(c),this.stream._duplexState=(this.stream._duplexState|_)&W}autoBatch(c,B){const pe=[],Se=this.stream;for(pe.push(c);(Se._duplexState&Be)===Kt;)pe.push(Se._writableState.shift());if(Se._duplexState&Ge)return B(null);Se._writev(pe,B)}update(){const c=this.stream;c._duplexState|=Ne;do{for(;(c._duplexState&Be)===be;){const B=this.shift();c._duplexState|=wr,c._write(B,this.afterWrite)}c._duplexState&Xt||this.updateNonPrimary()}while(this.continueUpdate()===!0);c._duplexState&=$t}updateNonPrimary(){const c=this.stream;if((c._duplexState&Jt)===_){c._duplexState=c._duplexState|oe,c._final(Sr.bind(this));return}if((c._duplexState&Ye)===T){c._duplexState&kt||(c._duplexState|=ct,c._destroy(Ae.bind(this)));return}(c._duplexState&Gt)===y&&(c._duplexState=(c._duplexState|ct)&te,c._open(me.bind(this)))}continueUpdate(){return this.stream._duplexState&Ce?(this.stream._duplexState&=Ve,!0):!1}updateCallback(){(this.stream._duplexState&$e)===De?this.update():this.updateNextTick()}updateNextTick(){this.stream._duplexState&Ce||(this.stream._duplexState|=Ce,this.stream._duplexState&Ne||queueMicrotask(this.afterUpdateNextTick))}}class Xe{constructor(c,{highWaterMark:B=16384,map:pe=null,mapReadable:Se,byteLength:de,byteLengthReadable:Fe}={}){this.stream=c,this.queue=new w,this.highWaterMark=B===0?1:B,this.buffered=0,this.readAhead=B>0,this.error=null,this.pipeline=null,this.byteLength=Fe||de||rr,this.map=Se||pe,this.pipeTo=null,this.afterRead=rt.bind(this),this.afterUpdateNextTick=lt.bind(this)}get ended(){return(this.stream._duplexState&M)!==0}pipe(c,B){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof B!="function"&&(B=null),this.stream._duplexState|=ae,this.pipeTo=c,this.pipeline=new Qt(this.stream,c,B),B&&this.stream.on("error",nr),it(c))c._writableState.pipeline=this.pipeline,B&&c.on("error",nr),c.on("finish",this.pipeline.finished.bind(this.pipeline));else{const pe=this.pipeline.done.bind(this.pipeline,c),Se=this.pipeline.done.bind(this.pipeline,c,null);c.on("error",pe),c.on("close",Se),c.on("finish",this.pipeline.finished.bind(this.pipeline))}c.on("drain",Er.bind(this)),this.stream.emit("piping",c),c.emit("pipe",this.stream)}push(c){const B=this.stream;return c===null?(this.highWaterMark=0,B._duplexState=(B._duplexState|ge)&H,!1):this.map!==null&&(c=this.map(c),c===null)?(B._duplexState&=se,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(c),this.queue.push(c),B._duplexState=(B._duplexState|J)&se,this.buffered<this.highWaterMark)}shift(){const c=this.queue.shift();return this.buffered-=this.byteLength(c),this.buffered===0&&(this.stream._duplexState&=x),c}unshift(c){const B=[this.map!==null?this.map(c):c];for(;this.buffered>0;)B.push(this.shift());for(let pe=0;pe<B.length-1;pe++){const Se=B[pe];this.buffered+=this.byteLength(Se),this.queue.push(Se)}this.push(B[B.length-1])}read(){const c=this.stream;if((c._duplexState&nt)===J){const B=this.shift();return this.pipeTo!==null&&this.pipeTo.write(B)===!1&&(c._duplexState&=Z),c._duplexState&Le&&c.emit("data",B),B}return this.readAhead===!1&&(c._duplexState|=L,this.updateNextTick()),null}drain(){const c=this.stream;for(;(c._duplexState&nt)===J&&c._duplexState&E;){const B=this.shift();this.pipeTo!==null&&this.pipeTo.write(B)===!1&&(c._duplexState&=Z),c._duplexState&Le&&c.emit("data",B)}}update(){const c=this.stream;c._duplexState|=P;do{for(this.drain();this.buffered<this.highWaterMark&&(c._duplexState&Yt)===L;)c._duplexState|=z,c._read(this.afterRead),this.drain();(c._duplexState&ut)===we&&(c._duplexState|=I,c.emit("readable")),c._duplexState&u||this.updateNonPrimary()}while(this.continueUpdate()===!0);c._duplexState&=K}updateNonPrimary(){const c=this.stream;if((c._duplexState&pt)===ge&&(c._duplexState=(c._duplexState|M)&F,c.emit("end"),(c._duplexState&Vt)===St&&(c._duplexState|=T),this.pipeTo!==null&&this.pipeTo.end()),(c._duplexState&Ye)===T){c._duplexState&kt||(c._duplexState|=ct,c._destroy(Ae.bind(this)));return}(c._duplexState&Gt)===y&&(c._duplexState=(c._duplexState|ct)&te,c._open(me.bind(this)))}continueUpdate(){return this.stream._duplexState&X?(this.stream._duplexState&=ie,!0):!1}updateCallback(){(this.stream._duplexState&xt)===ee?this.update():this.updateNextTick()}updateNextTickIfOpen(){this.stream._duplexState&ze||(this.stream._duplexState|=X,this.stream._duplexState&P||queueMicrotask(this.afterUpdateNextTick))}updateNextTick(){this.stream._duplexState&X||(this.stream._duplexState|=X,this.stream._duplexState&P||queueMicrotask(this.afterUpdateNextTick))}}class br{constructor(c){this.data=null,this.afterTransform=Tr.bind(c),this.afterFinal=null}}class Qt{constructor(c,B,pe){this.from=c,this.to=B,this.afterPipe=pe,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(c,B){if(B&&(this.error=B),c===this.to&&(this.to=null,this.from!==null)){(!(this.from._duplexState&M)||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}if(c===this.from&&(this.from=null,this.to!==null)){c._duplexState&M||this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}}function Er(){this.stream._duplexState|=ae,this.updateCallback()}function Sr($){const c=this.stream;$&&c.destroy($),c._duplexState&Ye||(c._duplexState|=Pe,c.emit("finish")),(c._duplexState&Vt)===St&&(c._duplexState|=T),c._duplexState&=ue,c._duplexState&Ne?this.updateNextTick():this.update()}function Ae($){const c=this.stream;!$&&this.error!==g&&($=this.error),$&&c.emit("error",$),c._duplexState|=D,c.emit("close");const B=c._readableState,pe=c._writableState;if(B!==null&&B.pipeline!==null&&B.pipeline.done(c,$),pe!==null){for(;pe.drains!==null&&pe.drains.length>0;)pe.drains.shift().resolve(!1);pe.pipeline!==null&&pe.pipeline.done(c,$)}}function kr($){const c=this.stream;$&&c.destroy($),c._duplexState&=f,this.drains!==null&&xr(this.drains),(c._duplexState&fe)===Ue&&(c._duplexState&=ke,(c._duplexState&qe)===qe&&c.emit("drain")),this.updateCallback()}function rt($){$&&this.stream.destroy($),this.stream._duplexState&=He,this.readAhead===!1&&!(this.stream._duplexState&O)&&(this.stream._duplexState&=G),this.updateCallback()}function lt(){this.stream._duplexState&P||(this.stream._duplexState&=ie,this.update())}function er(){this.stream._duplexState&Ne||(this.stream._duplexState&=Ve,this.update())}function xr($){for(let c=0;c<$.length;c++)--$[c].writes===0&&($.shift().resolve(!0),c--)}function me($){const c=this.stream;$&&c.destroy($),c._duplexState&T||(c._duplexState&at||(c._duplexState|=ee),c._duplexState&vr||(c._duplexState|=De),c.emit("open")),c._duplexState&=Lt,c._writableState!==null&&c._writableState.updateCallback(),c._readableState!==null&&c._readableState.updateCallback()}function Tr($,c){c!=null&&this.push(c),this._writableState.afterWrite($)}function Ar($){this._readableState!==null&&($==="data"&&(this._duplexState|=Le|Te,this._readableState.updateNextTick()),$==="readable"&&(this._duplexState|=q,this._readableState.updateNextTick())),this._writableState!==null&&$==="drain"&&(this._duplexState|=qe,this._writableState.updateNextTick())}class mt extends s{constructor(c){super(),this._duplexState=0,this._readableState=null,this._writableState=null,c&&(c.open&&(this._open=c.open),c.destroy&&(this._destroy=c.destroy),c.predestroy&&(this._predestroy=c.predestroy),c.signal&&c.signal.addEventListener("abort",Or.bind(this))),this.on("newListener",Ar)}_open(c){c(null)}_destroy(c){c(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&D)!==0}get destroying(){return(this._duplexState&Ye)!==0}destroy(c){this._duplexState&Ye||(c||(c=g),this._duplexState=(this._duplexState|T)&gr,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=c),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=c),this._duplexState|=S,this._predestroy(),this._duplexState&=re,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}}class i extends mt{constructor(c){super(c),this._duplexState|=y|Pe|L,this._readableState=new Xe(this,c),c&&(this._readableState.readAhead===!1&&(this._duplexState&=G),c.read&&(this._read=c.read),c.eagerOpen&&this._readableState.updateNextTick(),c.encoding&&this.setEncoding(c.encoding))}setEncoding(c){const B=new b(c),pe=this._readableState.map||Lr;return this._readableState.map=Se,this;function Se(de){const Fe=B.push(de);return Fe===""&&(de.byteLength!==0||B.remaining>0)?null:pe(Fe)}}_read(c){c(null)}pipe(c,B){return this._readableState.updateNextTick(),this._readableState.pipe(c,B),c}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(c){return this._readableState.updateNextTickIfOpen(),this._readableState.push(c)}unshift(c){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(c)}resume(){return this._duplexState|=Te,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?Q:V,this}static _fromAsyncIterator(c,B){let pe;const Se=new i({...B,read(Fe){c.next().then(de).then(Fe.bind(null,null)).catch(Fe)},predestroy(){pe=c.return()},destroy(Fe){if(!pe)return Fe(null);pe.then(Fe.bind(null,null)).catch(Fe)}});return Se;function de(Fe){Fe.done?Se.push(null):Se.push(Fe.value)}}static from(c,B){if(Rr(c))return c;if(c[Tt])return this._fromAsyncIterator(c[Tt](),B);Array.isArray(c)||(c=c===void 0?[]:[c]);let pe=0;return new i({...B,read(Se){this.push(pe===c.length?null:c[pe++]),Se(null)}})}static isBackpressured(c){return(c._duplexState&Rt)!==0||c._readableState.buffered>=c._readableState.highWaterMark}static isPaused(c){return(c._duplexState&O)===0}[Tt](){const c=this;let B=null,pe=null,Se=null;return this.on("error",xe=>{B=xe}),this.on("readable",de),this.on("close",Fe),{[Tt](){return this},next(){return new Promise(function(xe,Qe){pe=xe,Se=Qe;const st=c.read();st!==null?dt(st):c._duplexState&D&&dt(null)})},return(){return yt(null)},throw(xe){return yt(xe)}};function de(){pe!==null&&dt(c.read())}function Fe(){pe!==null&&dt(null)}function dt(xe){Se!==null&&(B?Se(B):xe===null&&!(c._duplexState&M)?Se(g):pe({value:xe,done:xe===null}),Se=pe=null)}function yt(xe){return c.destroy(xe),new Promise((Qe,st)=>{if(c._duplexState&D)return Qe({value:void 0,done:!0});c.once("close",function(){xe?st(xe):Qe({value:void 0,done:!0})})})}}}class ye extends mt{constructor(c){super(c),this._duplexState|=y|M,this._writableState=new Zt(this,c),c&&(c.writev&&(this._writev=c.writev),c.write&&(this._write=c.write),c.final&&(this._final=c.final),c.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=k}uncork(){this._duplexState&=ht,this._writableState.updateNextTick()}_writev(c,B){B(null)}_write(c,B){this._writableState.autoBatch(c,B)}_final(c){c(null)}static isBackpressured(c){return(c._duplexState&Re)!==0}static drained(c){if(c.destroyed)return Promise.resolve(!1);const B=c._writableState,Se=(Pt(c)?Math.min(1,B.queue.length):B.queue.length)+(c._duplexState&Ke?1:0);return Se===0?Promise.resolve(!0):(B.drains===null&&(B.drains=[]),new Promise(de=>{B.drains.push({writes:Se,resolve:de})}))}write(c){return this._writableState.updateNextTick(),this._writableState.push(c)}end(c){return this._writableState.updateNextTick(),this._writableState.end(c),this}}class Nt extends i{constructor(c){super(c),this._duplexState=y|this._duplexState&L,this._writableState=new Zt(this,c),c&&(c.writev&&(this._writev=c.writev),c.write&&(this._write=c.write),c.final&&(this._final=c.final))}cork(){this._duplexState|=k}uncork(){this._duplexState&=ht,this._writableState.updateNextTick()}_writev(c,B){B(null)}_write(c,B){this._writableState.autoBatch(c,B)}_final(c){c(null)}write(c){return this._writableState.updateNextTick(),this._writableState.push(c)}end(c){return this._writableState.updateNextTick(),this._writableState.end(c),this}}class Ie extends Nt{constructor(c){super(c),this._transformState=new br(this),c&&(c.transform&&(this._transform=c.transform),c.flush&&(this._flush=c.flush))}_write(c,B){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=c:this._transform(c,this._transformState.afterTransform)}_read(c){if(this._transformState.data!==null){const B=this._transformState.data;this._transformState.data=null,c(null),this._transform(B,this._transformState.afterTransform)}else c(null)}destroy(c){super.destroy(c),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(c,B){B(null,c)}_flush(c){c(null)}_final(c){this._transformState.afterFinal=c,this._flush(tr.bind(this))}}class ft extends Ie{}function tr($,c){const B=this._transformState.afterFinal;if($)return B($);c!=null&&this.push(c),this.push(null),B(null)}function Ot(...$){return new Promise((c,B)=>It(...$,pe=>{if(pe)return B(pe);c()}))}function It($,...c){const B=Array.isArray($)?[...$,...c]:[$,...c],pe=B.length&&typeof B[B.length-1]=="function"?B.pop():null;if(B.length<2)throw new Error("Pipeline requires at least 2 streams");let Se=B[0],de=null,Fe=null;for(let xe=1;xe<B.length;xe++)de=B[xe],it(Se)?Se.pipe(de,yt):(dt(Se,!0,xe>1,yt),Se.pipe(de)),Se=de;if(pe){let xe=!1;const Qe=it(de)||!!(de._writableState&&de._writableState.autoDestroy);de.on("error",st=>{Fe===null&&(Fe=st)}),de.on("finish",()=>{xe=!0,Qe||pe(Fe)}),Qe&&de.on("close",()=>pe(Fe||(xe?null:m)))}return de;function dt(xe,Qe,st,Mt){xe.on("error",Mt),xe.on("close",Ir);function Ir(){if(xe._readableState&&!xe._readableState.ended||st&&xe._writableState&&!xe._writableState.ended)return Mt(m)}}function yt(xe){if(!(!xe||Fe)){Fe=xe;for(const Qe of B)Qe.destroy(xe)}}}function Lr($){return $}function gt($){return!!$._readableState||!!$._writableState}function it($){return typeof $._duplexState=="number"&&gt($)}function Ft($){return!!$._readableState&&$._readableState.ended}function Je($){return!!$._writableState&&$._writableState.ended}function Ct($,c={}){const B=$._readableState&&$._readableState.error||$._writableState&&$._writableState.error;return!c.all&&B===g?null:B}function Rr($){return it($)&&$.readable}function Dr($){return($._duplexState&y)!==y||($._duplexState&kt)!==0}function Nr($){return typeof $=="object"&&$!==null&&typeof $.byteLength=="number"}function rr($){return Nr($)?$.byteLength:1024}function nr(){}function Or(){this.destroy(new Error("Stream aborted."))}function Pt($){return $._writev!==ye.prototype._writev&&$._writev!==Nt.prototype._writev}return streamx={pipeline:It,pipelinePromise:Ot,isStream:gt,isStreamx:it,isEnded:Ft,isFinished:Je,isDisturbed:Dr,getStreamError:Ct,Stream:mt,Writable:ye,Readable:i,Duplex:Nt,Transform:Ie,PassThrough:ft},streamx}var browser={exports:{}},ascii,hasRequiredAscii;function requireAscii(){if(hasRequiredAscii)return ascii;hasRequiredAscii=1;function s(w){return w.length}function g(w){const b=w.byteLength;let p="";for(let y=0;y<b;y++)p+=String.fromCharCode(w[y]);return p}function m(w,b,p=0,y=s(b)){const S=Math.min(y,w.byteLength-p);for(let T=0;T<S;T++)w[p+T]=b.charCodeAt(T);return S}return ascii={byteLength:s,toString:g,write:m},ascii}var base64,hasRequiredBase64;function requireBase64(){if(hasRequiredBase64)return base64;hasRequiredBase64=1;const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=new Uint8Array(256);for(let p=0;p<s.length;p++)g[s.charCodeAt(p)]=p;g[45]=62,g[95]=63;function m(p){let y=p.length;return p.charCodeAt(y-1)===61&&y--,y>1&&p.charCodeAt(y-1)===61&&y--,y*3>>>2}function w(p){const y=p.byteLength;let S="";for(let T=0;T<y;T+=3)S+=s[p[T]>>2]+s[(p[T]&3)<<4|p[T+1]>>4]+s[(p[T+1]&15)<<2|p[T+2]>>6]+s[p[T+2]&63];return y%3===2?S=S.substring(0,S.length-1)+"=":y%3===1&&(S=S.substring(0,S.length-2)+"=="),S}function b(p,y,S=0,T=m(y)){const D=Math.min(T,p.byteLength-S);for(let te=0,re=0;re<D;te+=4){const le=g[y.charCodeAt(te)],P=g[y.charCodeAt(te+1)],ee=g[y.charCodeAt(te+2)],J=g[y.charCodeAt(te+3)];p[re++]=le<<2|P>>4,p[re++]=(P&15)<<4|ee>>2,p[re++]=(ee&3)<<6|J&63}return D}return base64={byteLength:m,toString:w,write:b},base64}var hex,hasRequiredHex;function requireHex(){if(hasRequiredHex)return hex;hasRequiredHex=1;function s(b){return b.length>>>1}function g(b){const p=b.byteLength;b=new DataView(b.buffer,b.byteOffset,p);let y="",S=0;for(let T=p-p%4;S<T;S+=4)y+=b.getUint32(S).toString(16).padStart(8,"0");for(;S<p;S++)y+=b.getUint8(S).toString(16).padStart(2,"0");return y}function m(b,p,y=0,S=s(p)){const T=Math.min(S,b.byteLength-y);for(let D=0;D<T;D++){const te=w(p.charCodeAt(D*2)),re=w(p.charCodeAt(D*2+1));if(te===void 0||re===void 0)return b.subarray(0,D);b[y+D]=te<<4|re}return T}hex={byteLength:s,toString:g,write:m};function w(b){if(b>=48&&b<=57)return b-48;if(b>=65&&b<=70)return b-65+10;if(b>=97&&b<=102)return b-97+10}return hex}var utf8,hasRequiredUtf8;function requireUtf8(){if(hasRequiredUtf8)return utf8;hasRequiredUtf8=1;function s(w){let b=0;for(let p=0,y=w.length;p<y;p++){const S=w.charCodeAt(p);if(S>=55296&&S<=56319&&p+1<y){const T=w.charCodeAt(p+1);if(T>=56320&&T<=57343){b+=4,p++;continue}}S<=127?b+=1:S<=2047?b+=2:b+=3}return b}let g;if(typeof TextDecoder<"u"){const w=new TextDecoder;g=function(p){return w.decode(p)}}else g=function(b){const p=b.byteLength;let y="",S=0;for(;S<p;){let T=b[S];if(T<=127){y+=String.fromCharCode(T),S++;continue}let D=0,te=0;if(T<=223?(D=1,te=T&31):T<=239?(D=2,te=T&15):T<=244&&(D=3,te=T&7),p-S-D>0){let re=0;for(;re<D;)T=b[S+re+1],te=te<<6|T&63,re+=1}else te=65533,D=p-S;y+=String.fromCodePoint(te),S+=D+1}return y};let m;if(typeof TextEncoder<"u"){const w=new TextEncoder;m=function(p,y,S=0,T=s(y)){const D=Math.min(T,p.byteLength-S);return w.encodeInto(y,p.subarray(S,S+D)),D}}else m=function(b,p,y=0,S=s(p)){const T=Math.min(S,b.byteLength-y);b=b.subarray(y,y+T);let D=0,te=0;for(;D<p.length;){const re=p.codePointAt(D);if(re<=127){b[te++]=re,D++;continue}let le=0,P=0;for(re<=2047?(le=6,P=192):re<=65535?(le=12,P=224):re<=2097151&&(le=18,P=240),b[te++]=P|re>>le,le-=6;le>=0;)b[te++]=128|re>>le&63,le-=6;D+=re>=65536?2:1}return T};return utf8={byteLength:s,toString:g,write:m},utf8}var utf16le,hasRequiredUtf16le;function requireUtf16le(){if(hasRequiredUtf16le)return utf16le;hasRequiredUtf16le=1;function s(w){return w.length*2}function g(w){const b=w.byteLength;let p="";for(let y=0;y<b-1;y+=2)p+=String.fromCharCode(w[y]+w[y+1]*256);return p}function m(w,b,p=0,y=s(b)){const S=Math.min(y,w.byteLength-p);let T=S;for(let D=0;D<b.length&&!((T-=2)<0);++D){const te=b.charCodeAt(D),re=te>>8,le=te%256;w[p+D*2]=le,w[p+D*2+1]=re}return S}return utf16le={byteLength:s,toString:g,write:m},utf16le}var hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,function(s,g){const m=requireAscii(),w=requireBase64(),b=requireHex(),p=requireUtf8(),y=requireUtf16le(),S=new Uint8Array(Uint16Array.of(255).buffer)[0]===255;function T(_){switch(_){case"ascii":return m;case"base64":return w;case"hex":return b;case"utf8":case"utf-8":case void 0:case null:return p;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y;default:throw new Error(`Unknown encoding: ${_}`)}}function D(_){return _ instanceof Uint8Array}function te(_){try{return T(_),!0}catch{return!1}}function re(_,k,f){const W=new Uint8Array(_);return k!==void 0&&g.fill(W,k,0,W.byteLength,f),W}function le(_){return new Uint8Array(_)}function P(_){return new Uint8Array(_)}function ee(_,k){return T(k).byteLength(_)}function J(_,k){if(_===k)return 0;const f=Math.min(_.byteLength,k.byteLength);_=new DataView(_.buffer,_.byteOffset,_.byteLength),k=new DataView(k.buffer,k.byteOffset,k.byteLength);let W=0;for(let ue=f-f%4;W<ue;W+=4){const ke=_.getUint32(W,S),Me=k.getUint32(W,S);if(ke!==Me)break}for(;W<f;W++){const ue=_.getUint8(W),ke=k.getUint8(W);if(ue<ke)return-1;if(ue>ke)return 1}return _.byteLength>k.byteLength?1:_.byteLength<k.byteLength?-1:0}function O(_,k){k===void 0&&(k=_.reduce((ue,ke)=>ue+ke.byteLength,0));const f=new Uint8Array(k);let W=0;for(const ue of _){if(W+ue.byteLength>f.byteLength){const ke=ue.subarray(0,f.byteLength-W);return f.set(ke,W),f}f.set(ue,W),W+=ue.byteLength}return f}function ae(_,k,f=0,W=0,ue=_.byteLength){if(ue>0&&ue<W||ue===W||_.byteLength===0||k.byteLength===0)return 0;if(f<0)throw new RangeError("targetStart is out of range");if(W<0||W>=_.byteLength)throw new RangeError("sourceStart is out of range");if(ue<0)throw new RangeError("sourceEnd is out of range");f>=k.byteLength&&(f=k.byteLength),ue>_.byteLength&&(ue=_.byteLength),k.byteLength-f<ue-W&&(ue=k.length-f+W);const ke=ue-W;return _===k?k.copyWithin(f,W,ue):k.set(_.subarray(W,ue),f),ke}function ge(_,k){if(_===k)return!0;if(_.byteLength!==k.byteLength)return!1;const f=_.byteLength;_=new DataView(_.buffer,_.byteOffset,_.byteLength),k=new DataView(k.buffer,k.byteOffset,k.byteLength);let W=0;for(let ue=f-f%4;W<ue;W+=4)if(_.getUint32(W,S)!==k.getUint32(W,S))return!1;for(;W<f;W++)if(_.getUint8(W)!==k.getUint8(W))return!1;return!0}function Le(_,k,f,W,ue){if(typeof k=="string"?typeof f=="string"?(ue=f,f=0,W=_.byteLength):typeof W=="string"&&(ue=W,W=_.byteLength):typeof k=="number"?k=k&255:typeof k=="boolean"&&(k=+k),f<0||_.byteLength<f||_.byteLength<W)throw new RangeError("Out of range index");if(f===void 0&&(f=0),W===void 0&&(W=_.byteLength),W<=f)return _;if(k||(k=0),typeof k=="number")for(let ke=f;ke<W;++ke)_[ke]=k;else{k=D(k)?k:q(k,ue);const ke=k.byteLength;for(let Me=0;Me<W-f;++Me)_[Me+f]=k[Me%ke]}return _}function q(_,k,f){return typeof _=="string"?I(_,k):Array.isArray(_)?M(_):ArrayBuffer.isView(_)?X(_):U(_,k,f)}function I(_,k){const f=T(k),W=new Uint8Array(f.byteLength(_));return f.write(W,_,0,W.byteLength),W}function M(_){const k=new Uint8Array(_.length);return k.set(_),k}function X(_){const k=new Uint8Array(_.byteLength);return k.set(_),k}function U(_,k,f){return new Uint8Array(_,k,f)}function L(_,k,f,W){return z(_,k,f,W)!==-1}function E(_,k,f,W,ue){if(_.byteLength===0)return-1;if(typeof f=="string"?(W=f,f=0):f===void 0?f=ue?0:_.length-1:f<0&&(f+=_.byteLength),f>=_.byteLength){if(ue)return-1;f=_.byteLength-1}else if(f<0)if(ue)f=0;else return-1;if(typeof k=="string")k=q(k,W);else if(typeof k=="number")return k=k&255,ue?_.indexOf(k,f):_.lastIndexOf(k,f);if(k.byteLength===0)return-1;if(ue){let ke=-1;for(let Me=f;Me<_.byteLength;Me++)if(_[Me]===k[ke===-1?0:Me-ke]){if(ke===-1&&(ke=Me),Me-ke+1===k.byteLength)return ke}else ke!==-1&&(Me-=Me-ke),ke=-1}else{f+k.byteLength>_.byteLength&&(f=_.byteLength-k.byteLength);for(let ke=f;ke>=0;ke--){let Me=!0;for(let Ve=0;Ve<k.byteLength;Ve++)if(_[ke+Ve]!==k[Ve]){Me=!1;break}if(Me)return ke}}return-1}function z(_,k,f,W){return E(_,k,f,W,!0)}function u(_,k,f,W){return E(_,k,f,W,!1)}function we(_,k,f){const W=_[k];_[k]=_[f],_[f]=W}function Te(_){const k=_.byteLength;if(k%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<k;f+=2)we(_,f,f+1);return _}function He(_){const k=_.byteLength;if(k%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<k;f+=4)we(_,f,f+3),we(_,f+1,f+2);return _}function R(_){const k=_.byteLength;if(k%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<k;f+=8)we(_,f,f+7),we(_,f+1,f+6),we(_,f+2,f+5),we(_,f+3,f+4);return _}function H(_){return _}function se(_,k,f=0,W=_.byteLength){const ue=_.byteLength;return f>=ue||W<=f?"":(f<0&&(f=0),W>ue&&(W=ue),(f!==0||W<ue)&&(_=_.subarray(f,W)),T(k).toString(_))}function V(_,k,f,W,ue){return f===void 0?ue="utf8":W===void 0&&typeof f=="string"?(ue=f,f=void 0):ue===void 0&&typeof W=="string"&&(ue=W,W=void 0),T(ue).write(_,k,f,W)}function x(_,k,f){return f===void 0&&(f=0),new DataView(_.buffer,_.byteOffset,_.byteLength).setFloat64(f,k,!0),f+8}function F(_,k,f){return f===void 0&&(f=0),new DataView(_.buffer,_.byteOffset,_.byteLength).setFloat32(f,k,!0),f+4}function Z(_,k,f){return f===void 0&&(f=0),new DataView(_.buffer,_.byteOffset,_.byteLength).setUint32(f,k,!0),f+4}function ie(_,k,f){return f===void 0&&(f=0),new DataView(_.buffer,_.byteOffset,_.byteLength).setInt32(f,k,!0),f+4}function K(_,k){return k===void 0&&(k=0),new DataView(_.buffer,_.byteOffset,_.byteLength).getFloat64(k,!0)}function G(_,k){return k===void 0&&(k=0),new DataView(_.buffer,_.byteOffset,_.byteLength).getFloat32(k,!0)}function Q(_,k){return k===void 0&&(k=0),new DataView(_.buffer,_.byteOffset,_.byteLength).getUint32(k,!0)}function oe(_,k){return k===void 0&&(k=0),new DataView(_.buffer,_.byteOffset,_.byteLength).getInt32(k,!0)}function Ne(_,k,f){return f===void 0&&(f=0),new DataView(_.buffer,_.byteOffset,_.byteLength).setFloat64(f,k,!1),f+8}function De(_,k,f){return f===void 0&&(f=0),new DataView(_.buffer,_.byteOffset,_.byteLength).setFloat32(f,k,!1),f+4}function be(_,k,f){return f===void 0&&(f=0),new DataView(_.buffer,_.byteOffset,_.byteLength).setUint32(f,k,!1),f+4}function Ue(_,k,f){return f===void 0&&(f=0),new DataView(_.buffer,_.byteOffset,_.byteLength).setInt32(f,k,!1),f+4}function Pe(_,k){return k===void 0&&(k=0),new DataView(_.buffer,_.byteOffset,_.byteLength).getFloat64(k,!1)}function qe(_,k){return k===void 0&&(k=0),new DataView(_.buffer,_.byteOffset,_.byteLength).getFloat32(k,!1)}function Ce(_,k){return k===void 0&&(k=0),new DataView(_.buffer,_.byteOffset,_.byteLength).getUint32(k,!1)}function Ke(_,k){return k===void 0&&(k=0),new DataView(_.buffer,_.byteOffset,_.byteLength).getInt32(k,!1)}s.exports=g={isBuffer:D,isEncoding:te,alloc:re,allocUnsafe:le,allocUnsafeSlow:P,byteLength:ee,compare:J,concat:O,copy:ae,equals:ge,fill:Le,from:q,includes:L,indexOf:z,lastIndexOf:u,swap16:Te,swap32:He,swap64:R,toBuffer:H,toString:se,write:V,writeDoubleLE:x,writeFloatLE:F,writeUInt32LE:Z,writeInt32LE:ie,readDoubleLE:K,readFloatLE:G,readUInt32LE:Q,readInt32LE:oe,writeDoubleBE:Ne,writeFloatBE:De,writeUInt32BE:be,writeInt32BE:Ue,readDoubleBE:Pe,readFloatBE:qe,readUInt32BE:Ce,readInt32BE:Ke}}(browser,browser.exports)),browser.exports}var headers={},hasRequiredHeaders;function requireHeaders(){if(hasRequiredHeaders)return headers;hasRequiredHeaders=1;const s=requireBrowser(),g="0000000000000000000",m="7777777777777777777",w=48,b=s.from([117,115,116,97,114,0]),p=s.from([w,w]),y=s.from([117,115,116,97,114,32]),S=s.from([32,0]),T=4095,D=257,te=263;headers.decodeLongPath=function(E,z){return X(E,0,E.length,z)},headers.encodePax=function(E){let z="";E.name&&(z+=U(" path="+E.name+`
`)),E.linkname&&(z+=U(" linkpath="+E.linkname+`
`));const u=E.pax;if(u)for(const we in u)z+=U(" "+we+"="+u[we]+`
`);return s.from(z)},headers.decodePax=function(E){const z={};for(;E.length;){let u=0;for(;u<E.length&&E[u]!==32;)u++;const we=parseInt(s.toString(E.subarray(0,u)),10);if(!we)return z;const Te=s.toString(E.subarray(u+1,we-1)),He=Te.indexOf("=");if(He===-1)return z;z[Te.slice(0,He)]=Te.slice(He+1),E=E.subarray(we)}return z},headers.encode=function(E){const z=s.alloc(512);let u=E.name,we="";if(E.typeflag===5&&u[u.length-1]!=="/"&&(u+="/"),s.byteLength(u)!==u.length)return null;for(;s.byteLength(u)>100;){const Te=u.indexOf("/");if(Te===-1)return null;we+=we?"/"+u.slice(0,Te):u.slice(0,Te),u=u.slice(Te+1)}return s.byteLength(u)>100||s.byteLength(we)>155||E.linkname&&s.byteLength(E.linkname)>100?null:(s.write(z,u),s.write(z,ge(E.mode&T,6),100),s.write(z,ge(E.uid,6),108),s.write(z,ge(E.gid,6),116),q(E.size,z,124),s.write(z,ge(E.mtime.getTime()/1e3|0,11),136),z[156]=w+J(E.type),E.linkname&&s.write(z,E.linkname,157),s.copy(b,z,D),s.copy(p,z,te),E.uname&&s.write(z,E.uname,265),E.gname&&s.write(z,E.gname,297),s.write(z,ge(E.devmajor||0,6),329),s.write(z,ge(E.devminor||0,6),337),we&&s.write(z,we,345),s.write(z,ge(ae(z),6),148),z)},headers.decode=function(E,z,u){let we=E[156]===0?0:E[156]-w,Te=X(E,0,100,z);const He=M(E,100,8),R=M(E,108,8),H=M(E,116,8),se=M(E,124,12),V=M(E,136,12),x=ee(we),F=E[157]===0?null:X(E,157,100,z),Z=X(E,265,32),ie=X(E,297,32),K=M(E,329,8),G=M(E,337,8),Q=ae(E);if(Q===8*32)return null;if(Q!==M(E,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(re(E))E[345]&&(Te=X(E,345,155,z)+"/"+Te);else if(!le(E)){if(!u)throw new Error("Invalid tar header: unknown format.")}return we===0&&Te&&Te[Te.length-1]==="/"&&(we=5),{name:Te,mode:He,uid:R,gid:H,size:se,mtime:new Date(1e3*V),type:x,linkname:F,uname:Z,gname:ie,devmajor:K,devminor:G,pax:null}};function re(L){return s.equals(b,L.subarray(D,D+6))}function le(L){return s.equals(y,L.subarray(D,D+6))&&s.equals(S,L.subarray(te,te+2))}function P(L,E,z){return typeof L!="number"?z:(L=~~L,L>=E?E:L>=0||(L+=E,L>=0)?L:0)}function ee(L){switch(L){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}function J(L){switch(L){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}function O(L,E,z,u){for(;z<u;z++)if(L[z]===E)return z;return u}function ae(L){let E=256;for(let z=0;z<148;z++)E+=L[z];for(let z=156;z<512;z++)E+=L[z];return E}function ge(L,E){return L=L.toString(8),L.length>E?m.slice(0,E)+" ":g.slice(0,E-L.length)+L+" "}function Le(L,E,z){E[z]=128;for(let u=11;u>0;u--)E[z+u]=L&255,L=Math.floor(L/256)}function q(L,E,z){L.toString(8).length>11?Le(L,E,z):s.write(E,ge(L,11),z)}function I(L){let E;if(L[0]===128)E=!0;else if(L[0]===255)E=!1;else return null;const z=[];let u;for(u=L.length-1;u>0;u--){const He=L[u];E?z.push(He):z.push(255-He)}let we=0;const Te=z.length;for(u=0;u<Te;u++)we+=z[u]*Math.pow(256,u);return E?we:-1*we}function M(L,E,z){if(L=L.subarray(E,E+z),E=0,L[E]&128)return I(L);{for(;E<L.length&&L[E]===32;)E++;const u=P(O(L,32,E,L.length),L.length,L.length);for(;E<u&&L[E]===0;)E++;return u===E?0:parseInt(s.toString(L.subarray(E,u)),8)}}function X(L,E,z,u){return s.toString(L.subarray(E,O(L,0,E,E+z)),u)}function U(L){const E=s.byteLength(L);let z=Math.floor(Math.log(E)/Math.log(10))+1;return E+z>=Math.pow(10,z)&&z++,E+z+L}return headers}var extract,hasRequiredExtract;function requireExtract(){if(hasRequiredExtract)return extract;hasRequiredExtract=1;const{Writable:s,Readable:g,getStreamError:m}=requireStreamx(),w=requireFastFifo(),b=requireBrowser(),p=requireHeaders(),y=b.alloc(0);class S{constructor(){this.buffered=0,this.shifted=0,this.queue=new w,this._offset=0}push(P){this.buffered+=P.byteLength,this.queue.push(P)}shiftFirst(P){return this._buffered===0?null:this._next(P)}shift(P){if(P>this.buffered)return null;if(P===0)return y;let ee=this._next(P);if(P===ee.byteLength)return ee;const J=[ee];for(;(P-=ee.byteLength)>0;)ee=this._next(P),J.push(ee);return b.concat(J)}_next(P){const ee=this.queue.peek(),J=ee.byteLength-this._offset;if(P>=J){const O=this._offset?ee.subarray(this._offset,ee.byteLength):ee;return this.queue.shift(),this._offset=0,this.buffered-=J,this.shifted+=J,O}return this.buffered-=P,this.shifted+=P,ee.subarray(this._offset,this._offset+=P)}}class T extends g{constructor(P,ee,J){super(),this.header=ee,this.offset=J,this._parent=P}_read(P){this.header.size===0&&this.push(null),this._parent._stream===this&&this._parent._update(),P(null)}_predestroy(){this._parent.destroy(m(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=re(this.header.size),this._parent._update())}_destroy(P){this._detach(),P(null)}}class D extends s{constructor(P){super(P),P||(P={}),this._buffer=new S,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=te,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=P.filenameEncoding||"utf-8",this._allowUnknownFormat=!!P.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(P){if(this._locked=!1,P){this.destroy(P),this._continueWrite(P);return}this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=p.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(P){return this._continueWrite(P),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),this._header.size===0||this._header.type==="directory"?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(P){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=p.decodeLongPath(P,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=p.decodeLongPath(P,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=p.decodePax(P);break;case"pax-header":this._pax=this._paxGlobal===null?p.decodePax(P):Object.assign({},this._paxGlobal,p.decodePax(P));break}}_consumeLongHeader(){this._longHeader=!1,this._missing=re(this._header.size);const P=this._buffer.shift(this._header.size);try{this._decodeLongHeader(P)}catch(ee){return this._continueWrite(ee),!1}return!0}_consumeStream(){const P=this._buffer.shiftFirst(this._missing);if(P===null)return!1;this._missing-=P.byteLength;const ee=this._stream.push(P);return this._missing===0?(this._stream.push(null),ee&&this._stream._detach(),ee&&this._locked===!1):ee}_createStream(){return new T(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;){if(this._missing>0){if(this._stream!==null){if(this._consumeStream()===!1)return;continue}if(this._longHeader===!0){if(this._missing>this._buffer.buffered)break;if(this._consumeLongHeader()===!1)return!1;continue}const P=this._buffer.shiftFirst(this._missing);P!==null&&(this._missing-=P.byteLength);continue}if(this._buffer.buffered<512)break;if(this._stream!==null||this._consumeHeader()===!1)return}this._continueWrite(null)}_continueWrite(P){const ee=this._callback;this._callback=te,ee(P)}_write(P,ee){this._callback=ee,this._buffer.push(P),this._update()}_final(P){this._finished=this._missing===0&&this._buffer.buffered===0,P(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(P){this._stream&&this._stream.destroy(m(this)),P(null)}[Symbol.asyncIterator](){let P=null,ee=null,J=null,O=null,ae=null;const ge=this;return this.on("entry",I),this.on("error",U=>{P=U}),this.on("close",M),{[Symbol.asyncIterator](){return this},next(){return new Promise(q)},return(){return X(null)},throw(U){return X(U)}};function Le(U){if(!ae)return;const L=ae;ae=null,L(U)}function q(U,L){if(P)return L(P);if(O){U({value:O,done:!1}),O=null;return}ee=U,J=L,Le(null),ge._finished&&ee&&(ee({value:void 0,done:!0}),ee=J=null)}function I(U,L,E){ae=E,L.on("error",te),ee?(ee({value:L,done:!1}),ee=J=null):O=L}function M(){Le(P),ee&&(P?J(P):ee({value:void 0,done:!0}),ee=J=null)}function X(U){return ge.destroy(U),Le(U),new Promise((L,E)=>{if(ge.destroyed)return L({value:void 0,done:!0});ge.once("close",function(){U?E(U):L({value:void 0,done:!0})})})}}}extract=function(P){return new D(P)};function te(){}function re(le){return le&=511,le&&512-le}return extract}var constants={exports:{}};const empty={},empty$1=Object.freeze(Object.defineProperty({__proto__:null,default:empty},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(empty$1);var hasRequiredConstants;function requireConstants(){if(hasRequiredConstants)return constants.exports;hasRequiredConstants=1;const s={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{constants.exports=require$$0.constants||s}catch{constants.exports=s}return constants.exports}var pack,hasRequiredPack;function requirePack(){if(hasRequiredPack)return pack;hasRequiredPack=1;const{Readable:s,Writable:g,getStreamError:m}=requireStreamx(),w=requireBrowser(),b=requireConstants(),p=requireHeaders(),y=493,S=420,T=w.alloc(1024);class D extends g{constructor(O,ae,ge){super({mapWritable:ee,eagerOpen:!0}),this.written=0,this.header=ae,this._callback=ge,this._linkname=null,this._isLinkname=ae.type==="symlink"&&!ae.linkname,this._isVoid=ae.type!=="file"&&ae.type!=="contiguous-file",this._finished=!1,this._pack=O,this._openCallback=null,this._pack._stream===null?this._pack._stream=this:this._pack._pending.push(this)}_open(O){this._openCallback=O,this._pack._stream===this&&this._continueOpen()}_continuePack(O){if(this._callback===null)return;const ae=this._callback;this._callback=null,ae(O)}_continueOpen(){this._pack._stream===null&&(this._pack._stream=this);const O=this._openCallback;if(this._openCallback=null,O!==null){if(this._pack.destroying)return O(new Error("pack stream destroyed"));if(this._pack._finalized)return O(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),O(null)}}_write(O,ae){if(this._isLinkname)return this._linkname=this._linkname?w.concat([this._linkname,O]):O,ae(null);if(this._isVoid)return O.byteLength>0?ae(new Error("No body allowed for this entry")):ae();if(this.written+=O.byteLength,this._pack.push(O))return ae();this._pack._drain=ae}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?w.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),P(this._pack,this.header.size),this._pack._done(this))}_final(O){if(this.written!==this.header.size)return O(new Error("Size mismatch"));this._finish(),O(null)}_getError(){return m(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(O){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),O()}}class te extends s{constructor(O){super(O),this._drain=le,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(O,ae,ge){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");typeof ae=="function"&&(ge=ae,ae=null),ge||(ge=le),(!O.size||O.type==="symlink")&&(O.size=0),O.type||(O.type=re(O.mode)),O.mode||(O.mode=O.type==="directory"?y:S),O.uid||(O.uid=0),O.gid||(O.gid=0),O.mtime||(O.mtime=new Date),typeof ae=="string"&&(ae=w.from(ae));const Le=new D(this,O,ge);return w.isBuffer(ae)?(O.size=ae.byteLength,Le.write(ae),Le.end(),Le):(Le._isVoid,Le)}finalize(){if(this._stream||this._pending.length>0){this._finalizing=!0;return}this._finalized||(this._finalized=!0,this.push(T),this.push(null))}_done(O){O===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(O){if(!O.pax){const ae=p.encode(O);if(ae){this.push(ae);return}}this._encodePax(O)}_encodePax(O){const ae=p.encodePax({name:O.name,linkname:O.linkname,pax:O.pax}),ge={name:"PaxHeader",mode:O.mode,uid:O.uid,gid:O.gid,size:ae.byteLength,mtime:O.mtime,type:"pax-header",linkname:O.linkname&&"PaxHeader",uname:O.uname,gname:O.gname,devmajor:O.devmajor,devminor:O.devminor};this.push(p.encode(ge)),this.push(ae),P(this,ae.byteLength),ge.size=O.size,ge.type=O.type,this.push(p.encode(ge))}_doDrain(){const O=this._drain;this._drain=le,O()}_predestroy(){const O=m(this);for(this._stream&&this._stream.destroy(O);this._pending.length;){const ae=this._pending.shift();ae.destroy(O),ae._continueOpen()}this._doDrain()}_read(O){this._doDrain(),O()}}pack=function(O){return new te(O)};function re(J){switch(J&b.S_IFMT){case b.S_IFBLK:return"block-device";case b.S_IFCHR:return"character-device";case b.S_IFDIR:return"directory";case b.S_IFIFO:return"fifo";case b.S_IFLNK:return"symlink"}return"file"}function le(){}function P(J,O){O&=511,O&&J.push(T.subarray(0,512-O))}function ee(J){return w.isBuffer(J)?J:w.from(J)}return pack}var hasRequiredTarStream;function requireTarStream(){return hasRequiredTarStream||(hasRequiredTarStream=1,tarStream.extract=requireExtract(),tarStream.pack=requirePack()),tarStream}var tarStreamExports=requireTarStream();const tar=getDefaultExportFromCjs(tarStreamExports);var streamxExports=requireStreamx();function fromWeb(s,g={}){if(s instanceof ReadableStream&&s instanceof WritableStream)return new DuplexWebStream(s,s,g);if(s instanceof ReadableStream)return new ReadableWebStream(s,g);if(s instanceof WritableStream)return new WritableWebStream(s,g);if(s.readable&&s.writable)return new DuplexWebStream(s.readable,s.writable,g);if(s.readable)return new ReadableWebStream(s.readable,g);if(s.writable)return new WritableWebStream(s.writable,g);throw new Error("fromWeb: Requires at least a readable or writable stream.")}class ReadableWebStream extends streamxExports.Readable{constructor(g,m){super(m),this._reader=g.getReader(),this._attachErrorHandler()}_attachErrorHandler(){this._reader.closed.catch(g=>{this.destroy(g)})}async _read(g){try{const{done:m,value:w}=await this._reader.read();m?this.push(null):this.push(w),g()}catch(m){this.destroy(m),g(m)}}_destroy(g){this._reader.releaseLock(),g()}}class WritableWebStream extends streamxExports.Writable{constructor(g,m){super(m),this._writer=g.getWriter()}async _write(g,m){try{await this._writer.write(g),m()}catch(w){this.destroy(w),m(w)}}async _final(g){try{await this._writer.close(),g()}catch(m){this.destroy(m),g(m)}}_destroy(g){this._writer.releaseLock(),g()}}class DuplexWebStream extends streamxExports.Duplex{constructor(g,m,w){super(w),this._reader=g.getReader(),this._writer=m.getWriter(),this._attachErrorHandler(),this._handleCompletion()}_attachErrorHandler(){this._reader.closed.catch(g=>{this.destroy(g)}),this._writer.closed.catch(g=>{this.destroy(g)})}async _read(g){try{const{done:m,value:w}=await this._reader.read();m?this.push(null):this.push(w),g()}catch(m){this.destroy(m),g(m)}}async _write(g,m){try{await this._writer.write(g),m()}catch(w){this.destroy(w),m(w)}}async _final(g){try{await this._writer.close(),g()}catch(m){this.destroy(m),g(m)}}_destroy(g){this._reader.releaseLock(),this._writer.releaseLock(),g()}_handleCompletion(){this.on("finish",()=>{this.emit("end")})}}function isStreamx(s){return typeof s._duplexState=="number"&&isStream(s)}function isStream(s){return!!s._readableState||!!s._writableState}function isReadableStream(s){return!!s._readableState}function isWritableStream(s){return!!s._writableState}const WRITE_WRITING=256<<17;function drained(s,g=!1){if(s.destroyed)return Promise.resolve(!1);const m=s._writableState,b=(g?Math.min(1,m.queue.length):m.queue.length)+(s._duplexState&WRITE_WRITING?1:0);return b===0?Promise.resolve(!0):(m.drains===null&&(m.drains=[]),new Promise(p=>{m.drains.push({writes:b,resolve:p})}))}var browserExports=requireBrowser();const b4a=getDefaultExportFromCjs(browserExports);function handleReadable(s,g){let m=!1;const w={};return new ReadableStream({start(b){w.data=p,w.end=y,w.close=y,w.error=S;for(const D in w)s.on(D,w[D]);s.pause();function p(D){m||(D===null?y():(b.enqueue(typeof D=="string"?b4a.from(D):D),s.pause()))}function y(){T(),b.close()}function S(D){T(),b.error(D)}function T(){if(!m){m=!0;for(const D in w)s.off(D,w[D])}}},pull(){m||s.resume()},cancel(){m=!0;for(const b in w)s.off(b,w[b]);s.destroy?s.destroy():s.close&&s.close()},type:void 0})}function handleWritable(s){return new WritableStream({async write(g){try{const m=typeof g=="string"?b4a.from(g):g;s.write(m)||await drained(s,!1)}catch(m){s.destroy(m),setTimeout(()=>s.emit("error",m),0)}},async close(){s.end&&s.end()},abort(g){s.destroy&&s.destroy(g),setTimeout(()=>s.emit("error",g),0)}})}function toWeb(s,g){let m;if(s&&!isStreamx(s)){let p;({readable:s,writable:m,duplex:p}=s),p&&!s&&!m&&(s=p,m=p)}else isReadableStream(s)&&isWritableStream(s)?m=s:isReadableStream(s)?m=null:isWritableStream(s)&&(m=s,s=null);if(!s&&!m){const p="Invalid stream";throw new Error(p)}let w,b;return s&&(w=handleReadable(s)),m&&(b=handleWritable(m)),w&&b?{readable:w,writable:b}:w||b}const data$g={width:24,height:24,body:'<path fill="currentColor" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h6l2 2h8q.825 0 1.413.588T22 8v10q0 .825-.587 1.413T20 20z"/>'},data$f={width:24,height:24,body:'<path fill="currentColor" d="M6 22q-.825 0-1.412-.587T4 20V4q0-.825.588-1.412T6 2h8l6 6v12q0 .825-.587 1.413T18 22zm7-13h5l-5-5z"/>'},data$e={width:24,height:24,body:'<path fill="currentColor" d="m12 16l-5-5l1.4-1.45l2.6 2.6V4h2v8.15l2.6-2.6L17 11zm-6 4q-.825 0-1.412-.587T4 18v-3h2v3h12v-3h2v3q0 .825-.587 1.413T18 20z"/>'},data$d={width:24,height:24,body:'<path fill="currentColor" d="M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zm2-4h2V8H9zm4 0h2V8h-2z"/>'},data$c={width:24,height:24,body:'<path fill="currentColor" d="M6.4 19L5 17.6l5.6-5.6L5 6.4L6.4 5l5.6 5.6L17.6 5L19 6.4L13.4 12l5.6 5.6l-1.4 1.4l-5.6-5.6z"/>'},data$b={width:24,height:24,body:'<path fill="currentColor" d="M21 7v12q0 .825-.587 1.413T19 21H5q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h12zm-9 11q1.25 0 2.125-.875T15 15t-.875-2.125T12 12t-2.125.875T9 15t.875 2.125T12 18m-6-8h9V6H6z"/>'},data$a={width:24,height:24,body:'<path fill="currentColor" d="M11 19h2v-4.175l1.6 1.6L16 15l-4-4l-4 4l1.425 1.4L11 14.825zm-5 3q-.825 0-1.412-.587T4 20V4q0-.825.588-1.412T6 2h8l6 6v12q0 .825-.587 1.413T18 22zm7-13h5l-5-5z"/>'},data$9={width:24,height:24,body:'<path fill="currentColor" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h6l2 2h8q.825 0 1.413.588T22 8v10q0 .825-.587 1.413T20 20zm7-3h2v-4.2l1.6 1.6L16 13l-4-4l-4 4l1.4 1.4l1.6-1.6z"/>'},data$8={width:24,height:24,body:'<path fill="currentColor" d="m12 18l4-4l-1.4-1.4l-1.6 1.6V10h-2v4.2l-1.6-1.6L8 14zm-7 3q-.825 0-1.412-.587T3 19V6.525q0-.35.113-.675t.337-.6L4.7 3.725q.275-.35.687-.538T6.25 3h11.5q.45 0 .863.188t.687.537l1.25 1.525q.225.275.338.6t.112.675V19q0 .825-.587 1.413T19 21zm.4-15h13.2l-.85-1H6.25z"/>'},data$7={width:24,height:24,body:'<path fill="currentColor" d="m12 10l-4 4l1.4 1.4l1.6-1.6V18h2v-4.2l1.6 1.6L16 14zM5 21q-.825 0-1.412-.587T3 19V6.525q0-.35.113-.675t.337-.6L4.7 3.725q.275-.35.687-.538T6.25 3h11.5q.45 0 .863.188t.687.537l1.25 1.525q.225.275.338.6t.112.675V19q0 .825-.587 1.413T19 21zm.4-15h13.2l-.85-1H6.25z"/>'},data$6={width:24,height:24,body:'<path fill="currentColor" d="m7.825 13l5.6 5.6L12 20l-8-8l8-8l1.425 1.4l-5.6 5.6H20v2z"/>'},PICKERS_UNAVAILABLE=!window.showDirectoryPicker||!window.showOpenFilePicker,rootFolder=await navigator.storage.getDirectory(),TAR_TYPES=[{description:"TAR archive (.tar)",accept:{"application/x-tar":".tar"}},{description:"GZip compressed TAR archive (.tar.gz)",accept:{"application/x-gzip":".tar.gz","application/gzip":".tar.gz"}}];async function skipOobe(){await rootFolder.getFileHandle(".ContentExists",{create:!0});const s=await rootFolder.getDirectoryHandle("Content",{create:!0});for(const g of["Fonts","Images","Sound"])await s.getDirectoryHandle(g,{create:!0})}self.skipOobe=skipOobe;async function copyFile(s,g){const m=await s.getFile().then(p=>p.stream()),b=await(await g.getFileHandle(s.name,{create:!0})).createWritable();await m.pipeTo(b)}async function countFolder(s){let g=0;async function m(w){for await(const[b,p]of w)p.kind==="file"?g++:await m(p)}return await m(s),g}async function copyFolder(s,g,m){async function w(p,y){for await(const[S,T]of p)if(T.kind==="file")await copyFile(T,y),m&&m(S);else{const D=await y.getDirectoryHandle(S,{create:!0});await w(T,D)}}const b=await g.getDirectoryHandle(s.name,{create:!0});await w(s,b)}async function hasContent(){try{const s=await rootFolder.getDirectoryHandle("Content",{create:!1});for(const g of["Fonts","Images","Sounds"])try{await s.getDirectoryHandle(g,{create:!1})}catch{return!1}return await rootFolder.getFileHandle(".ContentExists",{create:!1}),!0}catch{return!1}}async function createEntry(s,g,m){let w=null,b=null;const p=new Promise((S,T)=>{w=S,b=T}),y=s.entry(g,S=>{S?b(S):w()});if(m){const S=m.getReader();for(;;){const{value:T,done:D}=await S.read();if(D||!T)break;y.write(T)}y.end()}else y.end();await p}function createTar(s,g){const m=tar.pack();async function w(b,p){for await(const[y,S]of p)if(g&&g(S.kind,y),S.kind=="file"){const T=await S.getFile(),D=T.stream();await createEntry(m,{name:b+y,type:S.kind,size:T.size},D)}else await createEntry(m,{name:b+y,type:S.kind}),await w(b+y+"/",S)}return w("",s).then(()=>m.finalize()),toWeb(m)}async function extractTar(s,g,m){const w=fromWeb(s),b=tar.extract();b.on("entry",async(y,S,T)=>{const D=toWeb(S);async function te(){const P=D.getReader();for(;;){const{done:ee,value:J}=await P.read();if(ee||!J)break}}const re=y.name.split("/");if(re[re.length-1]===""&&re.pop(),re[0]===g.name&&re.shift(),re.length===0){await te(),T();return}let le=g;for(const P of re.splice(0,re.length-1))le=await le.getDirectoryHandle(P,{create:!0});if(y.type==="directory")await le.getDirectoryHandle(re[0],{create:!0}),await te(),m&&m("directory",re[0]);else if(y.type==="file"){const ee=await(await le.getFileHandle(re[0],{create:!0})).createWritable();await D.pipeTo(ee),m&&m("file",re[0])}else await te();T()});const p=new Promise((y,S)=>{b.on("finish",()=>y()),b.on("error",T=>S(T))});w.pipe(b),await p}async function recursiveGetDirectory(s,g){return g.length===0?s:recursiveGetDirectory(await s.getDirectoryHandle(g[0]),g.slice(1))}const OpfsExplorer=function(){this.path=rootFolder,this.components=[],this.entries=[],this.uploading=!1,this.downloading=!1,this.css=`
		display: flex;
		flex-direction: column;
		gap: 1em;
  min-height: min(44rem, 90vh);

		.path {
			display: flex;
			align-items: center;
			gap: 0.5rem;
			margin: 0 0.5rem;
		}
		.path h3 {
			font-family: var(--font-mono);
			margin: 0;
		}

		.entries {
			display: flex;
			flex-direction: column;
			gap: 0.5em;
		}

		.entry {
			display: flex;
			align-items: center;
			gap: 0.5rem;

			font-family: var(--font-mono);
		}

		.entry > svg {
			width: 1.5rem;
			height: 1.5rem;
		}

		.editor {
			display: flex;
			flex-direction: column;
			gap: 0.5em;
		}
		.editor .controls {
			display: flex;
			gap: 0.5em;
			align-items: center;
		}
		.editor .controls .name {
			font-family: var(--font-mono);
		}
		.editor textarea {
			min-height: 16rem;
			background: var(--bg-sub);
			color: var(--fg);
			border: 2px solid var(--surface4);
			border-radius: 0.5rem;
		}

		.expand { flex: 1 }
		.hidden { visibility: hidden }

		.archive {
			display: flex;
			flex-direction: row;
			gap: 0.5em;

		}

		.archive > * {
		  flex-grow: 1;
		}
	`,useChange([this.open],()=>this.path=this.path),useChange([this.path],async()=>{this.components=await rootFolder.resolve(this.path)||[];let y=[];this.components.length>0&&y.push({name:"..",entry:await recursiveGetDirectory(rootFolder,this.components.slice(0,this.components.length-1))});for await(const[S,T]of this.path)y.push({name:S,entry:T});y.sort((S,T)=>{const D=S.entry.kind.localeCompare(T.entry.kind);return D===0?S.name.localeCompare(T.name):D}),this.entries=y});const s=async()=>{const y=await showOpenFilePicker({multiple:!0});this.uploading=!0;for(const S of y)await copyFile(S,this.path);this.path=this.path,this.uploading=!1},g=async()=>{const y=await showDirectoryPicker();this.uploading=!0,await copyFolder(y,this.path),this.path=this.path,this.uploading=!1},m=async()=>{const y=this.components.at(-1)||"terraria-wasm",S=await showSaveFilePicker({excludeAcceptAllOption:!0,suggestedName:y+".tar",types:TAR_TYPES});this.downloading=!0;let T=createTar(this.path,(te,re)=>console.log(`tarring ${te} ${re}`));S.name.endsWith(".gz")&&(T=T.pipeThrough(new CompressionStream("gzip")));const D=await S.createWritable();await T.pipeTo(D),this.downloading=!1},w=async()=>{const y=await showOpenFilePicker({multiple:!0});this.uploading=!0;for(const S of y){let T=await S.getFile().then(D=>D.stream());S.name.endsWith(".gz")&&(T=T.pipeThrough(new DecompressionStream("gzip"))),await extractTar(T,this.path,(D,te)=>console.log(`untarring ${D} ${te}`))}this.uploading=!1},b=use(this.uploading,y=>y||PICKERS_UNAVAILABLE),p=use(this.downloading,y=>y||PICKERS_UNAVAILABLE);return h("div",null,h("div",{class:"path"},$if(use(this.components,y=>y.length>0),h(Button,{type:"normal",icon:"full",disabled:!1,"on:click":async()=>{this.path=this.entries[0].entry},title:"Up A Level"},h(Icon,{icon:data$6}))),h("h3",null,use(this.components,y=>y.length==0?"Root Directory":"/"+y.join("/"))),h("div",{class:"expand"}),h(Button,{type:"normal",icon:"full",disabled:b,"on:click":s,title:"Upload File"},h(Icon,{icon:data$a})),h(Button,{type:"normal",icon:"full",disabled:b,"on:click":g,title:"Upload Folder"},h(Icon,{icon:data$9}))),$if(use(this.uploading),h("span",null,"Uploading files...")),$if(use(this.downloading),h("span",null,"Downloading files...")),h("div",{class:"entries"},use(this.entries,y=>y.filter(S=>S.name!="..").map(S=>{const T=S.entry.kind==="directory"?data$g:data$f,D=async le=>{le.stopImmediatePropagation(),this.editing?.name===S.name&&(this.editing=null),await this.path.removeEntry(S.name,{recursive:!0}),this.path=this.path},te=async le=>{if(le.stopImmediatePropagation(),S.entry.kind==="file"){const ee=await S.entry.getFile(),J=URL.createObjectURL(ee),O=document.createElement("a");O.href=J,O.download=S.name,O.click(),await new Promise(ae=>setTimeout(ae,100)),URL.revokeObjectURL(J)}},re=()=>{S.entry.kind==="directory"?(this.editing=null,this.path=S.entry):this.editing=S.entry};return h(Button,{"on:click":re,icon:"none",type:"listitem",disabled:!1,class:"entry"},h(Icon,{icon:S.name==".."?data$9:T}),h("span",null,S.name===".."?"Parent Directory":S.name),h("div",{class:"expand"}),h(Button,{class:S.entry.kind!=="file"?"hidden":"","on:click":te,icon:"full",type:"listaction",disabled:!1,title:"Download File"},h(Icon,{icon:data$e})),h(Button,{class:S.name===".."?"hidden":"","on:click":D,icon:"full",type:"listaction",disabled:!1,title:"Delete File"},h(Icon,{icon:data$d})))}))),use(this.editing,y=>{if(y){const S=h("textarea",null);S.value="Loading file...",y.getFile().then(D=>D.text()).then(D=>S.value=D);const T=async()=>{const D=await y.createWritable();await D.write(S.value),await D.close(),this.editing=null};return h("div",{class:"editor"},h("div",{class:"controls"},h("div",{class:"name"},y.name),h("div",{class:"expand"}),h(Button,{"on:click":T,icon:"left",type:"primary",disabled:!1},h(Icon,{icon:data$b}),"Save"),h(Button,{"on:click":()=>this.editing=null,icon:"full",type:"normal",disabled:!1},h(Icon,{icon:data$c}))),S)}}),h("div",{style:{flexGrow:1}}),h("div",{class:"archive"},h(Button,{type:"normal",icon:"full",disabled:b,"on:click":w},h(Icon,{icon:data$7})," ","Upload Folder Archive"),h(Button,{type:"normal",icon:"full",disabled:p,"on:click":m},h(Icon,{icon:data$8})," ","Download Folder Archive")))},data$5={width:24,height:24,body:'<path fill="currentColor" d="M8 19V5l11 7z"/>'},data$4={width:24,height:24,body:'<path fill="currentColor" d="M3 21v-5h2v3h3v2zm13 0v-2h3v-3h2v5zM3 8V3h5v2H5v3zm16 0V5h-3V3h5v5z"/>'},data$3={width:24,height:24,body:'<path fill="currentColor" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h6l2 2h8q.825 0 1.413.588T22 8H4v10l2.4-8h17.1l-2.575 8.575q-.2.65-.737 1.038T19 20z"/>'},Dialog=function(){return this.css=`
		display: flex;
		flex-direction: column;
		gap: 0.8rem;

		background: var(--bg);
		color: var(--fg);
		border: 1.25px solid var(--surface3);
		border-radius: 1.5rem;

		width: min(40rem, 100%);
		min-height: min(50rem, 100%);
		max-height: min(50rem, 100%);

		position: fixed;
		inset: 0;
		opacity: 0;

		scale: .9;
    transform: rotate3d(1, 0, 0, -20deg);
    filter: brightness(1.5);

		pointer-events: none;
		transition: opacity 0.25s, transform 0.175s, filter 0.2s, scale 0.2s, background 0.1s, border-color 0.1s;
    transition-timing-function: ease;
    transition-delay: 0.05s, 0.05s, 0.05s, 0.05s;
    transform-origin: 50% 0%;
    perspective: 1250px;

		&[open] {
			opacity: 1;
			transform: rotate3d(1,0,0,0deg);
			filter: brightness(1.0);
		  transition-delay: 0.05s, 0.05s, 0.05s, 0.2s;
			pointer-events: auto;
		}

		&[open]::backdrop {
		  background: rgba(32, 28, 28, 0.35);
		}

		&::backdrop {
			background: rgba(32, 28, 28, 0);
			transition: background 0.2s;
		}

		.header {
			display: flex;
			gap: 0.5rem;
			align-items: center;
      border-bottom: 1.8px solid var(--surface2);
      transition: border-color 0.1s ease;
      padding-bottom: 0.5rem;
      user-select: none;
      -webkit-user-select: none;
		}

		.header h2 {
			margin: 0;
		}

		.children {
			overflow-y: scroll;
			overflow-x: hidden;
			scrollbar-width: none;
      scrollbar-color: transparent transparent;
		}

		.expand { flex: 1 }
	`,this.mount=()=>{const s=this.root;useChange([this.open],()=>{this.open?s.showModal():s.close()})},h("dialog",{class:"component-dialog"},h("div",{class:"header"},h("h2",null,this.name),h("div",{class:"expand"}),h(Button,{"on:click":()=>{this.open=!1},type:"normal",icon:"full",disabled:!1,title:"Close"},h(Icon,{icon:data$c}))),h("div",{class:"children"},this.children))},NAME="Terraria",Logo=function(){return this.css=`
		display: flex;
		align-items: center;
		font-size: 1.5rem;

		font-family: Andy Bold;

		img {
			image-rendering: pixelated;
			-ms-interpolation-mode: nearest-neighbor;
			width: 3rem;
			height: 3rem;
		}

		.extras {
			align-self: start;
			padding: 0.25rem 0;
			font-size: 1rem;
			color: var(--fg6);

			display: flex;
			flex-direction: column;
			justify-content: space-between;
		}
	`,h("div",null,h("img",{src:"/app.ico"}),h("span",null,"terrarium"),h("div",{class:"extras"},h("span",null,"v1.4.0.0")))},TopBar=function(){return this.css=`
		padding: 0.5em;

		display: flex;
		align-items: stretch;
		gap: 0.5rem;

		.group {
			display: flex;
			align-items: center;
			gap: 1rem;
		}

		.expand { flex: 1; }

		@media (max-width: 750px) {
			& {
				flex-direction: column;
			}
			.group {
				justify-content: space-evenly;
			}
		}
	`,useChange([gameState.ready,gameState.playing],()=>{this.allowPlay=gameState.ready&&!gameState.playing}),this.mount=()=>{setInterval(()=>{if(gameState.playing){const g=(1e3/(gameState.timebuf.toArray().reduce((m,w)=>m+w,0)/TIMEBUF_SIZE)).toFixed(0);this.fps.innerText=""+g}},1e3)},h("div",null,h("div",{class:"group"},h(Logo,null),$if(use(gameState.playing),h("div",null,"FPS: ",h("span",{"bind:this":use(this.fps)})))),h("div",{class:"expand"}),h("div",{class:"group"},h(Button,{"on:click":()=>this.fsOpen=!0,icon:"full",type:"normal",disabled:!1},h(Icon,{icon:data$3})),h(Button,{"on:click":async()=>{try{navigator.keyboard.lock(),await this.canvas.requestFullscreen({navigationUI:"hide"})}catch{}},icon:"full",type:"normal",disabled:use(gameState.playing,s=>!s)},h(Icon,{icon:data$4})),h(Button,{"on:click":()=>{play()},icon:"left",type:"primary",disabled:use(this.allowPlay,s=>!s)},h(Icon,{icon:data$5}),"Play")))},BottomBar=function(){return this.css=`
		background: var(--bg);
		border-top: 2px solid var(--surface1);
		padding: 0.5rem;
		font-size: 0.8rem;

		display: flex;
		align-items: center;
		justify-content: space-between;

		span {
			text-align: center;
		}

		@media (max-width: 750px) {
			& {
				flex-direction: column;
				gap: 0.5rem;
			}
		}
	`,h("div",null,h("span",null,"Ported by ",h(Link,{href:"https://github.com/velzie"},"velzie")),h("span",null,"All game assets and code belong to ",h(Link,{href:"https://re-logic.com/"},"Re-Logic")," All rights reserved."))},GameView=function(){this.css=`
		aspect-ratio: 16 / 9;
		user-select: none;
		display: grid;
		grid-template-areas: "overlay";
		max-height: 90rem;

		div, canvas {
			grid-area: overlay;
			width: 100%;
			height: 100%;
		}

		div.started, canvas.stopped {
			display: none;
		}

		div {
			font-size: 2rem;
			font-weight: 570;

			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
		}

		canvas:fullscreen {
			border: none;
			border-radius: 0;
			background: black;
		}
	`;const s=use(gameState.playing,m=>m?"started":"stopped"),g=use(gameState.playing,m=>m?"canvas started":"canvas stopped");return this.mount=()=>{preInit()},h("div",{class:"tcontainer"},h("div",{class:s},"Game not running."),h("canvas",{id:"canvas",class:g,"bind:this":use(this.canvas),"on:contextmenu":m=>m.preventDefault()}))},LogView=function(){this.css=`
		height: 16rem;
		overflow: scroll;
		padding: 1em;
		background: var(--bg);

		font-family: var(--font-mono);

		::-webkit-scrollbar {
		  display: none;
    }
	`;const s=(g,m)=>{const w=document.createElement("div");return w.innerText=m,w.style.color=g,w};return this.mount=()=>{useChange([gameState.logbuf],()=>{if(gameState.logbuf.length>0){for(const g of gameState.logbuf)this.root.appendChild(s(g.color,g.log));this.root.scrollTop=this.root.scrollHeight}})},h("div",{class:"tcontainer"})},Main=function(){return this.css=`
		width: 100%;
		height: 100%;
		background: url(/backdrop.png);
		color: var(--fg);

		display: flex;
		flex-direction: column;
		overflow: scroll;

		.main {
			flex: 1;
			display: flex;
			flex-direction: column;
			padding: 1rem 0;

			gap: 1em;

			margin: auto;
			width: min(1300px, calc(100% - 2rem));
		}

		.main h2 {
			margin: 0;
		}
	`,this.fsOpen=!1,this.achievementsOpen=!1,h("div",null,h(TopBar,{canvas:use(this.canvas),"bind:fsOpen":use(this.fsOpen),"bind:achievementsOpen":use(this.achievementsOpen)}),h("div",{class:"main"},h(GameView,{"bind:canvas":use(this.canvas)}),h(LogView,null)),h(Dialog,{name:"File System","bind:open":use(this.fsOpen)},h(OpfsExplorer,{open:use(this.fsOpen)})),h(Dialog,{name:"Achievements","bind:open":use(this.achievementsOpen)}),h(BottomBar,null))},data$2={width:24,height:24,body:'<path fill="currentColor" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h6l2 2h8q.825 0 1.413.588T22 8H11.175l-2-2H4v12l2.4-8h17.1l-2.575 8.575q-.2.65-.737 1.038T19 20zm2.1-2H19l1.8-6H7.9zm0 0l1.8-6zM4 8V6z"/>'},data$1={width:24,height:24,body:'<path fill="currentColor" d="M16 12v-2h2v2zm0 2h-2v-2h2zm0 2v-2h2v2zm-4.825-8l-2-2H4v12h10v-2h2v2h4V8h-4v2h-2V8zM4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h6l2 2h8q.825 0 1.413.588T22 8v10q0 .825-.587 1.413T20 20zm0-2V6z"/>'},data={width:24,height:24,body:'<path fill="currentColor" d="M10.5 15h3l-.575-3.225q.5-.25.788-.725T14 10q0-.825-.587-1.412T12 8t-1.412.588T10 10q0 .575.288 1.05t.787.725zm1.5 7q-3.475-.875-5.738-3.988T4 11.1V5l8-3l8 3v6.1q0 3.8-2.262 6.913T12 22"/>'},validateDirectory=async s=>{if(s.name!="Content")return"Directory name is not Content";for(const g of["Fonts","Images","Sounds"])try{await s.getDirectoryHandle(g,{create:!1})}catch{return`Failed to find subdirectory ${g}`}return""},Intro=function(){return this.css=`
		display: flex;
		flex-direction: column;
		gap: 1rem;
		height:100%;
		font-family: Andy Bold;

		.warning {
			color: var(--warning);
		}
		.error {
			color: var(--error);
		}

		.buttons {
		  display: flex;
		  align-self: end;
		  gap: 1rem;
		  width: 100%;
		  div {
		    width: 100%;
		  }
		}
	`,h("div",null,h("div",null,"This is a port of ",h(Link,{href:"https://terraria.org"},"Terraria")," to the browser with WebAssembly. Frontend and build system is heavily based on r58's ",h(Link,{href:"https://github.com/MercuryWorkshop/celeste-wasm"},"Celeste browser port"),h("br",null),"Want to know how this was made? Check the ",h(Link,{href:"https://velzie.rip/blog/celeste-wasm/"},"writeup"),"!"),h("div",null,"You will need to own Terraria to play this. Make sure you either own it on Steam, or have it downloaded and installed on your computer."),h("div",null,"A ",h(Link,{href:"https://mercurywork.shop"},"Mercury Workshop")," Project. Ported by ",h(Link,{href:"https://velzie.rip"},"velzie")),PICKERS_UNAVAILABLE?h("div",{class:"error"},"Your browser does not support the"," ",h(Link,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/showDirectoryPicker"},"File System Access API"),"."," ","You will be unable to copy your Terraria assets to play or use the upload features in the filesystem viewer. Please switch to a chromium based browser."):null,h("div",{style:"flex: 1"}),h("div",null,"You will need to install Terraria to your browser with one of the following methods:"),h("div",{class:"buttons"},h(Fragment,null,h(Button,{"on:click":()=>this["on:next"]("copy"),type:"primary",icon:"left",disabled:PICKERS_UNAVAILABLE},h(Icon,{icon:data$2}),PICKERS_UNAVAILABLE?"Copying local assets is unsupported":"Copy local assets"),h(Button,{"on:click":()=>this["on:next"]("download"),type:"primary",icon:"left",disabled:!1},h(Icon,{icon:data$e}),"Download Assets from Steam"),h(Button,{"on:click":()=>this["on:next"]("extract"),type:"primary",icon:"left",disabled:!1},h(Icon,{icon:data$8}),"Upload Archive"))))},Progress=function(){return this.css=`
		background: var(--surface1);
		border-radius: 1rem;
		height: 1rem;

		.bar {
			background: var(--accent);
			border-radius: 1rem;
			height: 1rem;
			transition: width 250ms;
		}
	`,h("div",null,h("div",{class:"bar",style:use`width:${this.percent}%`}))},Copy=function(){this.css=`
		display: flex;
		flex-direction: column;
		gap: 0.5rem;
	`;const s=async()=>{const g=await showDirectoryPicker(),m=await validateDirectory(g);if(m){this.status=m;return}const w=await countFolder(g);let b=0;this.copying=!0;const p=performance.now();await copyFolder(g,rootFolder,S=>{b++,this.percent=b/w*100,console.debug(`copied ${S}: ${(b/w*100).toFixed(2)}`)});const y=performance.now();console.debug(`copy took ${(y-p).toFixed(2)}ms`),await new Promise(S=>setTimeout(S,250)),await rootFolder.getFileHandle(".ContentExists",{create:!0}),this["on:done"]()};return h("div",null,h("div",null,"Select your Terraria install's Content directory. It will be copied to browser storage and can be removed in the file manager."),h("div",null,"The Content directory for Steam installs of Terraria is usually located in one of these locations:",h("ul",null,h("li",null,h("code",null,"~/.steam/root/steamapps/common/Terraria ")),h("li",null,h("code",null,"C:\\Program Files (x86)\\Steam\\steamapps\\common\\Terraria ")),h("li",null,h("code",null,"~/Library/Application Support/Steam/steamapps/common/Terraria")))),$if(use(this.copying),h(Progress,{percent:use(this.percent)})),h(Button,{"on:click":s,type:"primary",icon:"left",disabled:use(this.copying)},h(Icon,{icon:data$2}),"Select Terraria Content directory"),$if(use(this.status),h("div",{class:"error"},use(this.status))))},Extract=function(){this.css=`
		/* hacky */
		.center svg {
			transform: translateY(15%);
		}
	`;const s=async()=>{const m=(await showOpenFilePicker({excludeAcceptAllOption:!0,types:TAR_TYPES}))[0],w=await m.getFile();let b=0;const p=w.size,S=w.stream().getReader(),T=this;let D=new ReadableStream({async pull(te){const{value:re,done:le}=await S.read();!re||le?te.close():(te.enqueue(re),b+=re.byteLength,T.percent=b/p*100)}});this.extracting=!0,m.name.endsWith(".gz")&&(D=D.pipeThrough(new DecompressionStream("gzip"))),await extractTar(D,rootFolder,(te,re)=>console.log(`untarred ${te} ${re}`)),this.extracting=!1,await rootFolder.getFileHandle(".ContentExists",{create:!0}),this["on:done"]()};return h("div",{class:"step"},h("p",{class:"center"},"Select a ",NAME," exported .tar archive of the root directory. You can create this on a browser with ",NAME," already set-up by clicking the archive button (",h(Icon,{icon:data$8}),") in the filesystem explorer while in the root directory."),$if(use(this.extracting),h(Progress,{percent:use(this.percent)})),h(Button,{"on:click":s,type:"primary",icon:"left",disabled:use(this.extracting)},h(Icon,{icon:data$1}),"Select ",NAME," archive"),$if(use(this.status),h("div",{class:"error"},use(this.status))))},SimpleDownload=function(){return this.css=`
		/* hacky */
		.center svg {
			transform: translateY(15%);
		}
	`,this.mount=async()=>{try{let s=new URL(void 0,location.href).href,g=await realFetch(s);if(console.log(g),g.status!=200)throw new Error(`Failed to download file: ${g.status} ${g.statusText}`);let m=0;const w=parseInt(g.headers.get("Content-Length")),p=g.body.getReader(),y=this;let S=new ReadableStream({async pull(T){const{value:D,done:te}=await p.read();!D||te?T.close():(T.enqueue(D),m+=D.byteLength,y.percent=m/w*100)}});this.extracting=!0,s.endsWith(".gz")&&(S=S.pipeThrough(new DecompressionStream("gzip"))),await extractTar(S,rootFolder,(T,D)=>{console.log(`extracted ${T} ${D}`)}),this.extracting=!1,await rootFolder.getFileHandle(".ContentExists",{create:!0}),this["on:done"]()}catch(s){this.status=`Failed to download file: ${s}`,this.extracting=!1,console.error(s)}},h("div",{class:"step"},h("p",{class:"center"},"Downloading ",NAME," from the server"),$if(use(this.extracting),h(Progress,{percent:use(this.percent)})),$if(use(this.status),h("div",{class:"error"},use(this.status))))},Download=function(){this.username="",this.password="",this.css=`
		display: flex;
		flex-direction: column;
		gap: 1rem;
		font-size: 15pt;

		input[type="file"] {
			display: none;
		}

		.methods {
		  display: flex;
		  gap: 1rem;
		}
		.methods > div {
		  flex: 1;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;

      padding: 1rem;
		}
		input {
		  color: var(--fg);
		  background: var(--bg);
		  border: 2px solid black;
		  border-radius: 0.5em;
		  padding: 0.25rem;

		  font-family: Andy Bold;
		  font-size: 18pt;
		}

		.spacer {
		      flex: 1;
		      margin-top: 0.5em;
		      margin-bottom: 0.5em;
		      border-bottom: 1px solid var(--fg);
    }

		h1, h3 {
		  text-align: center;
		  font-family: Andy Bold;
      padding: 0;
      margin: 0;
		}
		.logcontainer {
		  font-size: initial;
		}

		.qrcontainer {
		  display: flex;
      justify-content: center;
      flex-direction: column;
      align-items: center;
      width: 100%;
		}
		.qrcontainer img {
		  width: 40%;
		}
	`;const s=async()=>{gameState.loginstate=1,await initSteam(null,null,!0)!=0?gameState.loginstate=3:gameState.loginstate=2},g=async()=>{gameState.loginstate=1,await initSteam(this.username,this.password,!1)!=0?(this.username="",this.password="",gameState.loginstate=3):gameState.loginstate=2},m=async()=>{this.downloading=!0,await downloadApp()};return h("div",null,h("h1",null,"Steam Login"),h("div",null,"This will log into Steam through a proxy, so that it can download Terraria assets and achievement stats ",h("br",null),"The account details are encrpyted on your device and never sent to a server. Still, beware of unofficial deployments"),$if(use(gameState.loginstate,w=>w==0||w==3),h("div",{class:"methods"},h("div",{class:"tcontainer"},h("h3",null,"Username and Password"),h("input",{"bind:value":use(this.username),placeholder:"Username"}),h("input",{"bind:value":use(this.password),type:"password",placeholder:"Password"}),h(Button,{type:"primary",icon:"left",disabled:use(this.downloading),"on:click":g},h(Icon,{icon:data}),"Log In with Username and Password")),h("div",{class:"tcontainer"},h("h3",null,"Steam Guard QR Code"),"Requires the Steam app on your phone to be installed. ",h("br",null),h("div",{style:"flex: 1"}),h(Button,{type:"primary",icon:"left",disabled:use(this.downloading),"on:click":s},h(Icon,{icon:data}),"Log In with QR Code")))),$if(use(gameState.loginstate,w=>w==3),h("div",{style:"color: var(--error)"},"Failed to log in! Try again")),$if(use(gameState.loginstate,w=>w==3||w==1||w==2),h("div",{class:"logcontainer"},h(LogView,null))),$if(use(gameState.loginstate,w=>w==1),h("div",{class:"qrcontainer"},h("p",null,"Since this uses a proxy, the steam app might complain about your location being wrong. Just select the location that you don't usually log in from if it asks"),$if(use(gameState.qr),h("img",{src:use(gameState.qr)})),$if(use(gameState.qr),h("div",null,"Scan this QR code with the Steam app on your phone.")))),$if(use(gameState.loginstate,w=>w==2),h("div",null,h(Button,{type:"primary",icon:"left",disabled:use(this.downloading),"on:click":m},h(Icon,{icon:data}),"Download Assets"))),$if(use(this.downloading),h(Progress,{percent:use(this.percent)})))},Splash=function(){return this.css=`
		position: relative;

		.splash, .blur, .main {
			position: absolute;
			width: 100%;
			height: 100%;
			top: 0;
			left: 0;
		}

		.splash {
			object-fit: cover;
			z-index: 1;
		}

		.blur {
			backdrop-filter: blur(0.5vw);
			z-index: 2;
		}

		.main {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			z-index: 3;
			padding-bottom: 5em;
		}

		.container {
			backdrop-filter: blur(0.5vw);
			width: min(50rem, 100%);
			flex: 1;
			margin: 0 1rem;
			padding: 1em;
			font-size: 18pt;

			color: var(--fg);

			display: flex;
			flex-direction: column;
			gap: 0.5rem;
		}

		.logo {
			display: flex;
			justify-content: center;
		}
	`,this.next="",h("div",null,h("img",{class:"splash",src:"/backdrop.png"}),h("div",{class:"blur"}),h("div",{class:"main"},h("img",{src:"logo.png"}),h("div",{class:"container tcontainer"},use(this.next,s=>{if(s){if(s==="copy")return h(Copy,{"on:done":this["on:next"]});if(s==="extract")return h(Extract,{"on:done":this["on:next"]});if(s==="simpledownload")return h(SimpleDownload,{"on:done":this["on:next"]});if(s==="download")return h(Download,{"on:done":this["on:next"]})}else return h(Intro,{"on:next":g=>this.next=g})}))))},initialHasContent=await hasContent(),App=function(){this.css=`
		position: relative;

		div {
			position: absolute;
			width: 100%;
			height: 100%;
			top: 0;
			left: 0;
		}
		#splash {
			z-index: 1;
		}

		@keyframes fadeout {
			from { opacity: 1; scale: 1; }
			to { opacity: 0; scale: 1.2; }
		}
	`;const s=()=>{this.el.addEventListener("animationend",this.el.remove),this.el.style.animation="fadeout 0.5s ease"};return h("div",{id:"app",class:"dark"},initialHasContent?null:h("div",{id:"splash","bind:this":use(this.el)},h(Splash,{"on:next":s})),h("div",{id:"main"},h(Main,null)))},root=document.getElementById("app");try{root.replaceWith(h(App,null)),navigator.serviceWorker.register("/sw.js",{scope:"/"})}catch(s){console.log(s),root.replaceWith(document.createTextNode(`Failed to load: ${s}`))}
